(function(t){function e(e){for(var a,o,c=e[0],r=e[1],l=e[2],u=0,_=[];u<c.length;u++)o=c[u],s[o]&&_.push(s[o][0]),s[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);d&&d(e);while(_.length)_.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],a=!0,c=1;c<i.length;c++){var r=i[c];0!==s[r]&&(a=!1)}a&&(n.splice(e--,1),t=o(o.s=i[0]))}return t}var a={},s={app:0},n=[];function o(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=a,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(i,a,function(e){return t[e]}.bind(null,a));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/general_api/static/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=r;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"028e":function(t,e,i){"use strict";var a=i("2fd2"),s=i.n(a);s.a},"034f":function(t,e,i){"use strict";var a=i("04f5"),s=i.n(a);s.a},"04f5":function(t,e,i){},1597:function(t,e,i){},1982:function(t,e,i){"use strict";var a=i("4729"),s=i.n(a);s.a},"1a2c":function(t,e,i){},"1d3d":function(t,e,i){},"1f73":function(t,e,i){},"25cd":function(t,e,i){"use strict";var a=i("9db0"),s=i.n(a);s.a},"26d7":function(t,e,i){"use strict";var a=i("6124"),s=i.n(a);s.a},"2b59":function(t,e,i){"use strict";var a=i("30cd"),s=i.n(a);s.a},"2cc3":function(t,e,i){"use strict";var a=i("fd03"),s=i.n(a);s.a},"2fd2":function(t,e,i){},"30cd":function(t,e,i){},"340e":function(t,e,i){},3410:function(t,e,i){},"387b":function(t,e,i){},3955:function(t,e){t.exports=iview},4116:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bottom-tab"},[i("a",{staticClass:"store",attrs:{href:"javascript:void(0)","data-status":"store"===t.active?"active":""},on:{click:t.store}},[i("div",{staticClass:"icon"})]),i("a",{staticClass:"movie",attrs:{href:"javascript:void(0)","data-status":"movie"===t.active?"active":""},on:{click:t.movie}},[i("div",{staticClass:"icon"})]),i("a",{staticClass:"cinema",attrs:{href:"javascript:void(0)","data-status":"cinema"===t.active?"active":""},on:{click:t.cinema}},[i("div",{staticClass:"icon"})]),i("a",{staticClass:"mine",attrs:{href:"javascript:void(0)","data-status":"mine"===t.active?"active":""},on:{click:t.mine}},[i("div",{staticClass:"icon"})])])},s=[],n=i("a78e"),o=i.n(n),c={props:{active:{type:String,default:""}},methods:{movie:function(){this.$router.push({name:"index",params:{mid:"2"}})},store:function(){this.$router.push({name:"storeList"})},cinema:function(){this.$router.push({name:"cinemaList",params:{mid:"2"}})},mine:function(){var t=o.a.get("_lac_k_");if(t)this.$router.push({name:"personalCenter"});else{var e=o.a.get("_lac_ap_");e?this.$router.push({name:"login",params:{apid:e}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}}}},r=c,l=(i("a13f"),i("2877")),d=Object(l["a"])(r,a,s,!1,null,"21601724",null);e["a"]=d.exports},4196:function(t,e,i){"use strict";var a=i("cda1"),s=i.n(a);s.a},"456dc":function(t,e,i){"use strict";var a=i("8145"),s=i.n(a);s.a},4729:function(t,e,i){},"51b8":function(t,e,i){"use strict";var a=i("c70f"),s=i.n(a);s.a},"51bf":function(t,e,i){},"526c":function(t,e,i){"use strict";var a=i("51bf"),s=i.n(a);s.a},"56d7":function(t,e,i){"use strict";i.r(e);var a={};i.r(a),i.d(a,"totalPrice",function(){return ja});var s={};i.r(s),i.d(s,"getGroupList",function(){return Fa}),i.d(s,"getGoodsList",function(){return Ha}),i.d(s,"ListenCart",function(){return Ja}),i.d(s,"AddToCart",function(){return Va}),i.d(s,"ReleaseToCart",function(){return Ya}),i.d(s,"ClearCart",function(){return Xa}),i.d(s,"ToggleComboShow",function(){return Za}),i.d(s,"initFirCatId",function(){return Qa}),i.d(s,"getLogo",function(){return ts});i("456d"),i("ac6a"),i("cadf"),i("551c");var n=i("8bbf"),o=i.n(n),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},r=[],l=i("c93e"),d=i("5880"),u=i.n(d),_={created:function(){this.getLogo()},methods:Object(l["a"])({},Object(d["mapActions"])(["getLogo"]))},m=_,p=(i("034f"),i("2877")),v=Object(p["a"])(m,c,r,!1,null,null,null),h=v.exports,g=i("6389"),f=i.n(g),C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticClass:"swiper-gb",staticStyle:{height:"3.25rem"}},[i("swiper",{ref:"indexSwiper",staticClass:"banner-box",attrs:{options:t.swiperOption}},[i("swiper-slide",{staticClass:"banner-slide",staticStyle:{transform:"scale(1)",padding:"0"}},[i("img",{staticClass:"banner-img",attrs:{src:"https://cdn.iplaysky.com/static/img/wechat_banner.png"}})])],1),i("div",{staticClass:"city-box"},[i("div",{staticClass:"city-name",on:{click:t.godo_cinemas}},[t._v("\n\t\t\t\t"+t._s(""==t.cinemanm?"...":t.cinemanm)+"\n\t\t\t\t")]),t._m(0)])],1),i("div",{staticClass:"movie-box"},[i("div",{staticClass:"hotsShowing"},[i("div",{staticClass:"hotsShowing-top"},[t._m(1),i("div",{staticClass:"hotsShowing-top-r"},[i("div",{staticClass:"hotsShowing-top-r-num"},[t._v("共"+t._s(t.MovieNum)+"部")]),i("span",{staticClass:"show-icon show"})])]),i("div",{staticClass:"hotsShowing-bottom",staticStyle:{position:"relative"}},[i("div",{ref:"movieWrapper",staticClass:"wrapper",staticStyle:{height:"100%",position:"absolute",left:"0",top:"0"}},[i("ul",{style:t.movieListWidth},t._l(t.MovieList,function(e,a){return i("li",[i("img",{attrs:{src:null==e.img?"http://pe1s.static.pdr365.com/default_movie_pic.jpg":e.img},on:{click:function(i){t.videoDetails(e.properties.id,a)}}}),i("p",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(e.name))]),i("div",{on:{click:function(i){t.godo_buy(e.properties.id,a)}}},[t._v("购票")])])}))])])]),i("div",{staticClass:"hotsShowing",staticStyle:{"padding-bottom":"50px"}},[t._m(2),i("div",{staticClass:"hotsShowing-bottom",staticStyle:{position:"relative"}},[i("div",{ref:"comingWrapper",staticClass:"wrapper",staticStyle:{height:"100%",position:"absolute",left:"0",top:"0"}},[i("ul",{style:t.comingListWidth},t._l(t.ComeList,function(e,a){return i("li",[i("img",{attrs:{src:null==e.img?"http://pe1s.static.pdr365.com/default_movie_pic.jpg":e.img},on:{click:function(i){t.GoIngvideoDetails(e.id,a)}}}),i("p",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(e.nm))]),i("span",[t._v(t._s(e.rt))])])}))])])])]),i("tabBottom",{attrs:{active:"movie"}}),t.forbid?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd",staticStyle:{"font-size":".3rem",padding:".6rem 20px .28rem","min-height":"24px",color:"#333333"}},[t._v("监测到离您最近的影城")]),i("div",{staticClass:"input-box",staticStyle:{"font-size":".3rem","margin-bottom":".3rem"}},[t._v("\n\t            好时光影城\n\t            ")]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:t.godo_cinema}},[t._v("切换")]),i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.forbid=!1}}},[t._v("确定")])])])]):t._e(),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(3)]):t._e()],1)},w=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"am-list-arrow"},[i("span",{staticClass:"am-icon arrow vertical"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hotsShowing-top-l"},[i("div",{staticClass:"hotsShowing-top-l-main"}),i("div",{staticClass:"hotsShowing-top-l-title"},[t._v("热映")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hotsShowing-top"},[i("div",{staticClass:"hotsShowing-top-l"},[i("div",{staticClass:"hotsShowing-top-l-main"}),i("div",{staticClass:"hotsShowing-top-l-title"},[t._v("即将上映")])]),i("div",{staticClass:"hotsShowing-top-r"},[i("span",{staticClass:"show-icon show"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],b=i("c7cb"),y=b["a"],k=(i("d44d"),Object(p["a"])(y,C,w,!1,null,null,null)),x=k.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"details-bg"}),i("div",{staticClass:"video-details-content-box"},[i("div",{staticClass:"video-details-content-bj"},[i("img",{attrs:{src:null==t.MovieD.pic_entry?"http://pe1s.static.pdr365.com/default_movie_pic.jpg":t.MovieD.pic_entry}})]),i("div",{staticClass:"video-details-content"},[i("div",{staticClass:"video-details-content-img"},[i("img",{attrs:{src:null==t.MovieD.pic_entry?"http://pe1s.static.pdr365.com/default_movie_pic.jpg":t.MovieD.pic_entry}})]),i("div",{staticClass:"video-details-content-right"},[i("div",{staticClass:"video-details-content-right-title"},[i("p",[t._v(t._s(t.MovieD.film_name))]),i("div",[t._v(t._s(t.MovieD.film_dimensional))])]),i("p",{staticClass:"video-details-content-right-title-en"},[t._v(t._s(t.MovieD.film_name))]),i("p",{staticClass:"video-details-content-right-type"},[t._v(t._s(t.MovieD.film_type))]),i("p",{staticClass:"video-details-content-right-country"},[t._v(t._s(t.MovieD.film_region)+"|"+t._s(t.MovieD.time_diff)+"分钟")]),i("p",{staticClass:"video-details-content-right-title-time"},[t._v(t._s(t.MovieD.release_date)+" 上映")]),i("div",{staticClass:"video-details-content-right-collect",staticStyle:{"text-align":"right","padding-right":"1rem"}},[t._v(t._s(t.MovieD.film_score)+"\n\t\t\t\t\t")])])])]),i("div",{staticClass:"video-synopsis"},[i("div",{staticClass:"video-synopsis-top"},[i("p",{staticClass:"video-synopsis-title"},[t._v("简介")]),i("div",{staticClass:"video-synopsis-character"},[i("span",{class:t.synopsis,on:{click:t.go_none}},[t._v(t._s(t.MovieD.film_content))]),i("a",{class:t.showBtn,on:{click:t.go_block}},[t._v("展开")])])]),i("div",{staticClass:"video-synopsis-bottom"},[i("p",{staticClass:"video-synopsis-actor"},[t._v("演员")]),i("div",{staticClass:"video-synopsis-actor-img",staticStyle:{height:"2rem",position:"relative"}},[i("div",{ref:"actorWrapper",staticClass:"wrapper",staticStyle:{position:"absolute",left:"0",top:"0",height:"100%"}},[i("ul",{style:t.actorListWidth},t._l(t.MovieD.celebritys,function(e){return i("li",[i("img",{attrs:{src:e.title_img}}),i("span",[t._v(t._s(e.cele_name))])])}))])])])]),i("div",{staticClass:"stage-photo-box"},[i("div",{staticClass:"stage-photo"},[i("p",{staticClass:"stage-photo-title"},[t._v("剧照")]),i("div",{staticClass:"stage-photo-list",staticStyle:{position:"relative"}},[i("div",{ref:"stageScroll",staticClass:"wrapper",staticStyle:{position:"absolute",left:"0",top:"0",height:"100%"}},[i("ul",{style:t.stagePhotoWidth},t._l(t.MovieD.pictures,function(t){return i("li",[i("img",{attrs:{src:t.pic_url}})])}))])])])]),i("div",{staticClass:"gopay-box"},[i("div",{staticClass:"gopay",on:{click:t.go_cinema}},[t._v("立即购买")])]),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e()])},D=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],T=i("a78e"),E=i.n(T),j=i("1fba"),O={data:function(){return{loading:!0,synopsis:"synopsis-none",showBtn:"showBtn",mid:"",MovieD:"",index:"",actorListWidth:"",stagePhotoWidth:""}},beforeRouteEnter:function(t,e,i){document.title="影片详情",i()},created:function(){this.mid=this.$route.params.mid,this.index=this.$route.params.index,this.MovieDeatil()},methods:{MovieDeatil:function(){var t=this,e="/general_api/api/MovieDetails?movie_id="+t.mid+"&ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){0==e.code&&(t.MovieD=e.data,t.actorListWidth="width: ".concat(1.34*e.data.celebritys.length,"rem"),t.stagePhotoWidth="width: ".concat(1.88*e.data.pictures.length,"rem"),t.$nextTick(function(){t.actorScroll=new j["a"](t.$refs.actorWrapper,{click:!0,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1}),t.stageScroll=new j["a"](t.$refs.stageScroll,{click:!0,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1})})),t.loading=!1,console.log(e)})},back:function(){router.go(-1)},go_block:function(){var t=this;t.synopsis="synopsis-block",t.showBtn="noneBtn"},go_none:function(){var t=this;t.synopsis="synopsis-none",t.showBtn="showBtn"},go_cinema:function(){var t=E.a.get("cinemaId");this.$router.push({name:"schedule",params:{cinemaId:t,mid:this.mid,index:this.index}})}}},I=O,L=(i("526c"),Object(p["a"])(I,S,D,!1,null,null,null)),P=L.exports,R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"details-bg"}),i("div",{staticClass:"cinema-city"},[i("div",{staticClass:"c-city-box"},[i("router-link",{staticClass:"dy-list-content",attrs:{to:"/cityList"}},[i("div",{staticClass:"c-city-name",staticStyle:{color:"#a9a9a9"}},[t._v("\n\t\t\t\t"+t._s(t.city_name)+"\n\t\t\t\t")]),i("div",{staticClass:"c-am-list-arrow"},[i("span",{staticClass:"c-am-icon arrow vertical"})])])],1)]),i("div",{staticClass:"cinema-box"},[i("ul",{staticClass:"cinema-ul"},t._l(t.cinemaList,function(e){return i("li",{staticClass:"cinema-li",on:{click:function(i){t.godo_choose(e.cinema_id,e.id,e.store_name,e.city,e.zone,e.address)}}},[i("div",{staticClass:"cinema-li-top"},[i("p",{staticClass:"cinema-li-nm"},[t._v(t._s(e.store_name))]),t._m(0,!0)]),i("p",{staticClass:"cinema-li-info"},[t._v(t._s(e.city)+t._s(e.zone)+t._s(e.address))]),i("div",{staticClass:"cinema-li-distance"},[t._v("200m")])])}))]),i("tabBottom",{attrs:{active:"cinema"}}),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(1)]):t._e()],1)},G=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"cinema-li-price"},[t._v("29.8"),i("span",[t._v("元起")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],M=(i("6b54"),i("a481"),i("c5f6"),i("4116")),B={data:function(){return{loading:!0,cinemaList:"",city_name:""}},beforeRouteEnter:function(t,e,i){document.title="门店",i()},created:function(){this.GetStore()},methods:{GetStore:function(){var t=this,e=this,i=E.a.get("city_no");if(void 0==i){var a="/general_api/api/cityList?ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(i){if("0"==i.code&&i.data&&i.data.length>0){var a=Number(i.data[0].city_no),s="/general_api/api/StoreList?city_no="+a+"&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(t){e.loading=!1,0==t.code&&t.data&&t.data.length>0&&(e.cinemaList=t.data)});var n=E.a.get("city_name");t.decodeUnicodeNm(n)}else e.loading=!1})}else{a="/general_api/api/StoreList?city_no="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(t){e.loading=!1,0==t.code&&t.data&&t.data.length>0&&(e.cinemaList=t.data)});var s=E.a.get("city_name");this.decodeUnicodeNm(s)}},decodeUnicodeNm:function(t){var e=this;t=t.replace(/\\/g,"%");var i=unescape(t);e.city_name=void 0==i?"":i},back:function(){this.$router.go(-1)},godo_choose:function(t,e,i,a,s,n){document.cookie="cinemaId="+t+";path=/",document.cookie="s_id="+e+";path=/";var o=a;s&&(o+=s),n&&(o+=n),this.encodeUnicodeAdd(o),this.encodeUnicodeName(i),this.$router.push({name:"storeList",params:{}})},encodeUnicodeAdd:function(t){for(var e=[],i=0;i<t.length;i++)e[i]=("00"+t.charCodeAt(i).toString(16)).slice(-4);E.a.set("storeAdd","\\u"+e.join("\\u"))},encodeUnicodeName:function(t){for(var e=[],i=0;i<t.length;i++)e[i]=("00"+t.charCodeAt(i).toString(16)).slice(-4);E.a.set("storeName","\\u"+e.join("\\u"))},godo_index:function(){this.$router.push({name:"index"})},godo_mine:function(){location.href="/general_api/tcss/index#/personalCenter"},godo_goods:function(){location.href="/general_api/tcss/index#/storeList"}},components:{tabBottom:M["a"]}},N=B,A=(i("5722"),Object(p["a"])(N,R,G,!1,null,null,null)),W=A.exports,U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"details-bg"}),i("div",{staticClass:"cinema-city"},[i("div",{staticClass:"c-city-box"},[i("router-link",{attrs:{to:"/cityList"}},[i("div",{staticClass:"c-city-name"},[t._v("\n\t\t\t\t北京市\n\t\t\t\t")]),i("div",{staticClass:"c-am-list-arrow"},[i("span",{staticClass:"c-am-icon arrow vertical"})])])],1)]),i("div",{staticClass:"cinema-box"},[i("ul",{staticClass:"cinema-ul"},[i("li",{staticClass:"cinema-li",on:{click:t.godo_choose}},[t._m(0),i("p",{staticClass:"cinema-li-info"},[t._v("北京市朝阳区望京soho北京市朝阳区望京soho")]),i("div",{staticClass:"cinema-li-distance"},[t._v("200m")])]),t._m(1),t._m(2)])]),i("div",{staticClass:"bottom-tab"},[i("a",{staticClass:"movie",attrs:{href:"javascript:void(0)"},on:{click:t.godo_index}},[i("div",{staticClass:"icon"})]),i("a",{staticClass:"store",attrs:{href:"javascript:void(0)"},on:{click:t.godo_goods}},[i("div",{staticClass:"icon"})]),t._m(3),i("a",{staticClass:"mine",attrs:{href:"javascript:void(0)"},on:{click:t.godo_mine}},[i("div",{staticClass:"icon"})])])])},z=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cinema-li-top"},[i("p",{staticClass:"cinema-li-nm"},[t._v("奥莱环球影城")]),i("p",{staticClass:"cinema-li-price"},[t._v("29.8"),i("span",[t._v("元起")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"cinema-li"},[i("div",{staticClass:"cinema-li-top"},[i("p",{staticClass:"cinema-li-nm"},[t._v("奥莱环球影城")]),i("p",{staticClass:"cinema-li-price"},[t._v("29.8"),i("span",[t._v("元起")])])]),i("p",{staticClass:"cinema-li-info"},[t._v("北京市朝阳区望京soho北京市朝阳区望京soho")]),i("div",{staticClass:"cinema-li-distance"},[t._v("200m")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",{staticClass:"cinema-li"},[i("div",{staticClass:"cinema-li-top"},[i("p",{staticClass:"cinema-li-nm"},[t._v("奥莱环球影城")]),i("p",{staticClass:"cinema-li-price"},[t._v("29.8"),i("span",[t._v("元起")])])]),i("p",{staticClass:"cinema-li-info"},[t._v("北京市朝阳区望京soho北京市朝阳区望京soho")]),i("div",{staticClass:"cinema-li-distance"},[t._v("200m")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"cinema",attrs:{href:"javascript:void(0)","data-status":"active"}},[i("div",{staticClass:"icon"})])}],K={data:function(){return{loading:!0,synopsis:"synopsis-none",showBtn:"showBtn"}},beforeRouteEnter:function(t,e,i){document.title="影院",i()},created:function(){},methods:{back:function(){router.go(-1)},godo_choose:function(){this.$router.push({name:"index"})},godo_goods:function(){location.href="/general_api/tcss/index#/storeList"},godo_index:function(){this.$router.push({name:"index"})},godo_mine:function(){location.href="/general_api/tcss/index#/personalCenter"}}},q=K,F=(i("b2ec"),Object(p["a"])(q,U,z,!1,null,null,null)),H=F.exports,J=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"login-top"},[t.logo?i("img",{staticClass:"login-top-logo",attrs:{src:t.logo.logo}}):t._e(),i("p",{staticClass:"login-top-title"},[t._v("欢迎来到腾讯好时光")])]),i("div",{staticClass:"login-mid"},[i("form",{staticClass:"form-wrapper",attrs:{autocomplete:"off",method:"POST",id:"login-formWrapper"}},[i("div",{staticClass:"login-mid-form"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.UserPhone,expression:"UserPhone"}],staticClass:"text-input",attrs:{type:"tel",name:"username",maxlength:"60",placeholder:"请输入手机号",value:"",id:"mobile"},domProps:{value:t.UserPhone},on:{input:function(e){e.target.composing||(t.UserPhone=e.target.value)}}})]),i("div",{staticClass:"login-mid-form login-mid-form-code"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.ValidateCode,expression:"ValidateCode"}],staticClass:"text-input-code",staticStyle:{"margin-left":"0"},attrs:{type:"tel",id:"img_validate_code",name:"verifycode",value:"",placeholder:"请输入验证码",autocomplete:"off",maxlength:"6"},domProps:{value:t.ValidateCode},on:{input:function(e){e.target.composing||(t.ValidateCode=e.target.value)}}}),i("Button",{staticStyle:{float:"right",display:"inline-block","margin-top":".3rem",border:"none","font-size":"0.28rem"},on:{click:t.godo_code}},[t._v(t._s(t.time))])],1),i("div",{staticClass:"login-box"},[i("div",{staticClass:"login",on:{click:t.godo_login}},[t._v("登录")])])])]),t._m(0),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v(t._s(t.loading))])])]):t._e(),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e()])},V=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"login-hint"},[t._v("点击登录，即代表已阅读并同意"),i("span",[t._v("《好时光影院相关条例》")])])}],Y={data:function(){return{loading:"",login:!1,tip_msg:"",UserPhone:"",ValidateCode:"",time:"获取验证码",num:"",apid:""}},beforeRouteEnter:function(t,e,i){document.title="用户登录",i()},created:function(){this.apid=this.$route.params.apid},computed:Object(l["a"])({},Object(d["mapState"])(["logo"])),methods:{back:function(){router.go(-1)},showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},showlogin:function(t,e){var i=this;i.loading=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.loading=""},e))},godo_code:function(){var t=this,e=t.UserPhone,i=/^[1][3,4,5,7,8,9][0-9]{9}$/;if(i.test(e)){t.ValidateCode="",t.showlogin("正在发送验证码",1e3);var a="/general_api/api/MessageCode?p="+e+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){e.available?(t.loading=!1,t.num=6e4,t.daojishi(t.num)):(t.loading=!1,t.showTip(e.messages[0]))})}else t.showTip("请输入正确的手机号")},daojishi:function(t){var e=this;if(0!=e.num){var i=t/1e3;e.time=i+" S",e.num=t,setTimeout(function(){t-=1e3,e.daojishi(t)},1e3)}else{var a="发送验证码";e.time=a}},godo_login:function(){var t=this,e=this,i=e.UserPhone,a=e.ValidateCode,s=E.a.get("_lac_ap_"),n="/general_api/api/Login?p="+i+"&code="+a+"&apid="+s+"&ts="+Date.parse(new Date),o=weui.loading("加载中");fetch(n).then(function(t){return t.json()}).then(function(i){o.hide(),i.available?(E.a.set("_lac_k_",i.data),t.$router.go(-1),e.showlogin("登录成功，正在跳转回之前页面",1e3)):e.showTip(i.messages[0])}),e.login=!1}}},X=Y,Z=(i("66c0"),Object(p["a"])(X,J,V,!1,null,null,null)),Q=Z.exports,tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"details-bg"}),i("div"),i("div",{staticClass:"my-coupons-box"},[t.Coupons.length>0?i("div",{staticClass:"my-coupons"},t._l(t.Coupons,function(e,a){return i("div",{staticClass:"my-coupons-list stamp02"},[i("div",{staticClass:"my-coupons-list-left"},["1000"==e.coupon_type?i("p",{staticClass:"my-coupons-list-left-num"},[t._v("¥ "),i("span",[t._v(" "+t._s(e.rule_value/100))])]):"3000"==e.coupon_type?i("p",{staticClass:"my-coupons-list-left-num"},[i("span",[t._v(" "+t._s(t._f("toSlice")(e.rule_value))+"折")])]):"2000"==e.coupon_type?i("p",{staticClass:"my-coupons-list-left-num",staticStyle:{margin:"auto","line-height":"2.2rem"}},[i("span",{staticStyle:{"font-size":".4rem"}},[t._v(" 兑换券 ")])]):t._e(),i("p",{staticClass:"my-coupons-list-left-type"},[t._v(t._s("1000"==e.coupon_type?"代金券":"3000"==e.coupon_type?"折扣券":""))])]),i("div",{staticClass:"my-coupons-list-mid"},[i("p",{staticClass:"my-coupons-list-mid-title"},[t._v(t._s(e.batch_title))]),"2000"==e.coupon_type?i("p",{staticClass:"my-coupons-list-mid-info"},[i("span",[t._v("仅限到店使用")])]):i("p",{staticClass:"my-coupons-list-mid-info"},t._l(e.rule,function(e){return i("span",[t._v(" "+t._s(e)+" ")])})),i("p",{staticClass:"my-coupons-list-mid-info"},[t._v("有效期："+t._s(t.timelist[a]))]),i("p",{staticClass:"my-coupons-list-mid-info"},[t._v("券码："),i("span",[t._v(t._s(e.code))])])]),2e3!=e.coupon_type?i("div",{staticClass:"my-coupons-list-pay",on:{click:t.go_use}},[t._v("使用")]):t._e()])})):i("div",{staticClass:"my-coupons"},[t._m(0)])]),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(1)]):t._e()])},et=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"NoCoupons"},[i("img",{attrs:{src:"http://pe1s.static.pdr365.com/Nocoupons.png"}}),i("p",[t._v("您还没有优惠券呢～")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],it={data:function(){return{loading:!0,Coupons:"",timelist:[]}},beforeRouteEnter:function(t,e,i){document.title="我的优惠券",i()},created:function(){this.GetCoupons()},methods:{go_use:function(){this.$router.push({name:"index",params:{}})},back:function(){router.go(-1)},GetCoupons:function(){var t=this,e=this,i=E.a.get("_lac_k_"),a="/general_api/api/auth/GetAccountCoupns?token="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(i){if("0"==i.code){e.loading=!1,e.Coupons=i.list;for(var a=[],s=0;s<i.list.length;s++){var n=i.list[s].validate_end,o=new Date(n),c=o.getFullYear(),r=o.getMonth()+1,l=o.getDate(),d=c+"-"+r+"-"+l;a.push(d)}e.timelist=a}else{e.loading=!1;var u=E.a.get("_lac_ap_"),_=E.a.get("_lac_k_");u?_||t.$router.push({name:"login",params:{apid:u}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}})}}},at=it,st=(i("4196"),Object(p["a"])(at,tt,et,!1,null,null,null)),nt=st.exports,ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"details-bg"}),i("div",{staticClass:"mine-top-box"},[i("div",{staticClass:"mine-top"},[i("div",{staticClass:"mine-top-img"},[i("img",{staticStyle:{border:".04rem solid #f2f2f2"},attrs:{src:""==t.account.head||null==t.account.head?"http://pe1s.static.pdr365.com/touxiang.png":t.account.head}})]),i("div",{staticClass:"mine-top-nm"},[i("p",[t._v(t._s(""==t.account.nickname||null==t.account.nickname?"默认昵称":t.account.nickname))])]),i("div",{staticClass:"mine-top-material",on:{click:t.godo_modified}},[t._v("资料")])]),i("div",{staticClass:"mine-top-menu"},[i("ul",{staticClass:"mine-top-menu-ul"},[i("li",{staticClass:"mine-top-menu-list",staticStyle:{width:"50%"},on:{click:t.godo_myCards}},[i("p",{staticClass:"mine-top-menu-list-num"},[t._v(t._s(t.balance))]),i("p",{staticClass:"mine-top-menu-list-nm"},[t._v("余额")])]),i("li",{staticClass:"mine-top-menu-list",staticStyle:{display:"none"},on:{click:t.godo_myIntegral}},[i("p",{staticClass:"mine-top-menu-list-num"},[t._v(t._s(t.Intergral))]),i("p",{staticClass:"mine-top-menu-list-nm"},[t._v("积分")])]),i("li",{staticClass:"mine-top-menu-list",staticStyle:{width:"50%"},on:{click:t.godo_coupons}},[i("p",{staticClass:"mine-top-menu-list-num"},[t._v(t._s(t.Coupons))]),i("p",{staticClass:"mine-top-menu-list-nm"},[t._v("优惠券")])])])])]),i("div",{staticClass:"mine-mid-menu"},[i("div",{staticClass:"mine-mid-menu-top"},[i("div",{staticClass:"mine-mid-menu-top-list",on:{click:t.godo_myCards}},[i("img",{staticStyle:{height:".4rem","margin-top":".25rem"},attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/card_icon.png"}}),i("p",[t._v("会员卡")]),t._m(0)]),i("div",{staticClass:"mine-mid-menu-top-list",on:{click:t.godo_myTicket}},[i("img",{staticStyle:{width:"0.37rem",height:"0.4rem","margin-top":".25rem"},attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/order_icon.png"}}),i("p",[t._v("订单中心")]),t._m(1)])])]),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(2)]):t._e(),"scan"!==t.tabShow?i("tabBottom",{attrs:{active:"mine"}}):t._e()],1)},ct=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bm-list-arrow"},[i("span",{staticClass:"bm-icon arrow vertical"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bm-list-arrow"},[i("span",{staticClass:"bm-icon arrow vertical"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],rt={data:function(){return{loading:!0,account:"",balance:0,Coupons:0,Intergral:0,tabShow:""}},beforeRouteEnter:function(t,e,i){document.title="个人中心",i()},created:function(){this.GetAccount()},mounted:function(){this.tabShow=this.$route.params.st},methods:{GetAccount:function(){var t=this,e=this,i=E.a.get("_lac_k_"),a="/general_api/api/auth/GetAccount?token="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(a){if(console.log(a),console.log("token="+i),a.available)e.account=a.data,t.GetAccountCard(),t.GetCoupons();else{var s=E.a.get("_lac_ap_");s?i||t.$router.push({name:"login",params:{apid:s}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}e.loading=!1})},GetAccountCard:function(){var t=this,e=E.a.get("_lac_k_"),i="/general_api/api/auth/GetAccountCard?token="+e+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){e.available&&e.obj[0].balance&&(t.balance=e.obj[0].balance/100,t.Intergral=e.obj[0].point),t.loading=!1})},GetCoupons:function(){var t=this,e=E.a.get("_lac_k_"),i="/general_api/api/auth/GetAccountCoupns?token="+e+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){console.log(e),"0"==e.code&&(t.loading=!1,null!=e.list&&(t.Coupons=e.list.length))})},back:function(){router.go(-1)},godo_coupons:function(){location.href="/general_api/tcss/index#/myCoupons"},godo_myTicket:function(){location.href="/general_api/tcss/index#/myTicket"},godo_myCards:function(){location.href="/general_api/tcss/index#/myCards"},godo_myIntegral:function(){this.$router.push({name:"myIntegral"})},godo_cinemas:function(){this.$router.push({name:"cinemaList",params:{mid:"2"}})},godo_goods:function(){location.href="/general_api/tcss/index#/storeList"},godo_index:function(){this.$router.push({name:"index"})},godo_modified:function(){this.$router.push({name:"modifiedData"})}},components:{tabBottom:M["a"]}},lt=rt,dt=(i("028e"),Object(p["a"])(lt,ot,ct,!1,null,null,null)),ut=dt.exports,_t=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"details-bg"}),i("div",{staticClass:"weui-tab"},[i("div",{staticClass:"weui-navbar"},t._l(t.tabList,function(e,a){return i("div",{key:a,staticClass:"weui-navbar__item",class:t.active===a?"weui-bar__item_on":"",on:{click:function(e){t.active=a}}},[t._v(t._s(e))])})),i("div",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active === 0"}],staticClass:"weui-tab__panel",staticStyle:{"padding-top":"50px","padding-bottom":"50px"}},[i("div",{staticClass:"my-ticket-box"},t._l(t.TicketList,function(e){return i("div",{staticClass:"cardWrap",on:{click:function(i){t.godo_code(e.order_no)}}},[i("div",{staticClass:"card cardtop"},[i("p",[t._v("腾讯好时光")]),"2000"==e.order_status?i("img",{staticClass:"cardtop-flag",attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/t_no_get.png"}}):i("img",{staticClass:"cardtop-flag",attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/t_done.png"}})]),i("div",{staticClass:"card cardbot"},[i("div",{staticClass:"cardbot-top"},[t._m(0,!0),i("div",{staticClass:"cardbot-mid"},[i("p",{staticClass:"cardbot-mid-title"},[t._v(t._s(e.film_name)),i("span",[t._v(t._s(e.seats.length)+"张")])]),i("p",{staticClass:"cardbot-mid-time"},[t._v("开场时间："+t._s(e.plan_date)+" "+t._s(e.plan_time))]),i("p",{staticClass:"cardbot-mid-time"},[t._v(t._s(e.hall_name)+" "),t._l(e.seats,function(e){return i("span",[t._v(" "+t._s(e.seat_sr)+"排"+t._s(e.seat_sc)+"座 ")])})],2)])])])])}))]),i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active === 1"}],staticClass:"weui-tab__panel",staticStyle:{"padding-top":"50px","padding-bottom":"50px"}},[i("div",{staticClass:"my-ticket-box"},t._l(t.OrderList,function(e,a){return"0000"!=e.oss?i("div",{staticClass:"cardWrap",on:{click:function(i){t.godo_goodscode(e.order_no,a)}}},[i("div",{staticClass:"card cardtop"},[i("p",[t._v("腾讯好时光")]),"1000"==e.oss?i("img",{staticClass:"cardtop-flag",attrs:{src:"http://pe1s.static.pdr365.com/dailingqu.png"}}):t._e(),"1010"==e.oss?i("img",{staticClass:"cardtop-flag",attrs:{src:"http://pe1s.static.pdr365.com/dailingqu.png"}}):t._e(),"1020"==e.oss?i("img",{staticClass:"cardtop-flag",attrs:{src:"http://pe1s.static.pdr365.com/dailingqu.png"}}):t._e(),"2000"==e.oss?i("img",{staticClass:"cardtop-flag",attrs:{src:"http://pe1s.static.pdr365.com/dailingqu.png"}}):t._e(),"3000"==e.oss?i("img",{staticClass:"cardtop-flag",attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/t_done.png"}}):t._e()]),i("div",{staticClass:"card cardbot"},t._l(e.items,function(e,s){return i("div",{staticClass:"cardbot-bot"},[i("div",{staticClass:"cardbot-img",attrs:{"data-img":e.pic_url}},[i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"http://pe1s.static.pdr365.com/"+e.pic_url}})]),i("div",{staticClass:"cardbot-mid"},[i("p",{staticClass:"cardbot-mid-title",staticStyle:{"margin-top":".4rem"}},[t._v(t._s(e.goods_name))]),i("p",{staticClass:"cardbot-mid-time",staticStyle:{"margin-top":".25rem"}},[t._v(t._s(e.remark))]),i("p",{staticClass:"cardbot-mid-time",staticStyle:{"margin-top":".25rem"}},[t._v("数量："+t._s(e.buy_num))]),i("p",{staticClass:"cardbot-mid-time",staticStyle:{"margin-top":".25rem"}},[t._v("下单时间："+t._s(t.timelist[a]))])])])}))]):t._e()}))])]),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(1)]):t._e()])},mt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cardbot-img"},[i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"http://pe1d.static.pdr365.com/FhodjILxWCZtSVkdtxJuEnhpCDk6"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],pt={data:function(){return{loading:!0,OrderList:"",tip_msg:"",account:"",TicketList:"",apid:"",timelist:[],active:0,tabList:["影票","商品"]}},beforeRouteEnter:function(t,e,i){document.title="我的订单",i()},created:function(){this.GetAccount()},methods:{GetCode:function(){var t=E.a.get("_lac_ated_");t||(location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime())},showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},GetAccount:function(){var t=this,e=this,i=E.a.get("_lac_k_"),a="/general_api/api/auth/GetAccount?token="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(i){i.available?(e.account=i.data,e.MyOrder(i.data.ap_id),e.apid=i.data.ap_id,e.MyTiketOrder(i.data.ap_id)):0==i.available&&"user_no_login"==i.messages[0]&&t.GetCode()})},MyOrder:function(t){var e=this,i=E.a.get("_lac_k_"),a="/general_api/api/OrderList?apid="+t+"&ds=&token="+i+"&oss=1&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(t){if(console.log(t),t){e.loading=!1,e.OrderList=t;for(var i=[],a=0;a<t.length;a++){var s=t[a].a_time,n=new Date(s),o=n.getFullYear(),c=n.getMonth()+1,r=n.getDate(),l=o+"-"+c+"-"+r;i.push(l)}console.log(i),e.timelist=i}else e.loading=!1}).catch(function(t){e.loading=!1,e.OrderList=null})},MyTiketOrder:function(t){var e=this,i=E.a.get("_lac_k_"),a="/general_api/api/GetTicketList?apid="+t+"&token="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(t){e.loading=!1,0==t.code&&(e.TicketList=t.data)}).catch(function(t){e.loading=!1})},godo_code:function(t){this.$router.push({name:"votingCode",params:{on:t}})},godo_goodscode:function(t,e){console.log("11"),this.$router.push({name:"GoodsCode",params:{on:t,index:e,apid:this.apid}})}}},vt=pt,ht=(i("60b6"),Object(p["a"])(vt,_t,mt,!1,null,null,null)),gt=ht.exports,ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"details-bg"}),i("div",{staticClass:"my-ticket-box"},[i("div",{staticClass:"my-cardWrap"},[i("div",{staticClass:"my-card my-cardtop my-module-1"},[i("img",{staticClass:"my-module-1-img",attrs:{src:"http://pe1s.static.pdr365.com/default_movie_pic.jpg"}}),i("div",{staticClass:"my-module-1-right"},[i("p",{staticClass:"my-module-1-r-nm"},[t._v(t._s(t.movieDetails.film_name))]),i("p",{staticClass:"my-module-1-r-cinema"},[i("span",[t._v("影城")]),t._v("\n\t\t\t\t\t\t"+t._s(t.movieDetails.store_name)+"\n\t\t\t\t\t")]),i("p",{staticClass:"my-module-1-r-time"},[i("span",[t._v("时间")]),t._v("\n\t\t\t\t\t\t"+t._s(t.movieDetails.plan_date)+" "+t._s(t.movieDetails.plan_time)+" \n\t\t\t\t\t")]),t._m(0),i("p",{staticClass:"my-module-1-r-seats-list"},[i("span",{staticClass:"my-module-1-r-seats-list-hall"},[t._v(t._s(t.movieDetails.hall_name))]),t._l(t.movieDetails.seats,function(e){return i("span",{staticClass:"my-module-1-r-seats-list-seat"},[t._v(t._s(e.seat_sr)+"排"+t._s(e.seat_sc)+"座")])})],2),i("p")])]),i("div",{staticClass:"my-card my-cardbot my-module-2"},[i("p",{staticClass:"my-module-2-num"},[t._v(t._s(t.ticket_num)+"张电影票")]),i("p",{staticClass:"my-module-2-hint"},[t._v("在取票机扫码或输入取票码取电影票")]),i("img",{staticClass:"my-module-2-codeimg",attrs:{src:"http://qr.liantu.com/api.php?text="+t.movieDetails.ticket.ticket_flag_1+t.movieDetails.ticket.ticket_flag_2}}),i("p",{staticClass:"my-module-2-code"},[t._v("\n\t\t    \t\t\t序列号：\n\t\t    \t\t\t"),i("span",[t._v(t._s(t.movieDetails.ticket.ticket_flag_1))]),t._v("\n\t\t    \t\t\t验证码：\n\t\t    \t\t\t"),i("span",[t._v(t._s(t.movieDetails.ticket.ticket_flag_2))])])]),i("div",{staticClass:"my-card my-cardbot3 my-module-3"},[i("p",{staticClass:"my-module-3-nm"},[t._v(t._s(t.movieDetails.store_name))])]),i("div",{staticClass:"my-card my-cardbot4 my-module-4"},[i("p",{staticClass:"my-module-4-nm"},[t._v("实付金额"),i("span",[t._v(t._s(t.movieDetails.pay_amount/100)+"元")])]),i("p",{staticClass:"my-module-4-info"},[t._v("订单号"),i("span",[t._v(t._s(t.movieDetails.order_no))])])]),t._m(1)])])])},Ct=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"my-module-1-r-seats"},[i("span",[t._v("座位号")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-card my-cardbot5 my-module-5"},[i("p",{staticClass:"my-module-5-title"},[t._v("观影须知")]),i("p",{staticClass:"my-module-5-clause"},[t._v("1、请提前到达影院现场，找到自助取票机，打印纸质电影票，完成取票。")]),i("p",{staticClass:"my-module-5-clause"},[t._v("2、如现场自助取票机无法打印电影票，请联系影院工作人员处理。")]),i("p",{staticClass:"my-module-5-clause"},[t._v("3、凭打印好的纸质电影票，检票入场观影。")])])}],wt={data:function(){return{loading:!0,on:"",movieDetails:"",ticket_num:""}},beforeRouteEnter:function(t,e,i){document.title="订单详情页",i()},created:function(){this.on=this.$route.params.on,this.GetOrderDetails()},methods:{back:function(){router.go(-1)},GetOrderDetails:function(){var t=this,e="/general_api/api/GetTicketOrderDetails?order_no="+t.on+"&ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){0==e.code&&(t.movieDetails=e.data,t.ticket_num=e.data.seats.length,t.loading=!1)})}}},bt=wt,yt=(i("7b65"),Object(p["a"])(bt,ft,Ct,!1,null,null,null)),kt=yt.exports,xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{overflow:"hidden",width:"100%",height:"100%"}},[i("div",{staticClass:"details-bg",staticStyle:{background:"#fff"}}),t._l(t.CardData,function(e,a){return null!=t.CardData?i("div",{staticClass:"ed-myCards-box"},[0==a?i("div",[i("div",{staticClass:"ed-myCards",staticStyle:{background:"#efeff4"},on:{click:t.godo_cardDetails}},[i("div",{staticClass:"ed-myCards-top-box"},[i("div",{staticClass:"ed-myCards-top"},[i("div",{staticClass:"ed-myCards-top-logo"},[i("img",{attrs:{src:"http://pe1s.static.pdr365.com/timg.jpeg"}}),i("p",[t._v(t._s(e.rule.title))])]),i("p",{staticClass:"ed-myCards-top-num"},[t._v(t._s(e.mc_num))]),i("div",{staticClass:"ed-myCards-top-hint"},[t._m(0,!0),i("img",{staticClass:"ed-myCards-top-hint-code",attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/qrcode_icon.png"},on:{click:function(i){i.stopPropagation(),t.godo_cardCode(e.card_code)}}})])])])]),i("div",{staticClass:"ed-myCards-bot-box"},[i("div",{staticClass:"ed-myCards-bot"},[i("p",{staticClass:"ed-myCards-bot-balance"},[t._v("余额")]),i("p",{staticClass:"ed-myCards-bot-balance-num"},[t._v(t._s(e.balance/100)+"元")]),i("div",{staticClass:"ed-myCards-integral-box"},[i("p",{staticClass:"ed-myCards-bot-integral-grade"},[t._v("会员等级"),i("span",[t._v(t._s(e.levelname))])]),i("p",{staticClass:"ed-myCards-bot-integral",staticStyle:{display:"none"}},[t._v("积分"),i("span",[t._v(t._s(e.point))])])]),i("div",{staticClass:"ed-myCards-but"},[i("div",{staticClass:"ed-myCards-recharge",on:{click:function(i){t.godo_recharge(e.mc_num)}}},[t._v("充值")])])])])]):t._e()]):t._e()}),null==t.CardData?i("div",{staticClass:"myCards"},[i("div",[t._m(1),i("div",{staticClass:"myCards-bot"},[i("div",{staticClass:"myCards-bot-go",on:{click:t.godo_paycard}},[t._v("立即开通")])])])]):t._e(),t.forbid?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd",staticStyle:{"font-size":".36rem",padding:".6rem 20px .28rem","min-height":"24px"}},[t._v("充值会员")]),t._m(2),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:function(e){t.forbid=!1}}},[t._v("取消")]),i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"}},[t._v("确认")])])])]):t._e(),t.img_tip?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog1"}},[i("div",{staticClass:"weui-mask",on:{click:function(e){t.img_tip=!1}}}),i("div",{staticClass:"weui-dialog",staticStyle:{"border-radius":"0.2rem"}},[i("div",{staticClass:"code-bot"},[i("div",{staticClass:"code-img-box"},[i("img",{staticClass:"weui-img",staticStyle:{"margin-top":".5rem",width:"70%",display:"inline-block"},attrs:{src:"http://qr.liantu.com/api.php?text="+t.Codesrc,alt:""}})]),i("p",{staticClass:"code-p"},[t._v("扫描二维码进行会员卡支付")]),i("div",{staticClass:"code-true",on:{click:function(e){t.img_tip=!1}}},[t._v("确定")])])])]):t._e(),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(3)]):t._e()],2)},St=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("img",{staticClass:"ed-myCards-top-hint-img",attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/info_icon.png"}}),i("p",[t._v("不可退换")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"myCards-top-box"},[i("div",{staticClass:"myCards-top"},[i("p",{staticClass:"myCards-top-hint-top"},[t._v("还未开通会员卡")]),i("p",{staticClass:"myCards-top-hint"},[t._v("开通后购票可享受优惠价")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"input-box"},[i("input",{staticClass:"moeny-input",attrs:{type:"number",name:"aa",id:"a",placeholder:"请输入充值金额",value:"请输入充值金额"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("正在加载")])])}],Dt={data:function(){return{loading:!0,synopsis:"synopsis-none",showBtn:"showBtn",forbid:!1,img_tip:!1,CardData:"",Codesrc:""}},beforeRouteEnter:function(t,e,i){document.title="会员卡",i()},created:function(){this.GetAccountCard()},methods:{godo_cardCode:function(t){var e=this;e.Codesrc=t,e.img_tip=!0},GetAccountCard:function(){var t=this,e=this,i=E.a.get("_lac_k_"),a="/general_api/api/auth/GetAccountCard?token="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(i){if(console.log(i),!i.available){var a=E.a.get("_lac_ap_"),s=E.a.get("_lac_k_");a?s||t.$router.push({name:"login",params:{apid:a}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}e.CardData=i.obj,e.loading=!1})},back:function(){router.go(-1)},godo_paycard:function(){location.href="/general_api/tcss/index/?#/purchasingCard/purchasing"},godo_bindcard:function(){this.$router.push({name:"bindCard"})},godo_cardDetails:function(){this.$router.push({name:"cardDetails"})},godo_recharge:function(t){document.cookie="CardNum="+t,location.href="/general_api/tcss/index/?#/purchasingCard/recharge"}}},Tt=Dt,Et=(i("db08"),Object(p["a"])(Tt,xt,St,!1,null,null,null)),jt=Et.exports,Ot=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",["purchasing"==t.CardNm||"Scanpurchasing"==t.CardNm?i("div",[t._m(0),i("div",{staticClass:"purchasingcard-mid"},[i("ul",{staticClass:"purchasingcard-mid-ul"},t._l(t.RechargeData,function(e,a){return-1!=t.RechargeData?i("li",{class:t.HId==e.id?"purchasingcard-mid-li-true":"purchasingcard-mid-li",on:{click:function(i){t.godo_choose(e.id,a)}}},[i("p",{class:t.HId==e.id?"purchasingcard-mid-li-grade-true":"purchasingcard-mid-li-grade",staticStyle:{height:".35rem","line-height":".35rem"}},[t._v(t._s(e.h_name))]),i("p",{class:t.HId==e.id?"purchasingcard-mid-li-introduce-true":"purchasingcard-mid-li-introduce"},[t._v(t._s(e.cr_type_desc))]),i("p",{class:t.HId==e.id?"purchasingcard-mid-li-price-true":"purchasingcard-mid-li-price",staticStyle:{"margin-top":".1rem"}},[t._v("¥"+t._s(e.getpay/100))]),t.HId==e.id?i("img",{staticClass:"purchasingcard-mid-li-true-img",attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/dot_icon.png"}}):t._e()]):t._e()}))]),i("div",{staticClass:"PurchasingCard-box"},[i("div",{staticClass:"PurchasingCard",on:{click:t.SshowNum}},[i("span",{staticClass:"PurchasingTitle"},[t._v("设置支付密码")]),i("span",{staticClass:"PurchasingHint"},[t._v("密码用于消费操作时，验证您的身份")]),""!=t.pwd?i("span",{staticClass:"shezhi"},[t._v("已设置")]):t._e(),i("div",{staticClass:"vertical2"})])]),t._m(1),i("div",{staticClass:"purchase-box"},[i("div",{staticClass:"purchase",on:{click:t.godo_purchasing}},[t._v("立即开通")])]),t.one?i("div",{staticClass:"purchasing-num-box",staticStyle:{"text-align":"center"}},[i("div",{staticClass:"purchasing-num-bgc",on:{click:function(e){t.one=!1}}}),i("div",{staticClass:"purchasing-num"},[i("div",{staticClass:"purchasing-num-top"},[i("img",{staticStyle:{float:"left",display:"inline-block",width:".4rem","margin-left":".2rem","margin-top":".15rem"},attrs:{src:"http://pe1s.static.pdr365.com/chahao.png"},on:{click:function(e){t.one=!1}}}),i("p",[t._v("设置会员卡支付密码")])]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.Ticket_one,expression:"Ticket_one"}],staticClass:"purchasing-num-input",attrs:{type:"num",placeholder:"请输入6位数字密码",readonly:"readonly",maxlength:"6",clearable:""},domProps:{value:t.Ticket_one},on:{input:function(e){e.target.composing||(t.Ticket_one=e.target.value)}}}),i("p",{staticClass:"purchasing-num-p"},[t._v("支付密码用于支付操作时，验证您的身份")]),i("div",{staticClass:"keyboard",staticStyle:{background:"#fff"},on:{click:function(e){return e.stopPropagation(),t.TicketKeyPress(e)}}},[t._m(2),t._m(3),t._m(4),t._m(5)])])]):t._e(),t.two?i("div",{staticClass:"purchasing-num-box",staticStyle:{"text-align":"center"}},[i("div",{staticClass:"purchasing-num-bgc",on:{click:function(e){t.two=!1}}}),i("div",{staticClass:"purchasing-num"},[i("div",{staticClass:"purchasing-num-top"},[i("img",{staticStyle:{float:"left",display:"inline-block",width:".4rem","margin-left":".2rem","margin-top":".15rem"},attrs:{src:"http://pe1s.static.pdr365.com/chahao.png"},on:{click:function(e){t.two=!1}}}),i("p",[t._v("确认会员卡支付密码")])]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.Ticket_two,expression:"Ticket_two"}],staticClass:"purchasing-num-input",attrs:{type:"num",placeholder:"请输入6位数字密码",readonly:"readonly",maxlength:"6",clearable:""},domProps:{value:t.Ticket_two},on:{input:function(e){e.target.composing||(t.Ticket_two=e.target.value)}}}),i("p",{staticClass:"purchasing-num-p"},[t._v("请在此输入您的支付密码")]),i("div",{staticClass:"keyboard",staticStyle:{background:"#fff"},on:{click:function(e){return e.stopPropagation(),t.TicketTwo(e)}}},[t._m(6),t._m(7),t._m(8),t._m(9)])])]):t._e()]):t._e(),"recharge"==t.CardNm?i("div",[t._m(10),i("div",{staticClass:"purchasingcard-mid"},[i("ul",{staticClass:"purchasingcard-mid-ul"},t._l(t.RechargeData,function(e,a){return-1!=t.RechargeData?i("li",{class:t.HId==e.id?"purchasingcard-mid-li-true":"purchasingcard-mid-li",attrs:{"data-index":a},on:{click:function(i){t.godo_choose(e.id,a)}}},[i("p",{class:t.HId==e.id?"purchasingcard-mid-li-price-true":"purchasingcard-mid-li-price",attrs:{"data-index":a}},[t._v("¥"+t._s(e.getpay/100))]),i("p",{class:t.HId==e.id?"purchasingcard-mid-li-introduce-true":"purchasingcard-mid-li-introduce",attrs:{"data-index":a}},[t._v(t._s(e.cr_type_desc))]),t.HId==e.id?i("img",{staticClass:"purchasingcard-mid-li-true-img",attrs:{"data-index":a,src:"http://pe1s.static.pdr365.com/tencent/icon/dot_icon.png"}}):t._e()]):t._e()}))]),t._m(11),i("div",{staticClass:"purchase-box"},[i("div",{staticClass:"purchase",on:{click:t.godo_recharge}},[t._v("立即充值")])])]):t._e(),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(12)]):t._e()])},It=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"purchasingcard-top"},[i("p",{staticClass:"purchasingcard-top-title"},[t._v("选择等级")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"purchasingcard-bot"},[i("div",{staticClass:"purchasingcard-bot-title"},[t._v("\n\t\t\t\t\t支付方式\n\t\t\t\t")]),i("div",{staticClass:"purchasingcard-bot-pay"},[i("div",[i("img",{attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/wechat_pay_icon.png"}}),i("p",[t._v("微信支付")])]),i("i",{staticClass:"weui-icon-success weui-icon_msg",staticStyle:{"font-size":".4rem","margin-right":".3rem"}})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"1"}},[t._v("1")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"2"}},[t._v("2")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"3"}},[t._v("3")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"4"}},[t._v("4")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"5"}},[t._v("5")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"6"}},[t._v("6")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"7"}},[t._v("7")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"8"}},[t._v("8")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"9"}},[t._v("9")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"D"}},[t._v("删除")]),i("div",{staticClass:"numInput key-cell",attrs:{"data-num":"0"}},[t._v("0")]),i("div",{staticClass:"numInput key-confirm",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"S"}},[t._v("确认")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"1"}},[t._v("1")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"2"}},[t._v("2")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"3"}},[t._v("3")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"4"}},[t._v("4")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"5"}},[t._v("5")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"6"}},[t._v("6")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"7"}},[t._v("7")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"8"}},[t._v("8")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"9"}},[t._v("9")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"D"}},[t._v("删除")]),i("div",{staticClass:"numInput key-cell",attrs:{"data-num":"0"}},[t._v("0")]),i("div",{staticClass:"numInput key-confirm",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"S"}},[t._v("确认")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"purchasingcard-top"},[i("p",{staticClass:"purchasingcard-top-title"},[t._v("选择充值金额")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"purchasingcard-bot"},[i("div",{staticClass:"purchasingcard-bot-title"},[t._v("\n\t\t\t\t\t支付方式\n\t\t\t\t")]),i("div",{staticClass:"purchasingcard-bot-pay"},[i("div",[i("img",{attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/wechat_pay_icon.png"}}),i("p",[t._v("微信支付")])]),i("i",{staticClass:"weui-icon-success weui-icon_msg",staticStyle:{"font-size":".4rem","margin-right":".3rem"}})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],$t={data:function(){return{loading:!0,tip_msg:"",synopsis:"synopsis-none",showBtn:"showBtn",RechargeData:"",id:"",HId:"",Num:"",Ticket_one:"",Ticket_two:"",pwd:"",S:"",one:!1,two:!1,other:"",CardNm:"",CardNum:""}},beforeRouteEnter:function(t,e,i){document.title="腾讯好时光",i()},created:function(){this.Num=E.a.get("CardNum"),this.CardNm=this.$route.params.CardNm,this.GradeList()},methods:{SshowNum:function(){this.one=!0},showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},GradeList:function(){var t=this,e=this,i="/general_api/api/CardGradeList?ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(i){i.available?(e.RechargeData=i.obj,e.HId=i.obj[0].id,e.id=i.obj[0].id):t.showTip("暂不支持会员卡申领，欢迎您到门店办理~",2e3),e.loading=!1})},godo_choose:function(t,e){for(var i=this,a=i.RechargeData,s=0;s<a.length;s++)s==e&&(i.HId=a[e].id);i.id=t},godo_purchasing:function(){var t=this,e=t.pwd,i=t.HId;if(""!=e){t.loading=!0;var a=E.a.get("_lac_k_"),s="/general_api/api/auth/createCardRechargeOrder?token="+a+"&mc_pwd="+e+"&h_id="+i+"&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(e){if(console.log(e),e.available){t.loading=!1;var i=E.a.get("_lac_k_"),a="/general_api/api/auth/GetWxObj?ct=201101&tnum="+e.obj.data.tnum+"&token="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){-1==e.code?t.showTip(e.text):0==e.code?(t.other=e.other,"001001"==e.paycode?t.$router.push({name:"kaikaSuccess"}):t.onBridgeReady()):0==e.available&&"user_no_login"==e.messages[0]&&t.showTip("用户未登录")})}else 0==e.available&&"user_no_login"==e.messages[0]?(t.loading=!1,t.showTip("用户未登录")):(t.loading=!1,t.showTip(e.messages[0]))})}else this.showTip("请设置6位数的密码~",1e3)},onBridgeReady:function(){var t=this,e=t.other;t.loading=!1;var i=t.CardNm;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:"MD5",paySign:e.paySign},function(e){"get_brand_wcpay_request:ok"==e.err_msg?"Scanpurchasing"==i?t.$router.push({name:"kaikaSuccess"}):t.$router.go(-1):"get_brand_wcpay_request:cancel"==e.err_msg?alert("您取消了付款"):"get_brand_wcpay_request:fail"==e.err_msg&&alert("支付失败")})},TicketKeyPress:function(t){var e=t.target.dataset.num;if(-1==e)return!1;switch(String(e)){case".":this.TicketDecimalPoint();break;case"D":this.TicketDeleteKey();break;case"C":this.TicketClearKey();break;case"S":this.TicketConfirmKey();break;default:this.TicketNumberKey(e);break}},TicketDecimalPoint:function(){if(this.Ticket_one.indexOf(".")>-1)return!1;this.Ticket_one.length?this.Ticket_one=this.Ticket_one+".":this.Ticket_one="0."},TicketDeleteKey:function(){var t=this.Ticket_one;if(!t.length)return!1;this.Ticket_one=t.substring(0,t.length-1)},TicketClearKey:function(){this.Ticket_one=""},TicketConfirmKey:function(){var t=this.Ticket_one;if(!t.length)return this.showTip("您目前未输入~",1e3),!1;6==t.length?(this.pwd=t,this.one=!1,this.two=!0):this.showTip("请设置6位数的密码~",1e3)},TicketNumberKey:function(t){var e=this.Ticket_one;if(e.length<6){if(e.indexOf(".")>-1&&e.substring(e.indexOf(".")+1).length<2&&(this.Ticket_one=e+t),!(e.indexOf(".")>-1))if(0==t&&0==e.length)this.Ticket_one="0.";else{if(e.length&&0===Number(e.charAt(0)))return;this.Ticket_one=e+t}}else this.showTip("最多只能设置6位数的密码~",1e3)},TicketTwo:function(t){var e=t.target.dataset.num;if(-1==e)return!1;switch(String(e)){case".":this.aTicketDecimalPoint();break;case"D":this.aTicketDeleteKey();break;case"C":this.aTicketClearKey();break;case"S":this.aTicketConfirmKey();break;default:this.aTicketNumberKey(e);break}},aTicketDecimalPoint:function(){if(this.Ticket_two.indexOf(".")>-1)return!1;this.Ticket_two.length?this.Ticket_two=this.Ticket_two+".":this.Ticket_two="0."},aTicketDeleteKey:function(){var t=this.Ticket_two;if(!t.length)return!1;this.Ticket_two=t.substring(0,t.length-1)},aTicketClearKey:function(){this.Ticket_two=""},aTicketConfirmKey:function(){var t=this.Ticket_two;if(!t.length)return this.showTip("您目前未输入~",1e3),!1;if(6==t.length){if(this.pwd!=t)return void this.showTip("两次输入的密码不一致~",1e3);this.pwd=t,this.two=!1,this.one=!1}else this.showTip("请设置6位数的密码~",1e3)},aTicketNumberKey:function(t){var e=this.Ticket_two;if(e.length<6){if(e.indexOf(".")>-1&&e.substring(e.indexOf(".")+1).length<2&&(this.Ticket_two=e+t),!(e.indexOf(".")>-1))if(0==t&&0==e.length)this.Ticket_two="0.";else{if(e.length&&0===Number(e.charAt(0)))return;this.Ticket_two=e+t}}else this.showTip("最多只能设置6位数的密码~",1e3)},godo_recharge:function(){var t=this,e=t.Num,i=t.id;t.loading=!0;var a="/general_api/api/RechargeCard?mc_num="+e+"&h_id="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){if(e.available){t.loading=!1;var i=E.a.get("_lac_k_"),a="/general_api/api/auth/GetWxObj?ct=201101&tnum="+e.obj.data.tnum+"&token="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){console.log(e),-1==e.code?t.showTip(e.text):0==e.code?(t.other=e.other,t.onBridgeReady()):0==e.available&&"user_no_login"==e.messages[0]&&t.showTip("用户未登录")})}else t.loading=!1,t.showTip(e.messages[0])})}}},Lt=$t,Pt=(i("fe4c"),Object(p["a"])(Lt,Ot,It,!1,null,"f7e1d092",null)),Rt=Pt.exports,Gt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Mt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"details-bg"}),i("div",{staticClass:"bindCard-box"},[i("form",[i("div",{staticClass:"bindCard-top"},[i("label",{staticClass:"kahao"},[t._v("门店/影城")]),i("select",{staticClass:"kahao_d",staticStyle:{width:"60%"},attrs:{id:"select"}},[i("option",{attrs:{value:"34"}},[t._v("ayingcheng")])])]),i("div",{staticClass:"bindCard-bot"},[i("label",{staticClass:"kahao"},[t._v("卡号")]),i("input",{staticClass:"bindCard-bot-input",attrs:{id:"Kpassword",type:"text",name:"Kpassword",placeholder:"请填写会员卡号"}})]),i("div",{staticClass:"bindCard-bot"},[i("label",{staticClass:"kahao"},[t._v("密码")]),i("input",{staticClass:"bindCard-bot-input",attrs:{id:"Kpassword",type:"text",name:"Kpassword",placeholder:"请填写正确的密码"}})])])]),i("div",{staticClass:"bindCard-bind"},[i("div",[i("p",{staticClass:"bind-bd"},[t._v("绑定")])]),i("p",{staticClass:"bind-hint"},[t._v("注：测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试测试")])])])}],Bt={data:function(){return{loading:!0,synopsis:"synopsis-none",showBtn:"showBtn"}},beforeRouteEnter:function(t,e,i){document.title="绑定会员卡",i()},created:function(){},methods:{back:function(){router.go(-1)},godo_paycard:function(){location.href="/general_api/tcss/index#/purchasingCard/purchasing"}}},Nt=Bt,At=(i("96a6"),Object(p["a"])(Nt,Gt,Mt,!1,null,null,null)),Wt=At.exports,Ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"ed-myCards"},[i("div",{staticClass:"ed-myCards-top-box"},[i("div",{staticClass:"ed-myCards-top"},[i("div",{staticClass:"ed-myCards-top-logo"},[i("img",{attrs:{src:"http://pe1s.static.pdr365.com/timg.jpeg"}}),i("p",[t._v(t._s(t.CardDetails.mcname))])]),i("p",{staticClass:"ed-myCards-top-num"},[t._v(t._s(t.CardDetails.mc_num))])])])]),i("div",{staticClass:"cardInfo-box"},[i("div",{staticClass:"cardInfo",staticStyle:{"text-align":"left","word-break":"break-all"}},[t._v("\n\t\t\t"+t._s(t.CardDetails.content)+"\n\t\t\t"),i("p",{staticClass:"cardInfo-title"},[t._v("有效日期")]),i("p",{staticClass:"cardInfo-info"},[t._v("*"+t._s(t.CardDetails.validate_period))])])]),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e()])},zt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("正在加载")])])}],Kt={data:function(){return{loading:!0,CardDetails:""}},beforeRouteEnter:function(t,e,i){document.title="会员卡详情",i()},created:function(){this.GetAccountCard()},methods:{back:function(){router.go(-1)},GetAccountCard:function(){var t=this,e=this,i=E.a.get("_lac_k_"),a="/general_api/api/auth/GetAccountCard?token="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(i){if(i.available)e.CardDetails=i.obj[0],e.loading=!1;else{var a=E.a.get("_lac_ap_");a?t.$router.push({name:"login",params:{apid:a}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}})}}},qt=Kt,Ft=(i("456dc"),Object(p["a"])(qt,Ut,zt,!1,null,null,null)),Ht=Ft.exports,Jt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Vt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"details-bg"}),i("div",{staticClass:"my-coupons"},[i("div",{staticClass:"NoCoupons"},[i("img",{attrs:{src:"http://pe1s.static.pdr365.com/Nointegrl.png"}}),i("p",[t._v("您还没有积分呢～")])])])])}],Yt={data:function(){return{loading:!0}},beforeRouteEnter:function(t,e,i){document.title="我的积分",i()},created:function(){},methods:{back:function(){router.go(-1)},godo_integral:function(){this.$router.push({name:"integrationRule"})}}},Xt=Yt,Zt=(i("7054"),Object(p["a"])(Xt,Jt,Vt,!1,null,null,null)),Qt=Zt.exports,te=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ee=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("p",{staticClass:"integrationRule-title"},[t._v("积分规则详细介绍")])])}],ie={data:function(){return{loading:!0}},beforeRouteEnter:function(t,e,i){document.title="积分规则",i()},created:function(){},methods:{back:function(){router.go(-1)}}},ae=ie,se=(i("8ce5"),Object(p["a"])(ae,te,ee,!1,null,null,null)),ne=se.exports,oe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"details-bg"}),i("div",{staticClass:"cityList-top"},[i("p",[t._v("当前城市："),i("span",[t._v(t._s(t.city_name))])])]),i("div",{staticClass:"cityList-bot"},[i("ul",t._l(t.city,function(e){return i("li",{attrs:{"data-no":e.city_no},on:{click:function(i){t.go_index(e.city_name,e.city_no)}}},[t._v("\n\t\t\t\t"+t._s(e.city_name)+"\n\t\t\t\t")])}))]),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e()])},ce=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],re={data:function(){return{loading:!0,city:"",city_name:""}},beforeRouteEnter:function(t,e,i){document.title="切换城市",i()},created:function(){this.city_nm=E.a.get("goodsOrderNo"),this.cityList()},methods:{back:function(){router.go(-1)},cityList:function(){var t=this;console.log("11");var e="/general_api/api/cityList?ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){"0"==e.code&&(t.city=e.data,t.loading=!1)});var i=E.a.get("city_name");this.city_name=i},go_index:function(t,e){E.a.set("city_no",e),E.a.set("city_name",t),this.$router.push({name:"cinemaList",params:{mid:"2"}})},decodeUnicodeNm:function(t){t=t.replace(/\\/g,"%");var e=unescape(t);this.city_name=void 0==e?"":e},encodeUnicodeCityNM:function(t){for(var e=[],i=0;i<t.length;i++)e[i]=("00"+t.charCodeAt(i).toString(16)).slice(-4);E.a.set("city_name",e.join("\\u"))}}},le=re,de=(i("df27"),Object(p["a"])(le,oe,ce,!1,null,null,null)),ue=de.exports,_e=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{background:"#EFEEF4"}},[i("div",{staticClass:"cinema-header-wrapper"},[i("div",{staticClass:"cinema-header-info"},[i("p",{staticClass:"cinema-name"},[i("span",[t._v(t._s(t.storeName))])]),i("p",{staticClass:"cinema-header-address"},[t._v(t._s(t.storeAdd))])]),i("div",{staticClass:"map-icon",staticStyle:{"text-align":"center"},on:{click:t.goMap}},[i("img",{staticStyle:{width:".4rem",display:"inline-block"},attrs:{src:"http://pe1s.static.pdr365.com/location_icon.png"}}),i("p",{staticStyle:{color:"#a9a9a9"}},[t._v("地图")])])]),i("div",{staticClass:"swiper-bg"},[i("swiper",{ref:"mySwiper",staticClass:"swiper",staticStyle:{"margin-top":".25rem"},attrs:{options:t.swiperOption}},t._l(t.movie_list,function(t,e){return i("swiper-slide",{key:e,attrs:{"data-index":e}},[i("input",{attrs:{type:"hidden"},domProps:{value:t.id}}),i("img",{staticStyle:{display:"block",width:"100%",height:"100%","border-radius":".1rem"},attrs:{src:""==t.img||null==t.img?"http://pe1s.static.pdr365.com/default_movie_pic.jpg":t.img}})])})),i("div",{staticClass:"choose-movie-name-wrapper"},[i("p",{staticClass:"choose-movie-name"},[i("span",[t._v(t._s(t.properties.film_name))]),t.current_movie.film_score?i("span",{staticClass:"current-movie-score"},[t._v(t._s(t.properties.film_score))]):t._e()])]),i("div",{staticClass:"actor-list-wrapper"},[i("p",[i("span",[t._v(t._s(t.properties.time_diff)+"分钟")]),t._v(" | "),i("span",[t._v(t._s(t.properties.film_type))]),t._v(" | "),i("span",t._l(t.actorList,function(e,a){return a<3?i("span",[t._v(" "+t._s(e.cele_name)+" ")]):t._e()}))])])],1),i("div",{staticClass:"wrapper"},[i("ul",{staticClass:"scroller"},t._l(t.date_list,function(e,a){return i("li",{key:a,class:t.date_index===a?"choose-current-date":"",on:{click:function(e){t.clickDate(a)}}},[t._v(t._s(e.date))])}))]),i("div",{staticClass:"choose-movie-plan-wrapper",staticStyle:{"padding-bottom":"50px"}},[i("ul",t._l(t.current_plan_list,function(e){return i("li",{key:e.planId,attrs:{"data-planid":e.planId,"data-hallId":e.hallId}},[i("div",{staticClass:"choose-item-wrapper"},[i("div",{staticClass:"choose-time-logo"},[1===e.time_flag?i("img",{attrs:{src:"http://pe1s.static.pdr365.com/sun.png"}}):t._e(),2===e.time_flag?i("img",{attrs:{src:"http://pe1s.static.pdr365.com/moon.png"}}):t._e()]),i("div",{staticClass:"choose-time"},[i("p",[t._v(t._s(e.startClock))]),i("p",{staticStyle:{"font-size":".2rem"}},[t._v(t._s(e.endClock)+" 散场")])]),i("div",{staticClass:"choose-hall"},[i("p",[t._v(t._s(e.language))]),i("p",[t._v(t._s(e.hall))])]),i("div",{staticClass:"choose-price"},[i("p",[t._v("¥"+t._s(e.current_price/100))]),i("p",[i("s",[t._v("¥"+t._s(e.standard_price/100))])])])]),i("div",{staticClass:"choose-btn-wrapper",on:{click:function(i){t.godo_seats(e.planId,e.lastUpdateTime,e.hallId,e.planDate)}}},[i("div",{staticClass:"choose-btn"},[t._v("购票")])])])}))]),i("tabBottom",{attrs:{active:"cinema"}}),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e()],1)},me=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],pe=i("6f51"),ve=pe["a"],he=(i("a000"),Object(p["a"])(ve,_e,me,!1,null,null,null)),ge=he.exports,fe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{overflow:"hidden"}},[i("div",{staticClass:"dy-info"},[t.move_data.movieInfo?i("div",{staticClass:"dy-info-name"},[t._v(t._s(t.move_data.movieInfo[0].movieName))]):t._e(),t.move_data.movieInfo?i("div",{staticClass:"dy-info-time"},[t._v(t._s(t.move_data.startTime)+" "+t._s(t.move_data.movieInfo[0].movieLanguage)+t._s(t.move_data.movieInfo[0].movieDimensional))]):t._e()]),i("section",{staticClass:"hidden",staticStyle:{display:"block"},attrs:{id:"seats"}},[i("div",{class:t.standard,attrs:{"data-user":""}},[i("div",{staticClass:"screen-center-name"},[i("div",{staticClass:"tixing"}),i("p",[t._v(t._s(t.move_data.hallName))])]),i("div",{attrs:{id:"wrapper"}},[i("div",{attrs:{id:"scroller"}},[i("div",{staticClass:"item"},[t._m(0),t._l(t.seat_data.rows,function(e,a){return i("p",{attrs:{id:"seat_scroll"}},[t._l(e.seats,function(e,a){return[0==e.seatState||1==e.seatState||2==e.seatState||6==e.seatState||8==e.seatState?i("a",{staticClass:"seat disabled",attrs:{href:"javascript:"}}):4==e.seatState?i("a",{staticClass:"seat active",attrs:{href:"javascript:",name:e.seatRow+"-"+e.seatCol},on:{click:function(i){t.seatnum(e.cineSeatId,e.seatRow,e.seatCol,e.graphCol)}}}):i("span",{staticClass:"seat"})]})],2)})],2)]),i("div",{staticClass:"side"},[i("ol",{attrs:{id:"float-row"}},[i("li",{staticClass:"cs"}),t._l(t.seat_data.rows,function(e,a){return i("li",[t._v("\n                                "+t._s(e.row)+"\n                            ")])}),i("li",{staticClass:"cs"})],2)])]),t._m(1)])]),i("div",{staticClass:"side-box"},t._l(t.select_seat,function(e){return i("div",{staticClass:"side-box-list"},[t._v(t._s(e.row)+"排"+t._s(e.col)+"座")])})),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),i("div",{staticClass:"dy-card-item"},[i("div",{staticClass:"dy-btn"},[t.select_seat.length?i("button",{staticClass:"dy-button",attrs:{id:"J_confirm",type:"submit"},on:{click:t.makeorder}},[t._v("确认选座")]):t._e(),t.select_seat.length?t._e():i("button",{staticClass:"dy-button",staticStyle:{border:"1px solid #9ad499",background:"#9de59c"},attrs:{id:"J_confirm",type:"submit"}},[t._v("请先选座")])])]),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(2)]):t._e(),t.hint?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v(t._s(t.loginhint))])])]):t._e(),t.city_tip?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog1"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v("当前场次您有"+t._s(t.order_obj.buy_num)+"个座位的未支付订单")]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:t.gopay}},[t._v("立即支付")]),i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:t.nopay}},[t._v("我要重选")])])])]):t._e()])},Ce=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"c-tips"},[i("span",[t._v("银幕中央")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tips cf"},[i("ul",{staticClass:"seat-intro",staticStyle:{width:"100%"}},[i("li",[i("a",{staticClass:"seat active",attrs:{href:"javascript:;"}}),t._v("可选")]),i("li",[i("a",{staticClass:"seat disabled",attrs:{href:"javascript:;"}}),t._v("已售")]),i("li",[i("a",{staticClass:"seat selected",attrs:{href:"javascript:;"}}),t._v("已选")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("正在加载")])])}],we=(i("28a5"),i("a322")),be={data:function(){var t;return t={loading:!0,tip_msg:!1,city_tip:!1,hint:!1,max:4,show_body:"none",standard:"main main-small main-big",seat_data:{},select_seat_meta:{},select_seat:"",order_obj:{},move_data:{},apid:"",codesrc:""},Object(we["a"])(t,"hint",""),Object(we["a"])(t,"apid",""),Object(we["a"])(t,"loginhint",""),Object(we["a"])(t,"identifying_code","发送验证码"),Object(we["a"])(t,"num",""),Object(we["a"])(t,"rowsLength",""),Object(we["a"])(t,"positionLeft","0"),Object(we["a"])(t,"zoom",""),Object(we["a"])(t,"loadScroll",null),Object(we["a"])(t,"tip_msg",""),Object(we["a"])(t,"cinemaId",""),Object(we["a"])(t,"plan_date",""),Object(we["a"])(t,"hallId",""),Object(we["a"])(t,"lastUpdateTime",""),Object(we["a"])(t,"planId",""),Object(we["a"])(t,"myScroll",""),Object(we["a"])(t,"code",""),t},beforeRouteEnter:function(t,e,i){document.title="在线选座",i()},created:function(){this.planId=this.$route.params.planId,this.lastUpdateTime=this.$route.params.lastUpdateTime,this.hallId=this.$route.params.hallId,this.cinemaId=this.$route.params.cinemaId,this.plan_date=this.$route.params.plan_date,this.fetchSeatData(this.plan_date,this.planId,this.lastUpdateTime,this.hallId,this.cinemaId)},mounted:function(){this.seatScroll()},beforeDestroy:function(){this.loadScroll&&clearInterval(this.loadScroll)},methods:{seatScroll:function(){var t=new IScroll("#wrapper",{scrollX:!0,scrollY:!0,preventDefault:!1,zoom:!0,zoomMax:1.5,zoomMin:1,bounce:!0,mouseWheel:!0,wheelAction:"zoom"});this.myScroll=t},back:function(){router.go(-1)},fetchSeatData:function(t,e,i,a,s){var n=this,o=this,c=E.a.get("_lac_ap_"),r="/general_api/api/GetSeats?plan_date="+t+"&plan_id="+e+"&last_update_time="+i+"&hall_id="+a+"&cinema_id="+s+"&ap_id="+c+"&"+Date.parse(new Date);fetch(r).then(function(t){return t.json()}).then(function(t){o.loading=!1,o.show_body="";var e=t.data.recent_order;0==t.code&&(o.move_data=t.data.plan,console.log(o.move_data),o.seat_data=t.data.seat,o.rowsLength=t.data.seat.rows.length),t.data.seat.rows.length>11&&(o.standard="main main-small"),e&&(n.city_tip=!0,n.order_obj=e);var i=setInterval(function(){if($("#wrapper")[0]){var t=$("#scroller").width(),e=$(window).width();$("#wrapper").animate({scrollLeft:(t-e)/2+22}),o.loadScroll=setInterval(function(){if($("#scroller").css("transform")){var t=$("#scroller").css("transform").split(","),e=parseFloat(t[5]),i="translateY("+e+"px) scale("+t[3]+")";$(".side").css("transform",i)}$(".side").css("left",$("#wrapper").scrollLeft())},1e3/60),clearInterval(i)}},300)})},gopay:function(){this.order_obj;var t=E.a.get("ticket_trdnum");location.href="/general_api/tcss/index/?#/confirmOrder/"+t},nopay:function(){var t=this,e=this.order_obj,i=E.a.get("_lac_k_"),a="/general_api/api/auth/release_seat_order?order_no="+e.order_no+"&token="+i+"&"+(new Date).getTime();this.loading=!0,this.city_tip=!1,fetch(a).then(function(t){return t.json()}).then(function(e){console.log(e),t.loading=!1,t.loading=!1,t.city_tip=!1,t.planId=t.$route.params.planId,t.lastUpdateTime=t.$route.params.lastUpdateTime,t.hallId=t.$route.params.hallId,t.cinemaId=t.$route.params.cinemaId,t.plan_date=t.$route.params.plan_date,t.fetchSeatData(t.plan_date,t.planId,t.lastUpdateTime,t.hallId,t.cinemaId)})},showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},seatnum:function(t,e,i,a){var s=this,n=e+"-"+i;if(s.seats=n,s.select_seat_meta[n])delete s.select_seat_meta[n],$("a[name="+n+"]").removeClass("selected").addClass("active");else{if(s.select_seat.length+1>s.max)return void s.showTip("最多只能购买4个座位",1300);s.select_seat_meta[n]={sid:t,row:e,col:i},$("a[name="+n+"]").removeClass("active").addClass("selected")}var o=[];for(var c in s.select_seat_meta)o.push(s.select_seat_meta[c]);s.select_seat=o;o.length;var r=$("#seat_scroll .selected");r.offset()&&(s.rowsLength>11?(this.myScroll.zoom(1.5,r.offset().left,r.offset().top),this.myScroll.scrollToElement("#seat_scroll .selected",1200,!0,!0)):(this.myScroll.zoom(1.2,r.offset().left,r.offset().top),this.myScroll.scrollToElement("#seat_scroll .selected",1200,!0,!0)))},makeorder:function(){var t=this,e=E.a.get("_lac_k_"),i=(E.a.get("_lac_ated_"),E.a.get("_lac_op_"),E.a.get("_lac_ap_"));e?t.GoPayTicket():this.$router.push({name:"login",params:{apid:i}})},GoPayTicket:function(){var t=this;if(t.loading=!0,!t.select_seat.length)return t.showTip("请选择您要购买的座位",1300),void(t.loading=!1);for(var e="",i="",a=0,s=t.select_seat.length;a<s;a++)i&&(i+=","),i+=t.select_seat[a].sid,e=e+t.select_seat[a].row+"排"+t.select_seat[a].col+"座 ";var n=E.a.get("_lac_k_"),o="/general_api/api/auth/CreateSeatsOrder?plan_id="+t.planId+"&last_update_time="+t.lastUpdateTime+"&hall_id="+t.hallId+"&cinema_id="+t.cinemaId+"&seat_ids="+i+"&plan_date="+t.plan_date+"&token="+n+"&ts="+Date.parse(new Date);fetch(o).then(function(t){return t.json()}).then(function(e){if(t.loading=!1,0==e.code)document.cookie="orderNo="+e.data[1].order_no+";path=/",E.a.set("ticket_trdnum",e.data[0]),location.href="/general_api/tcss/index/?#/confirmOrder/"+e.data[0];else{if(0==e.available&&"user_no_login"==e.messages[0])return void(location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime());t.showTip("座位锁定失败",1300),t.seat_data={},t.select_seat_meta=[],t.select_seat=[],t.fetchSeatData(t.plan_date,t.planId,t.lastUpdateTime,t.hallId,t.cinemaId)}})}}},ye=be,ke=(i("51b8"),Object(p["a"])(ye,fe,Ce,!1,null,null,null)),xe=ke.exports,Se=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{background:"#EFEFF4"}},[i("div",{staticClass:"order-card-box"},[i("div",{staticClass:"order-card-con-bg"},[i("div",{staticClass:"order-card-con"},[i("div",{staticClass:"order-card-title"},[i("p",[i("span",{staticClass:"card-title-name"},[t._v(t._s(t.movieDetails.film_name)+" "),i("b",{staticClass:"card-title-sore"},[t._v(t._s(t.movieDetails.ticket_sum)+"张")])]),i("span",{staticClass:"card-title-right",staticStyle:{width:"1.6rem"}},[t._v("付款剩余时间")])])]),i("div",{staticClass:"card-title-right-time"},[t._v(t._s(t.msg))]),i("div",{staticClass:"order-card-time"},[i("p",[t._v(t._s(t.movieDetails.plan_date)+" "+t._s(t.movieDetails.plan_time))])]),i("div",{staticClass:"order-card-address"},[i("p",[t._v(t._s(t.movieDetails.store_name))])]),i("div",{staticClass:"order-card-seat"},[i("p",[t._v(t._s(t.movieDetails.hall_name)+" "),t._l(t.movieDetails.seats,function(e){return i("span",[t._v(" "+t._s(e.seat_sr)+"排"+t._s(e.seat_sc)+"座 ")])})],2)]),i("div",{staticClass:"dashed"}),t._m(0)])])]),i("section",{staticClass:"myweui-cells weui-cells",staticStyle:{"margin-top":".3rem"}},[i("a",{staticClass:"weui-cell myweui-cell cell-height-88 weui-cell_access",attrs:{href:"javascript:;"},on:{click:t.goCoupons}},[t._m(1),t.o_c?i("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":".3rem"}},[t._v(t._s(t.o_c.batch_title))]):i("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":".3rem"}},[t._v("点击选择")])]),i("div",{staticClass:"weui-cell myweui-cell cell-height-88"},[t._m(2),i("div",{staticClass:"weui-cell__ft",staticStyle:{color:"#00c203","font-size":".3rem"}},[t._v(t._s(t.movieDetails.total_amount/100)+"元")])])]),"-1"==t.CardData||null==t.CardData?i("section",{staticClass:"vip-card"},[i("div",{staticClass:"weui-cells myweui-cells",staticStyle:{"margin-top":".3rem"},on:{click:t.GoKaika}},[t._m(3)])]):i("section",{staticClass:"myweui-cells weui-cells_checkbox",staticStyle:{"margin-top":".3rem"}},[t.CardData?i("label",{staticClass:"weui-cell myweui-cell cell-height-88 weui-check__label",staticStyle:{background:"#fff"},attrs:{for:"x11"}},[i("div",{staticClass:"weui-cell__bd"},[i("p",[t._v("会员余额支付（余额："+t._s(t.CardData[0].balance/100)+"元）")])]),t._m(4)]):t._e(),t._m(5)]),i("div",{staticClass:"myweui-panel weui-panel weui-panel_access",staticStyle:{"padding-bottom":"2.5rem"}},[i("div",{staticClass:"weui-panel__hd",staticStyle:{color:"#000"}},[t._v("购票须知")]),i("div",{staticClass:"weui-panel__bd"},[i("div",{staticClass:"weui-media-box weui-media-box_text"},[i("p",{staticClass:"weui-media-box__desc myweui-media-box__desc"},[t._v("\n                    1、由于设备故障等不可抗力因素，存在少量场次取消的情况，会进行退票退款"),i("br"),t._v(" \n                    2、由于影院系统不稳定等因素，存在出票失败的情况，会进行退款"),i("br"),t._v(" \n                    3、取票码不再通过短信发送，可在“钱包-卡券”或“我的-电影票”中查看"),i("br"),t._v(" \n                    4、下单即代表你同意"),i("a",{staticStyle:{color:"#00c203"},attrs:{href:"javascript:void(0);"}},[t._v("《腾讯好时光用户服务协议》")]),i("br"),t._v(" \n                    5、订单编号"+t._s(t.movieDetails.order_no)+"\n                ")])])])]),i("div",{staticClass:"confirm-btn-container",staticStyle:{position:"fixed",bottom:"0"}},[i("div",{staticClass:"btn-container"},[i("div",{staticClass:"confirm-btn-total-price",on:{click:t.isShow}},[i("p",[i("span",[t._v("合计:")]),i("span",{staticStyle:{color:"#00c203"}},[t._v(t._s(t.movieDetails.pay_amount/100)+"元")]),i("span",{staticClass:"iconfont icon-triangle-up",class:t.trangle?"trangle-down":"trangle-up",staticStyle:{"font-size":".26rem",color:"#BCBEC1"}})])]),i("div",{staticClass:"confirm-btn"},[i("a",{staticClass:"weui-btn weui-btn_primary",staticStyle:{"font-size":"0.34rem",color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.GoPay}},[t._v("确认支付")])])]),i("div",{staticClass:"order-details-card",staticStyle:{display:"none"}},[i("div",{staticClass:"order-details-card-title"},[i("p",[t._v("结算明细")]),i("div",{staticClass:"cancel-card-show",on:{click:t.isShow}},[t._v("取消")])]),i("div",{staticClass:"order-details-card-con"},[t._m(6),i("div",{staticClass:"card-con-item"},[i("p",{staticClass:"color-a9"},[i("span",[t._v("原价票")]),i("span",[t._v(t._s(t.movieDetails.total_amount/t.movieDetails.ticket_sum/100)+"元 X "+t._s(t.movieDetails.ticket_sum))])]),t.offer_show?i("p",{staticClass:"color-a9"},[i("span",[t._v("优惠券")]),i("span",[t._v("减："+t._s(t.offer_amount)+"元")])]):t._e()])])])]),i("div",{staticClass:"weui-mask",staticStyle:{display:"none","z-index":"98"},attrs:{id:"iosMask"},on:{click:t.isShow}}),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(7)]):t._e(),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask",staticStyle:{"z-index":"100"}}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.Pwd_tip?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog1"}},[i("div",{staticClass:"weui-mask",staticStyle:{"z-index":"100"}}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v("请输入会员卡密码")]),i("div",{staticClass:"weui-dialog__bd nified"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.Pwd,expression:"Pwd"}],staticStyle:{border:"1px solid #ccc",width:"70%",height:".6rem","margin-bottom":".3rem"},attrs:{type:"password",name:""},domProps:{value:t.Pwd},on:{input:function(e){e.target.composing||(t.Pwd=e.target.value)}}})]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:t.PwdTip}},[t._v("取消")]),i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:t.setPwd}},[t._v("确定")])])])]):t._e()])},De=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order-card-status"},[i("div",{staticClass:"t-cancel"},[i("i",{staticClass:"iconfont icon-cancel"}),i("span",[t._v("不可退票")])]),i("div",{staticClass:"t-change"},[i("i",{staticClass:"iconfont icon-cancel"}),i("span",[t._v("不可改签")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell__bd"},[i("p",{staticStyle:{"font-size":".3rem",color:"#2c3e50"}},[t._v("优惠券")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell__bd"},[i("p",{staticStyle:{"font-size":".3rem"}},[t._v("票价总计")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"weui-cell myweui-cell vip-cell weui-cell_access",attrs:{href:"javascript:;"}},[i("div",{staticClass:"weui-cell__bd"},[i("div"),i("p",{staticClass:"vip-cell-title",staticStyle:{"font-size":".3rem"}},[t._v("腾讯影院会员卡")]),i("p",{staticClass:"vip-cell-con"},[t._v("开卡影票最低"),i("span",[t._v("25元起")])])]),i("div",{staticClass:"weui-cell__ft"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell__ft"},[i("input",{staticClass:"weui-check",attrs:{type:"radio",name:"radio1",id:"x11",checked:"checked"}}),i("span",{staticClass:"weui-icon-checked",staticStyle:{transform:"scale(.8)"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{staticClass:"weui-cell myweui-cell cell-height-88 weui-check__label",staticStyle:{background:"#fff"},attrs:{for:"x12"}},[i("div",{staticClass:"weui-cell__bd"},[i("p",[t._v("微信支付")])]),i("div",{staticClass:"weui-cell__ft"},[i("input",{staticClass:"weui-check",attrs:{type:"radio",name:"radio1",id:"x12"}}),i("span",{staticClass:"weui-icon-checked",staticStyle:{transform:"scale(.8)"}})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card-con-title"},[i("span",[t._v("电影票")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],Te={data:function(){return{loading:!0,Pwd_tip:!1,on:"",movieDetails:"",CardData:"",trangle:!1,isFixed:!1,msg:"15:00",tnum:"",other:"",tip_msg:"",Pwd:"",order_no:"",o_c:"",offer_amount:"",offer_show:!1}},beforeRouteEnter:function(t,e,i){document.title="确认订单",i()},created:function(){var t=sessionStorage.getItem("o_c");t&&(this.o_c=JSON.parse(t))},mounted:function(){this.on=E.a.get("orderNo"),this.tnum=this.$route.params.tnum,this.GetAccountCard(),this.GetOrderDetails(),this.countTime("900")},methods:{showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},PwdTip:function(){var t=this;t.Pwd_tip=!1},GoPay:function(){var t=this,e=t.tnum;t.loading=!0;var i=E.a.get("_lac_k_");if("-1"==t.CardData||null==t.CardData){var a=t.o_c.id||"",s="/general_api/api/auth/GetWxObj?ct=201101&token="+i+"&tnum="+e+"&coupon_id="+a+"&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(e){console.log(e),-1==e.code?(t.loading=!1,t.showTip(e.text)):0==e.code?(t.loading=!1,t.other=e.other,t.onBridgeReady()):0==e.available&&"user_no_login"==e.messages[0]&&t.showTip("用户未登录")})}else if(document.getElementById("x12").checked){var n=t.o_c.id||"";s="/general_api/api/auth/GetWxObj?ct=201101&token="+i+"&coupon_id="+n+"&tnum="+e+"&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(e){console.log(e),-1==e.code?(t.loading=!1,t.showTip(e.text)):0==e.code?(t.loading=!1,t.other=e.other,t.onBridgeReady()):0==e.available&&"user_no_login"==e.messages[0]&&t.showTip("用户未登录")})}else t.loading=!1,t.Pwd_tip=!0},setPwd:function(){var t=this,e=E.a.get("_lac_k_"),i=t.tnum,a=t.o_c.id||"",s="/general_api/api/auth/GetWxObj?ct=101001&token="+e+"&coupon_id="+a+"&tnum="+i+"&pwd="+t.Pwd+"&unicode="+t.CardData[0].mc_num+"&ts="+Date.parse(new Date);t.loading=!0,t.Pwd_tip=!1,fetch(s).then(function(t){return t.json()}).then(function(e){t.loading=!1,"-1"==e.code?(t.showTip(e.text),t.Pwd_tip=!1,t.Pwd=""):"0"==e.code&&"交易成功"==e.text?(t.loading=!1,t.Pwd_tip=!1,t.showTip("支付成功"),t.Pwd="",setTimeout(function(){t.$router.push({name:"votingCode",params:{on:t.on}})},100)):"0"==e.code&&"-1"==e.other[0].code?(t.loading=!1,t.Pwd_tip=!1,t.showTip(e.other[0].err_code_desc),t.Pwd=""):0==e.available&&"user_no_login"==e.messages[0]?(t.Pwd_tip=!1,t.Pwd="",t.showTip("用户未登录")):0==e.available&&"trade_status_invalid"==e.messages[0]&&(t.Pwd_tip=!1,t.Pwd="",t.showTip("请勿重复支付"))})},onBridgeReady:function(){var t=this.other;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:"MD5",paySign:t.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg?location.href="/general_api/tcss/index#/myTicket":"get_brand_wcpay_request:cancel"==t.err_msg?alert("您取消了付款"):"get_brand_wcpay_request:fail"==t.err_msg&&alert("支付失败")})},GoKaika:function(){location.href="/general_api/tcss/index/?#/purchasingCard/purchasing"},countTime:function(t){var e=this;t=Number(t);if(t>=0){var i=Math.floor(t/60),a=Math.floor(t%60),s=i+":"+a;e.msg=s,setTimeout(function(){t-=1,e.countTime(t)},1e3)}else e.msg="00:00"},GetAccountCard:function(){var t=this,e=E.a.get("_lac_k_"),i="/general_api/api/auth/GetAccountCard?token="+e+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){t.CardData=e.obj,t.loading=!1})},GetOrderDetails:function(){var t=this,e=this,i=this.o_c.id||"",a="/general_api/api/GetTicketOrderDetails?order_no="+e.on+"&coupon_id="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(i){0==i.code&&(e.movieDetails=i.data,e.order_no=i.data.order_no,e.loading=!1,null===i.pref_coupon?sessionStorage.removeItem("o_c"):""===i.pref_coupon?(weui.topTips("当前优惠券无法使用",5e3),sessionStorage.removeItem("o_c"),t.o_c=""):(e.offer_amount=i.pref_coupon.prep_amount/100,e.offer_show=!0))})},isShow:function(){this.trangle=!this.trangle;var t=$("#iosMask"),e=$(".order-details-card");this.trangle?(t.fadeIn(200),e.slideDown(400)):(t.fadeOut(200),e.slideUp(400))},goCoupons:function(){var t=this.order_no,e=this.tnum;this.$router.push({name:"couponsForOrder",params:{order_no:t,tnum:e}})}}},Ee=Te,je=(i("f9e9"),Object(p["a"])(Ee,Se,De,!1,null,null,null)),Oe=je.exports,Ie=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%","padding-bottom":"120px"}},[i("div",{staticClass:"goods"},[i("div",{ref:"menuWrapper",staticClass:"menu-wrapper",staticStyle:{overflow:"auto"}},[i("ul",t._l(t.groupList,function(e,a){return i("li",{key:a,class:a===t.menuCurIndex?"menu-selected":"",on:{click:function(i){t.menuClick(a,e.id,i)}}},[i("p",[t._v(t._s(e.cat_name_cn))])])}))]),i("div",{ref:"goodsWrapper",staticClass:"goods-wrapper",staticStyle:{overflow:"auto"}},[t.groupList.length>0?i("div",{staticClass:"goods-wrapper-title"},[t._v(t._s(t.groupList[t.menuCurIndex].cat_name_cn))]):t._e(),i("ul",t._l(t.goodsList,function(e,a){return i("li",{key:a},[i("div",{staticClass:"goods-item-box"},[i("div",{staticClass:"goods-img"},[null==e[0].stock||"0"==e[0].stock?i("span",{staticStyle:{padding:"2px 4px",background:"#CC6666",position:"absolute",color:"#fff","z-index":"1"}},[t._v("售罄")]):t._e(),i("img",{attrs:{src:"http://pe1s.static.pdr365.com/null"!==e[0].sku_img?e[0].sku_img:"",alt:""}})]),i("div",{staticClass:"goods-item"},[i("div",{staticClass:"goods-item-title"},[i("span",[t._v(t._s(e[1].goods_name))])]),t._l(e[0].skus,function(e,a,s){return i("div",{key:s,staticClass:"goods-item-sku"},[i("span",[t._v(t._s(a)+":")]),i("span",[t._v(t._s(e))])])}),i("div",{staticClass:"goods-item-price"},[i("span",[t._v("¥"+t._s(e[1].goods_price/100))])])],2),i("div",{staticClass:"goods-control"},[i("cartControl",{attrs:{foods:e,stock:e[0].stock}})],1)])])})),t.goodsList.length>0?i("div",{staticClass:"bottom-tip"},[t._v("已经是最底了哦～")]):t._e()]),i("comboCart",{directives:[{name:"show",rawName:"v-show",value:t.comboShow,expression:"comboShow"}],attrs:{combo:t.comboData}}),i("shopCart",{directives:[{name:"show",rawName:"v-show",value:!t.comboShow,expression:"!comboShow"}],attrs:{cartList:t.cartList,bottom:t.bottom},on:{"create-order":t.createOrder}})],1),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e(),i("tabBottom",{attrs:{active:"store"}})],1)},$e=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],Le=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.stock?i("div",{staticClass:"cart"},[i("transition",{attrs:{name:"fadeRotate"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.foods[0].count>0,expression:"foods[0].count>0"}],staticClass:"cart-reduce",on:{click:function(e){t.reduce()}}},[i("i",{staticClass:"iconfont icon-jianhao",staticStyle:{"font-size":"22px"}})])]),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.foods[0].count>0,expression:"foods[0].count>0"}],staticClass:"cart-count",staticStyle:{"font-size":"0.32rem"}},[t._v("\n            "+t._s(t.foods[0].count)+"\n        ")])]),i("div",{staticClass:"cart-add",on:{click:function(e){t.add(e)}}},[i("i",{staticClass:"iconfont icon-jiahao2",staticStyle:{"font-size":"22px"}})]),i("div",{staticClass:"ball-container"},t._l(t.balls,function(e,a){return i("transition",{attrs:{name:"drop"},on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"ball.show"}],staticClass:"ball"},[i("div",{staticClass:"inner inner-hook"})])])}))],1):i("div",{staticClass:"cart"},[t._m(0)])},Pe=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cart-add"},[i("i",{staticClass:"iconfont icon-jiahao2",staticStyle:{"font-size":"22px",color:"#ccc"}})])}],Re={name:"cartControl",props:{foods:{},stock:""},data:function(){return{count:0,balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[]}},methods:Object(l["a"])({},Object(d["mapActions"])(["AddToCart","ReleaseToCart","ListenCart"]),{reduce:function(){this.foods[0].count>0?(this.foods[0].count--,this.count--):(this.foods[0].count=0,this.count=0),this.ReleaseToCart({data:this.foods}),this.$emit("reduce")},add:function(t){this.foods[0].count++,this.count++,this.AddToCart({data:this.foods}),this.drop(t.target),this.$emit("add")},drop:function(t){for(var e=0,i=this.balls.length;e<i;e++){var a=this.balls[e];if(!a.show)return a.show=!0,a.el=t,void this.dropBalls.push(a)}},beforeEnter:function(t){var e=this.balls.length;while(e--){var i=this.balls[e];if(i.show){var a=i.el.getBoundingClientRect(),s=a.left-32,n=-(window.innerHeight-a.top-22);t.style.display="",t.style.webkitTransform="translate3d(0,".concat(n,"px,0)"),t.style.transform="translate3d(0,".concat(n,"px,0)");var o=t.querySelector(".inner-hook");o.style.webkitTransform="translate3d(".concat(s,"px,0,0)"),o.style.transform="translate3d(".concat(s,"px,0,0)")}}},enter:function(t){t.offsetHeight,this.$nextTick(function(){t.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)";var e=t.querySelector(".inner-hook");e.style.webkitTransform="translate3d(0,0,0)",e.style.transform="translate3d(0,0,0)"})},afterEnter:function(t){var e=this.dropBalls.shift();e&&(e.show=!1,t.style.display="none")}}),watch:{count:function(){this.ListenCart()}}},Ge=Re,Me=(i("722f"),Object(p["a"])(Ge,Le,Pe,!1,null,null,null)),Be=Me.exports,Ne=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("div",{staticClass:"shopCart",style:t.bottom},[i("div",{staticClass:"content"},[i("div",{staticClass:"content-left",on:{click:t.listToggle}},[i("div",{staticClass:"logo-wrapper"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount,expression:"totalCount"}],staticClass:"badge"},[t._v("\n                        "+t._s(t.totalCount)+"\n                    ")]),i("div",{staticClass:"logo",class:{active:t.totalPrice}},[i("i",{staticClass:"iconfont icon-ai66"})])]),i("div",{staticClass:"price",class:{active:t.totalPrice}},[t._v("\n                    ￥"+t._s(t._f("toFixed")(t.totalPrice))+"\n                ")])]),i("div",{staticClass:"content-right",class:{enough:t.totalPrice},on:{click:t.createOrder}},[t._v(" 去结算 ")])]),i("transition",{attrs:{name:"transHeight"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[i("div",{staticClass:"list-header"},[i("p",{staticClass:"title"},[t._v("购物车")]),i("span",{staticClass:"empty",on:{click:t.setEmpty}},[i("i",{staticClass:"iconfont icon-lajitong",staticStyle:{"font-size":"12px"}}),t._v("\n                        清空购物车\n                    ")])]),i("div",{ref:"foodlist",staticClass:"list-content"},[i("ul",t._l(t.cartList,function(e){return i("li",{staticClass:"food"},[i("div",{staticClass:"name"},[i("p",[t._v(t._s(e[1].goods_name))]),i("div",{staticStyle:{display:"flex"}},t._l(e[0].skus,function(e,a,s){return i("p",{key:s,staticStyle:{"font-size":"12px",color:"#ccc"}},[i("span",[t._v(t._s(a)+":")]),i("span",[t._v(t._s(e))])])}))]),i("div",{staticClass:"price"},[i("span",[t._v("￥"+t._s(t._f("toFixed")(Number(e[1].goods_price)/100*Number(e[0].count))))])]),i("div",{staticClass:"cartcontrol-wrapper"},[i("cartControl",{attrs:{foods:e,stock:!0}})],1)])}))])])])],1),i("transition",{attrs:{name:"fade-backdrop"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showBackdrop,expression:"showBackdrop"}],staticClass:"backdrop",on:{click:t.hideBackdrop}})])],1)},Ae=[],We={name:"shopCart",props:{cartList:{type:Array,default:[]},bottom:{type:String,default:"bottom:0"}},data:function(){return{listShow:!1}},mounted:function(){},computed:{showBackdrop:function(){return!(!this.listShow||!this.totalPrice)||(this.listShow=!1,!1)},totalCount:function(){var t=0;return this.cartList.forEach(function(e){t+=e[0].count}),t},totalPrice:function(){var t=0;return this.cartList.forEach(function(e){e[0].count&&(t+=Number(e[1].goods_price)/100*Number(e[0].count))}),t}},methods:{_initScroll:function(){this.foodlistScroll=new j["a"](this.$refs.foodlist,{click:!0})},hideBackdrop:function(){this.listShow=!1},listToggle:function(){var t=this;this.cartList.length&&(this.listShow=!this.listShow,this.listShow&&this.$nextTick(function(){t.foodlistScroll?t.foodlistScroll.refresh():t._initScroll()}))},createOrder:function(){this.totalPrice&&this.$emit("create-order")},setEmpty:function(){this.$store.dispatch("ClearCart")}},components:{cartControl:Be}},Ue=We,ze=(i("93b5"),Object(p["a"])(Ue,Ne,Ae,!1,null,"c20fb25a",null)),Ke=ze.exports,qe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}]},[i("div",{staticClass:"comboCart"},[t._m(0),t.combo.length>0?i("transition",{attrs:{name:"transHeight"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"combocart-list"},[i("div",{staticClass:"food-info food-item"},[i("div",{staticClass:"food-info-head"},[i("div",{staticClass:"img"},[i("img",{attrs:{src:t.combo[0].sku_img}})]),i("div",[i("p",{staticClass:"name"},[t._v(t._s(t.combo[1].goods_name))]),i("p",{staticClass:"price"},[t._v(t._s(t.combo[1].goods_price/100)+"元")])])])]),i("div",{staticClass:"food-sku food-item"},[i("div",{staticClass:"title"},[t._v("商品规格")]),i("ul",t._l(t.combo[0].skus,function(e,a,s){return i("li",{key:s,class:s===t.skuIndex?"active":"",on:{click:function(e){t.skuIndex=s}}},[t._v(t._s(e))])}))]),i("div",{staticClass:"food-sku food-item"},[i("div",{staticClass:"title"},[t._v("特殊要求")]),i("ul",t._l(t.remark_list,function(e,a){return i("li",{key:a,class:a===t.remarkIndex?"active":"",on:{click:function(e){t.remarkIndex=a}}},[t._v(t._s(e))])}))])])]):t._e()],1),i("transition",{attrs:{name:"fade-backdrop"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"backdrop",on:{click:t.hideBackdrop}})])],1)},Fe=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[i("div",{staticClass:"add-to-cart"},[t._v(" 加入购物车 ")])])}],He={name:"comboCart",props:{combo:{type:Array,default:[]}},data:function(){return{skuIndex:0,remarkIndex:0,remark_list:["标准糖","少糖","多糖","去冰","少冰","##"]}},computed:{listShow:function(){return this.$store.state.comboShow},totalCount:function(){var t=0;return this.cartList.forEach(function(e){t+=e[0].count}),t},totalPrice:function(){var t=0;return this.cartList.forEach(function(e){e[0].count&&(t+=Number(e[1].goods_price)/100*Number(e[0].count))}),t}},methods:{hideBackdrop:function(){this.$store.dispatch("ToggleComboShow")}},components:{cartControl:Be}},Je=He,Ve=(i("5db3"),Object(p["a"])(Je,qe,Fe,!1,null,"c97ef802",null)),Ye=Ve.exports,Xe={data:function(){return{tableNum:"",loading:!1,tip_msg:"",choose:!1,GoPay:!1,StoreList:"",menuCurIndex:0,comboData:[],sid:"",bottom:"bottom:50px",has_sid:!1}},beforeRouteEnter:function(t,e,i){document.title="商品",i()},computed:Object(l["a"])({},Object(d["mapState"])(["groupList","goodsList","firCatId","cartList","comboShow"])),created:function(){var t=this.$route.params.sid;t?(this.sid=t,E.a.set("s_id",t)):this.sid=E.a.get("s_id"),this.CheckLogin()},mounted:function(){this.cityList()},methods:Object(l["a"])({},Object(d["mapActions"])(["getGoodsList","getGroupList","ToggleComboShow","initFirCatId"]),{_initScroll:function(){},menuClick:function(t,e,i){this.menuCurIndex=t;var a={};a.id=e,a.sid=this.sid,console.log(a),this.getGoodsList(a)},CheckLogin:function(){var t=E.a.get("_lac_ap_");t||(location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime())},goCombo:function(t){this.comboData=t,this.ToggleComboShow()},showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},createOrder:function(){var t=this,e=E.a.get("_lac_k_");E.a.get("_lac_ated_"),E.a.get("_lac_op_");if(e)t.GoGoodsPay();else{var i=E.a.get("_lac_ap_");i?this.$router.push({name:"login",params:{apid:i}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}},cityList:function(){var t=this,e=E.a.get("city_no");if(e)this.sid?(this.initFirCatId(),this.getGroupList("storeList")):this.GetStore(e);else{var i=this,a="/general_api/api/cityList?ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){console.log(e),"0"==e.code&&e.data&&e.data.length>0&&(E.a.set("city_no",e.data[0].city_no),i.city_name=e.data[0].city_name,i.city_no=Number(e.data[0].city_no),t.GetStore(Number(e.data[0].city_no)),E.a.set("city_name",i.city_name)),i.loading=!1})}},GoGoodsPay:function(){var t=this,e="";t.loading=!0,this.cartList.forEach(function(t,i){var a="";a+=t[1].gt+","+t[1].id+","+t[0].id+",",e+=a.slice(0,a.length-1)+","+t[0].count+",;"});var i=e.slice(0,e.length-1),a=E.a.get("_lac_k_"),s=t.sid,n="/general_api/api/auth/createOrder?dss=190&tbn=&gs="+i+"&sid="+s+"&token="+a+"&ts="+Date.parse(new Date);fetch(n).then(function(t){return t.json()}).then(function(e){if(console.log(e),e.available){t.loading=!1;var i=e.data[0],a=e.data[1];document.cookie="goodsOrderNo="+a[0].order_no+";path=/",document.cookie="goosdOrderTnum="+i.tnum+";path=/",location.href="/general_api/tcss/index/?#/ConfirmGoodsOrder/tcssGoods"}else t.loading=!1,location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()})},getCookie:function(t){for(var e=document.cookie,i=e.split("; "),a=0;a<i.length;a++){var s=i[a].split("=");if(s[0]==t)return s[1]}return""},godo_my:function(){his.$router.push({name:"personalCenter"})},GetStore:function(t){var e=this,i="/general_api/api/StoreList?city_no="+t+"&"+(new Date).getTime();fetch(i).then(function(t){return t.json()}).then(function(t){if(0==t.code&&t.data&&t.data.length>0){var i=0;t.data[0].cinema_id&&(i=t.data[0].cinema_id),e.cinemaId=i,e.cinemanm=t.data[0].store_name,e.sid=t.data[0].s_id,console.log("set cinemaId default cookie======"+e.cinemaId),E.a.set("cinemaId",e.cinemaId),E.a.set("s_id",t.data[0].store_basic);var a=t.data[0].city+t.data[0].zone+t.data[0].address;e.encodeUnicodeAdd(a),e.encodeUnicodeName(t.data[0].physics_name),e.getGroupList("storeList").then(function(i){console.log("debug promise: sid >>>>> "+t.data[0].store_basic);var a={};a.id=e.firCatId,a.sid=t.data[0].store_basic,e.getGoodsList(a)})}e.loading=!1})},encodeUnicodeAdd:function(t){for(var e=[],i=0;i<t.length;i++)e[i]=("00"+t.charCodeAt(i).toString(16)).slice(-4);E.a.set("storeAdd","\\u"+e.join("\\u"))},encodeUnicodeName:function(t){for(var e=[],i=0;i<t.length;i++)e[i]=("00"+t.charCodeAt(i).toString(16)).slice(-4);E.a.set("storeName","\\u"+e.join("\\u"))},haun_cards:function(t){this.sid=t}}),watch:{firCatId:function(){if(console.log("watch_"+this.firCatId+",this.sid="+this.sid),-1!==this.firCatId&&this.sid){var t={};t.id=this.firCatId,t.sid=this.sid,this.getGoodsList(t)}}},components:{cartControl:Be,shopCart:Ke,comboCart:Ye,tabBottom:M["a"]}},Ze=Xe,Qe=(i("b877"),Object(p["a"])(Ze,Ie,$e,!1,null,null,null)),ti=Qe.exports,ei=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{background:"#EFEFF4",width:"100%",height:"100%"}},[i("div",{staticClass:"store-weui-panel weui-panel weui-panel_access",staticStyle:{"margin-bottom":"2.8rem"}},[i("div",{staticClass:"weui-panel__bd"},[t._l(t.orderDetails,function(e){return i("div",{staticClass:"weui-media-box weui-media-box_appmsg"},[i("div",{staticClass:"weui-media-box__hd"},[i("img",{staticClass:"weui-media-box__thumb",attrs:{src:"http://pe1s.static.pdr365.com/"+e.pic_url,alt:""}})]),i("div",{staticClass:"weui-media-box__bd"},[i("div",{staticClass:"select-goods-info"},[i("div",{staticClass:"select-goods-info-title"},[t._v(t._s(e.goods_name))]),i("div",{staticClass:"select-goods-info-vol"},[t._v(t._s(e.goods_name))]),i("div",{staticClass:"select-goods-info-price"},[i("span",[t._v(t._s(e.pay_amount/100)+"元")])])])]),i("div",{staticClass:"store-goods-cal"},[i("p",[t._v("已售"+t._s(e.id))]),i("div",{staticClass:"select-goods-cal-item"},[t._v("\n                        *"+t._s(e.buy_num)+"\n                        ")])])])}),t._m(0)],2)]),i("section",{staticClass:"myweui-cells weui-cells"},[t._m(1),i("div",{staticClass:"weui-cell myweui-cell cell-height-88"},[t._m(2),i("div",{staticClass:"weui-cell__ft",staticStyle:{color:"#00c203"}},[t._v(t._s(t.data.pay_amount/100)+"元")])])]),"-1"==t.CardData?i("section",{staticClass:"vip-card",staticStyle:{"padding-bottom":"2.8rem"}},[i("div",{staticClass:"weui-cells myweui-cells",on:{click:t.GoKaika}},[t._m(3)])]):t._e(),i("div",{staticClass:"confirm-btn-container",staticStyle:{position:"fixed",bottom:"0","margin-top":"0"}},[i("div",{staticClass:"btn-container"},[i("div",{staticClass:"confirm-btn-total-price"},[i("p",[i("span",[t._v("合计:")]),i("span",{staticStyle:{color:"#00c203"}},[t._v(t._s(t.data.pay_amount/100)+"元")])])]),i("div",{staticClass:"confirm-btn"},[i("a",{staticClass:"weui-btn weui-btn_primary",staticStyle:{"font-size":"0.34rem",color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.godo_goodOrder}},[t._v("确认支付")])])])]),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(4)]):t._e()])},ii=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-media-box weui-media-box_text"},[i("div",{staticClass:"weui-media-box__desc",staticStyle:{display:"flex","justify-content":"space-between"}},[i("div",{staticClass:"store-order-slogan"},[i("i",{staticClass:"iconfont icon-duigou"}),i("span",[t._v("随时退、过期退")])])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"weui-cell myweui-cell cell-height-88 weui-cell_access",staticStyle:{color:"#2c3e50"},attrs:{href:"javascript:;"}},[i("div",{staticClass:"weui-cell__bd"},[i("p",[t._v("优惠券")])]),i("div",{staticClass:"weui-cell__ft"},[t._v("无可用")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell__bd"},[i("p",[t._v("小计")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"weui-cell myweui-cell vip-cell weui-cell_access",attrs:{href:"javascript:;"}},[i("div",{staticClass:"weui-cell__bd"},[i("div"),i("p",{staticClass:"vip-cell-title",staticStyle:{color:"#2c3e50"}},[t._v("腾讯影院会员卡")]),i("p",{staticClass:"vip-cell-con"},[t._v("开卡卖品最低"),i("span",[t._v("25元起")])])]),i("div",{staticClass:"weui-cell__ft"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],ai={data:function(){return{tnum:"",tableNum:"",on:"",data:"",orderDetails:"",other:"",tip_msg:"",loading:!0,CardData:""}},beforeRouteEnter:function(t,e,i){document.title="订单结算",i()},mounted:function(){this.tnum=this.$route.params.tnum,this.on=E.a.get("goodsOrderNo"),this.godo_Order(),this.GetAccountCard()},methods:{showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},godo_Order:function(){var t=this,e=E.a.get("_lac_k_"),i="/general_api/api/auth/ScanOrderDetais?token="+e+"&on="+this.on+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){e.available?(t.data=e.data,t.orderDetails=e.data.items,t.loading=!1):0==e.available&&"user_no_login"==e.messages[0]&&t.showTip("用户未登录")})},GetAccountCard:function(){var t=this;console.log("11");var e="/general_api/api/GetAccountCard?ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){t.CardData=e.obj,t.loading=!1})},godo_goodOrder:function(){var t=this;console.log("11"),t.loading=!0;var e=E.a.get("_lac_k_"),i="/general_api/api/auth/GetWxObj?ct=201101&tnum="+t.tnum+"&token="+e+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){console.log(e),-1==e.code?(t.loading=!1,t.showTip(e.text)):0==e.code?(t.loading=!1,t.other=e.other,t.onBridgeReady()):0==e.available&&"user_no_login"==e.messages[0]&&t.showTip("用户未登录")})},onBridgeReady:function(){var t=this.other;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:"MD5",paySign:t.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg||("get_brand_wcpay_request:cancel"==t.err_msg?alert("您取消了付款"):"get_brand_wcpay_request:fail"==t.err_msg&&alert("支付失败"))})},GoKaika:function(){location.href="/general_api/tcss/index#/purchasingCard/purchasing"}}},si=ai,ni=(i("26d7"),Object(p["a"])(si,ei,ii,!1,null,null,null)),oi=ni.exports,ci=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._m(0),i("div",{staticClass:"purchasingcard-mid"},[i("ul",{staticClass:"purchasingcard-mid-ul"},t._l(t.RechargeData,function(e,a){return-1!=t.RechargeData?i("li",{class:t.HId==e.id?"purchasingcard-mid-li-true":"purchasingcard-mid-li",attrs:{"data-index":a},on:{click:function(i){t.godo_choose(e.id,a)}}},[i("p",{class:t.HId==e.id?"purchasingcard-mid-li-price-true":"purchasingcard-mid-li-price",attrs:{"data-index":a}},[t._v("¥"+t._s(e.getpay/100))]),i("p",{class:t.HId==e.id?"purchasingcard-mid-li-introduce-true":"purchasingcard-mid-li-introduce",attrs:{"data-index":a}},[t._v(t._s(e.cr_type_desc))]),t.HId==e.id?i("img",{staticClass:"purchasingcard-mid-li-true-img",attrs:{"data-index":a,src:"http://pe1s.static.pdr365.com/tencent/icon/dot_icon.png"}}):t._e()]):t._e()}))]),t._m(1),i("div",{staticClass:"purchase-box"},[i("div",{staticClass:"purchase",on:{click:t.godo_recharge}},[t._v("立即充值")])]),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(2)]):t._e()])},ri=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"purchasingcard-top"},[i("p",{staticClass:"purchasingcard-top-title"},[t._v("选择充值金额")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"purchasingcard-bot"},[i("div",{staticClass:"purchasingcard-bot-title"},[t._v("\n\t\t\t\t支付方式\n\t\t\t")]),i("div",{staticClass:"purchasingcard-bot-pay"},[i("div",[i("img",{attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/wechat_pay_icon.png"}}),i("p",[t._v("微信支付")])]),i("i",{staticClass:"weui-icon-success weui-icon_msg",staticStyle:{"font-size":".4rem","margin-right":".3rem"}})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],li={data:function(){return{loading:!1,tip_msg:"",RechargeData:"",id:"",HId:"",Num:"",other:""}},beforeRouteEnter:function(t,e,i){document.title="充值会员",i()},created:function(){this.GradeList(),this.Num=this.$route.params.CardNm},methods:{back:function(){router.go(-1)},showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},GradeList:function(){var t=this;t.loading=!0;var e="/general_api/api/CardGradeList?ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){t.loading=!1,t.RechargeData=e.obj,t.HId=e.obj[0].id,t.id=e.obj[0].id})},godo_choose:function(t,e){for(var i=this,a=i.RechargeData,s=0;s<a.length;s++)s==e&&(i.HId=a[e].id);i.id=t},godo_recharge:function(){var t=this,e=t.Num,i=t.id;t.loading=!0;var a="/general_api/api/RechargeCard?mc_num="+e+"&h_id="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){if(e.available){var i=E.a.get("_lac_k_"),a="/general_api/api/auth/GetWxObj?ct=201101&tnum="+e.obj.data.tnum+"&token="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){console.log(e),-1==e.code?t.showTip(e.text):0==e.code?(t.other=e.other,t.onBridgeReady()):0==e.available&&"user_no_login"==e.messages[0]&&t.showTip("用户未登录")})}else t.loading=!1,t.showTip(e.messages[0])})},onBridgeReady:function(){this.loading=!1;var t=this.other;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:"MD5",paySign:t.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg?location.href="/general_api/tcss/index#/myCards":"get_brand_wcpay_request:cancel"==t.err_msg?this.showTip("您取消了付款"):"get_brand_wcpay_request:fail"==t.err_msg&&this.showTip("支付失败")})}}},di=li,ui=(i("92a2"),Object(p["a"])(di,ci,ri,!1,null,"73ba6cc5",null)),_i=ui.exports,mi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%","padding-bottom":"60px"}},[i("div",{staticClass:"scan-top"},[i("img",{staticClass:"scan-logo",attrs:{src:"http://pe1s.static.pdr365.com/timg.jpeg"}}),i("div",{staticClass:"scan-content"},[i("select",{staticClass:"scan-content-nm",staticStyle:{background:"#000",border:"none","-webkit-appearance":"none","-moz-appearance":"none","-ms-appearance":"none",appearance:"none"},attrs:{id:"select"},on:{change:t.select_store}},t._l(t.StoreList,function(e){return i("option",{domProps:{value:e.id,selected:t.sid==e.id}},[t._v(t._s(e.store_name))])})),i("p",{staticClass:"scan-content-num"},[t._v("当前桌号："+t._s(t.tableNum))])]),i("div",{staticClass:"scan-personal-center"},[i("p",{on:{click:t.godo_my}},[t._v("个人中心")]),i("div")])]),i("div",{staticClass:"goods"},[i("div",{ref:"menuWrapper",staticClass:"menu-wrapper",staticStyle:{overflow:"auto"}},[i("ul",t._l(t.groupList,function(e,a){return i("li",{key:a,class:a===t.menuCurIndex?"menu-selected":"",on:{click:function(i){t.menuClick(a,e.id,i)}}},[i("p",[t._v(t._s(e.cat_name_cn))])])}))]),i("div",{ref:"goodsWrapper",staticClass:"goods-wrapper",staticStyle:{overflow:"auto"}},[t.groupList.length>0?i("div",{staticClass:"goods-wrapper-title"},[t._v(t._s(t.groupList[t.menuCurIndex].cat_name_cn))]):t._e(),i("ul",[0===t.goodsList.length?i("div",{staticStyle:{"margin-top":"20px","font-size":"20px",width:"100%","text-align":"center"}}):t._e(),t._l(t.goodsList,function(e,a){return i("li",{key:a},[i("div",{staticClass:"goods-item-box"},[i("div",{staticClass:"goods-img"},[null==e[0].stock||"0"==e[0].stock?i("span",{staticStyle:{padding:"2px 4px",background:"#CC6666",position:"absolute",color:"#fff","z-index":"1"}},[t._v("售罄")]):t._e(),i("img",{attrs:{src:"http://pe1s.static.pdr365.com/null"!==e[0].sku_img?e[0].sku_img:"",alt:""}})]),i("div",{staticClass:"goods-item"},[i("div",{staticClass:"goods-item-title"},[i("span",[t._v(t._s(e[1].goods_name))])]),t._l(e[0].skus,function(e,a,s){return i("div",{key:s,staticClass:"goods-item-sku"},[i("span",[t._v(t._s(a)+":")]),i("span",[t._v(t._s(e))])])}),i("div",{staticClass:"goods-item-price"},[i("span",[t._v("¥"+t._s(e[1].goods_price/100))])])],2),i("div",{staticClass:"goods-control"},[i("cartControl",{attrs:{foods:e,stock:e[0].stock}})],1)])])})],2),t.goodsList.length>0?i("div",{staticClass:"bottom-tip"},[t._v("已经是最底了哦～")]):t._e()]),i("comboCart",{directives:[{name:"show",rawName:"v-show",value:t.comboShow,expression:"comboShow"}],attrs:{combo:t.comboData}}),i("shopCart",{directives:[{name:"show",rawName:"v-show",value:!t.comboShow,expression:"!comboShow"}],attrs:{cartList:t.cartList,bottom:t.bottom},on:{"create-order":t.createOrder}})],1),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e()])},pi=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],vi={data:function(){return{tableNum:"",loading:!1,tip_msg:"",choose:!1,GoPay:!1,StoreList:"",menuCurIndex:0,comboData:[],sid:"",bottom:"bottom:0"}},beforeRouteEnter:function(t,e,i){document.title="点餐",i()},computed:Object(l["a"])({},Object(d["mapState"])(["groupList","goodsList","firCatId","cartList","comboShow"])),created:function(){var t=this.$route.params.sid;t?(this.sid=t,E.a.set("s_id",t)):this.sid=E.a.get("s_id"),this.tableNum=this.$route.params.tableNum,document.cookie="tableNum="+this.$route.params.tableNum+";path=/"},mounted:function(){this.GetStoreList()},methods:Object(l["a"])({},Object(d["mapActions"])(["getGoodsList","getGroupList","ToggleComboShow","initFirCatId"]),{_initScroll:function(){},CheckLogin:function(){var t=E.a.get("_lac_ap_");if(t)this.initFirCatId(),this.getGroupList("ScavengingPointMea");else{var e="/general_api/tcss/index#/ScavengingPointMea/"+this.tableNum+"/"+this.sid;e=encodeURIComponent(encodeURIComponent(e)),location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()+"&bu="+e}},menuClick:function(t,e,i){this.menuCurIndex=t;var a={};a.id=e,a.sid=this.sid,console.log(a),this.getGoodsList(a)},goCombo:function(t){this.comboData=t,this.ToggleComboShow()},showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},createOrder:function(){var t=this,e=E.a.get("_lac_k_");E.a.get("_lac_ated_"),E.a.get("_lac_op_");if(e)t.GoGoodsPay();else{var i=E.a.get("_lac_ap_");i?this.$router.push({name:"login",params:{apid:i}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}},GoGoodsPay:function(){var t=this,e="";t.loading=!0,this.cartList.forEach(function(t,i){var a="";a+=t[1].gt+","+t[1].id+","+t[0].id+",",e+=a.slice(0,a.length-1)+","+t[0].count+",;"});var i=e.slice(0,e.length-1),a=E.a.get("_lac_k_"),s=t.sid;console.log(s+"=cinemaId"),console.log("gs======"+i);var n="/general_api/api/auth/createOrder?dss=150&tbn="+t.tableNum+"&gs="+i+"&sid="+s+"&token="+a+"&ts="+Date.parse(new Date);fetch(n).then(function(t){return t.json()}).then(function(e){if(console.log(e),e.available){t.loading=!1;var i=e.data[0],a=e.data[1];document.cookie="goodsOrderNo="+a[0].order_no+";path=/",document.cookie="goosdOrderTnum="+i.tnum+";path=/",location.href="/general_api/tcss/index/?#/ConfirmGoodsOrder/ScanGoods"}else t.loading=!1})},getCookie:function(t){for(var e=document.cookie,i=e.split("; "),a=0;a<i.length;a++){var s=i[a].split("=");if(s[0]==t)return s[1]}return""},godo_my:function(){var t=E.a.get("_lac_k_");if(t)this.$router.push({name:"personalCenter",params:{st:"scan"}});else{var e=E.a.get("_lac_ap_");e?this.$router.push({name:"login",params:{apid:e}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}},GetStoreList:function(){var t=this,e="/general_api/api/scanStoreList?ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){t.CheckLogin(),e?(t.StoreList=e,t.sid||(t.sid=e[0].id)):t.showTip("获取门店失败")})},select_store:function(t){this.sid=t.target.value;var e={};e.id=this.firCatId,e.sid=this.sid,E.a.set("s_id",e.sid),this.getGoodsList(e)}}),watch:{firCatId:function(){if(console.log("scan order foods="+this.firCatId),-1!==this.firCatId){var t={};t.id=this.firCatId,t.sid=this.sid,this.getGoodsList(t)}}},components:{cartControl:Be,shopCart:Ke,comboCart:Ye}},hi=vi,gi=(i("7dfb"),Object(p["a"])(hi,mi,pi,!1,null,null,null)),fi=gi.exports,Ci=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{background:"#EFEFF4",width:"100%",height:"100%"}},[i("div",{staticClass:"bg"}),"ScanGoods"==t.ScanGoods?i("div",{staticStyle:{"padding-bottom":"2.8rem"}},[i("div",{staticClass:"confirmGoodsO-top"},[t._v("当前桌号 "),i("span",[t._v(t._s(t.tableNum))])]),i("div",{staticClass:"store-weui-panel weui-panel weui-panel_access",staticStyle:{width:"100%","margin-top":".2rem"}},[i("div",{staticClass:"weui-panel__bd",staticStyle:{"margin-bottom":".2rem"}},[i("p",{staticClass:"alreadyGoods"},[t._v("已点餐品")]),t._l(t.orderDetails,function(e){return i("div",{staticClass:"weui-media weui-media-box_appmsg",staticStyle:{"margin-left":".3rem",padding:".3rem .3rem .3rem 0"}},[i("div",{staticClass:"weui-media-box__hd",staticStyle:{width:"1rem",height:"1rem"}},[i("img",{staticClass:"weui-media-box__thumb",attrs:{src:"http://pe1s.static.pdr365.com/"+e.pic_url,alt:""}})]),i("div",{staticClass:"weui-media-box__bd",staticStyle:{"text-align":"left"}},[i("div",{staticClass:"select-goods-info"},[i("div",{staticClass:"select-goods-info-title",staticStyle:{"font-size":".28rem","font-weight":"bold"}},[t._v(t._s(e.goods_name))]),i("div",{staticClass:"select-goods-info-vol",staticStyle:{"font-size":".2rem",color:"#8D9398"}},[t._v(t._s(e.goods_name))]),i("div",{staticClass:"select-goods-info-price",staticStyle:{"margin-top":".1rem"}},[i("span",{staticStyle:{"font-size":".24rem",color:"#FF6231","font-weight":"bold"}},[t._v("x "+t._s(e.buy_num))])])])]),i("div",{staticClass:"store-goods-cal"},[i("p",{staticStyle:{"font-size":".28rem",color:"#000","font-weight":"bold"}},[t._v("¥"+t._s(e.unit_amount/100))])])])}),i("p",{staticClass:"xiaoji"},[t._v("总价 "),i("span",[t._v(" ¥"+t._s(t.data.total_amount/100))])])],2)]),i("div",{staticClass:"remark-box"},[i("span",[t._v("备注")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.o_rem,expression:"o_rem"}],attrs:{type:"text",placeholder:"口味、偏好等要求"},domProps:{value:t.o_rem},on:{input:function(e){e.target.composing||(t.o_rem=e.target.value)}}})]),i("section",{staticClass:"myweui-cells weui-cells"},[i("a",{staticClass:"weui-cell myweui-cell cell-height-88 weui-cell_access",staticStyle:{color:"#2c3e50"},attrs:{href:"javascript:;"},on:{click:t.goCoupons}},[t._m(0),t.o_c_1000?i("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":".3rem"}},[t._v(t._s(t.o_c_1000.batch_title))]):i("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":".3rem"}},[t._v("点击选择")])])]),t.CardData?i("section",{staticClass:"myweui-cells weui-cells_checkbox",staticStyle:{"margin-top":".3rem"}},[t.CardData?i("label",{staticClass:"weui-cell myweui-cell cell-height-88 weui-check__label",staticStyle:{background:"#fff"},attrs:{for:"x10"}},[i("div",{staticClass:"weui-cell__bd"},[i("p",{staticStyle:{"font-size":"15px"}},[t._v("会员余额支付（余额："+t._s(t.CardData[0].balance/100)+"元）")])]),t._m(2)]):t._e(),t._m(3)]):i("section",{staticClass:"vip-card"},[i("div",{staticClass:"weui-cells myweui-cells",on:{click:t.GoKaika}},[t._m(1)])]),i("div",{staticClass:"make-order-container clear",staticStyle:{bottom:"0px","border-top":"1px solid #e5e9ec"}},[i("div",{staticClass:"make-order-left"},[t._m(4),i("div",{staticClass:"make-order-total-price",staticStyle:{"font-size":".4rem","font-weight":"bold",color:"#000","margin-left":".2rem"}},[t._v("¥ "+t._s(t.data.pay_amount/100))])]),i("div",{staticClass:"make-order-btn",staticStyle:{"font-size":".28rem","font-weight":"bold"},on:{click:t.godo_ScangoodOrder}},[t._v("确认并支付")])])]):t._e(),"tcssGoods"==t.ScanGoods?i("div",{staticStyle:{"padding-bottom":"2.8rem"}},[i("div",{staticClass:"store-weui-panel weui-panel weui-panel_access"},[i("div",{staticClass:"weui-panel__bd"},[t._l(t.orderDetails,function(e){return i("div",{staticClass:"weui-media-box weui-media-box_appmsg"},[i("div",{staticClass:"weui-media-box__hd"},[i("img",{staticClass:"weui-media-box__thumb",attrs:{src:"http://pe1s.static.pdr365.com/"+e.pic_url,alt:""}})]),i("div",{staticClass:"weui-media-box__bd"},[i("div",{staticClass:"select-goods-info"},[i("div",{staticClass:"select-goods-info-title"},[t._v(t._s(e.goods_name))]),i("div",{staticClass:"select-goods-info-vol"},[t._v(t._s(e.goods_name))]),i("div",{staticClass:"select-goods-info-price"},[i("span",[t._v(t._s(e.pay_amount/100)+"元")])])])]),i("div",{staticClass:"store-goods-cal"},[i("p",[t._v("已售"+t._s(e.id))]),i("div",{staticClass:"select-goods-cal-item"},[t._v("\n                            *"+t._s(e.buy_num)+"\n                            ")])])])}),t._m(5)],2)]),i("section",{staticClass:"myweui-cells weui-cells"},[i("a",{staticClass:"weui-cell myweui-cell cell-height-88 weui-cell_access",staticStyle:{color:"#2c3e50"},attrs:{href:"javascript:;"},on:{click:t.goCoupons}},[t._m(6),t.o_c_1000?i("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":".3rem"}},[t._v(t._s(t.o_c_1000.batch_title))]):i("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":".3rem"}},[t._v("点击选择")])]),i("div",{staticClass:"weui-cell myweui-cell cell-height-88"},[t._m(7),i("div",{staticClass:"weui-cell__ft",staticStyle:{color:"#00c203"}},[t._v(t._s(t.data.total_amount/100)+"元")])])]),t.CardData?t._e():i("section",{staticClass:"vip-card"},[i("div",{staticClass:"weui-cells myweui-cells",on:{click:t.GoKaika}},[t._m(8)])]),i("section",{staticClass:"myweui-cells weui-cells_checkbox",staticStyle:{"margin-top":".3rem"}},[t.CardData?i("label",{staticClass:"weui-cell myweui-cell cell-height-88 weui-check__label",staticStyle:{background:"#fff"},attrs:{for:"x10"}},[i("div",{staticClass:"weui-cell__bd"},[i("p",{staticStyle:{"font-size":"15px"}},[t._v("会员余额支付（余额："+t._s(t.CardData[0].balance/100)+"元）")])]),t._m(9)]):t._e(),t._m(10)]),i("div",{staticClass:"confirm-btn-container",staticStyle:{position:"fixed",bottom:"0","margin-top":"0","z-index":"98"}},[i("div",{staticClass:"btn-container"},[i("div",{staticClass:"confirm-btn-total-price",on:{click:t.isShow}},[i("p",[i("span",[t._v("合计:")]),i("span",{staticStyle:{color:"#00c203"}},[t._v(t._s(t.data.pay_amount/100)+"元")]),i("span",{staticClass:"iconfont icon-triangle-up",class:t.trangle?"trangle-down":"trangle-up",staticStyle:{"font-size":".26rem",color:"#BCBEC1"}})])]),i("div",{staticClass:"confirm-btn"},[i("a",{staticClass:"weui-btn weui-btn_primary",staticStyle:{"font-size":"0.34rem",color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.godo_goodOrder}},[t._v("确认支付")])])]),i("div",{staticClass:"order-details-card",staticStyle:{display:"none"}},[i("div",{staticClass:"order-details-card-title"},[i("p",[t._v("结算明细")]),i("div",{staticClass:"cancel-card-show",on:{click:t.isShow}},[t._v("取消")])]),i("div",{staticClass:"order-details-card-con"},[t._m(11),i("div",{staticClass:"card-con-item"},[t._l(t.data.items,function(e,a){return i("p",{key:a,staticClass:"color-a9"},[i("span",[t._v(t._s(e.goods_name))]),i("span",[t._v(t._s(e.unit_amount/100)+"元 X "+t._s(e.buy_num))])])}),t.offer_show?i("p",{staticClass:"color-a9"},[i("span",[t._v("优惠券")]),i("span",[t._v("减："+t._s(t.offer_amount)+"元")])]):t._e()],2)])])])]):t._e(),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask",staticStyle:{"z-index":"100"}}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),i("div",{staticClass:"weui-mask",staticStyle:{display:"none","z-index":"88"},attrs:{id:"iosMask"},on:{click:t.isShow}}),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(12)]):t._e(),t.Pwd_tip?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog1"}},[i("div",{staticClass:"weui-mask",staticStyle:{"z-index":"100"}}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v("请输入会员卡密码")]),i("div",{staticClass:"weui-dialog__bd nified"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.Pwd,expression:"Pwd"}],staticStyle:{border:"1px solid #ccc",width:"70%",height:".6rem","margin-bottom":".3rem"},attrs:{type:"password",name:""},domProps:{value:t.Pwd},on:{input:function(e){e.target.composing||(t.Pwd=e.target.value)}}})]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:t.PwdTip}},[t._v("取消")]),i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:t.setPwd}},[t._v("确定")])])])]):t._e()])},wi=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell__bd"},[i("p",[t._v("优惠券")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"weui-cell myweui-cell vip-cell weui-cell_access",attrs:{href:"javascript:;"}},[i("div",{staticClass:"weui-cell__bd"},[i("div"),i("p",{staticClass:"vip-cell-title",staticStyle:{color:"#2c3e50"}},[t._v("腾讯影院会员卡")]),i("p",{staticClass:"vip-cell-con"},[t._v("开卡卖品最低"),i("span",[t._v("25元起")])])]),i("div",{staticClass:"weui-cell__ft"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell__ft"},[i("input",{staticClass:"weui-check",attrs:{type:"radio",name:"radio1",id:"x10",checked:"checked"}}),i("span",{staticClass:"weui-icon-checked",staticStyle:{transform:"scale(.8)"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{staticClass:"weui-cell myweui-cell cell-height-88 weui-check__label",staticStyle:{background:"#fff"},attrs:{for:"x20"}},[i("div",{staticClass:"weui-cell__bd"},[i("p",{staticStyle:{"font-size":"15px"}},[t._v("微信支付")])]),i("div",{staticClass:"weui-cell__ft"},[i("input",{staticClass:"weui-check",attrs:{type:"radio",name:"radio1",id:"x20"}}),i("span",{staticClass:"weui-icon-checked",staticStyle:{transform:"scale(.8)"}})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{position:"relative",width:"0.96rem",height:"0.5rem","text-align":"center"}},[i("i",{staticClass:"iconfont icon-ai66",staticStyle:{"font-size":".5rem",color:"#00c203","line-height":".96rem"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-media-box weui-media-box_text"},[i("div",{staticClass:"weui-media-box__desc",staticStyle:{display:"flex","justify-content":"space-between"}},[i("div",{staticClass:"store-order-slogan"},[i("i",{staticClass:"iconfont icon-duigou"}),i("span",[t._v("随时退、过期退")])])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell__bd"},[i("p",[t._v("优惠券")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell__bd"},[i("p",[t._v("总价")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"weui-cell myweui-cell vip-cell weui-cell_access",attrs:{href:"javascript:;"}},[i("div",{staticClass:"weui-cell__bd"},[i("div"),i("p",{staticClass:"vip-cell-title",staticStyle:{color:"#2c3e50"}},[t._v("腾讯影院会员卡")]),i("p",{staticClass:"vip-cell-con"},[t._v("开卡卖品最低"),i("span",[t._v("25元起")])])]),i("div",{staticClass:"weui-cell__ft"})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell__ft"},[i("input",{staticClass:"weui-check",attrs:{type:"radio",name:"radio1",id:"x10",checked:"checked"}}),i("span",{staticClass:"weui-icon-checked",staticStyle:{transform:"scale(.8)"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{staticClass:"weui-cell myweui-cell cell-height-88 weui-check__label",staticStyle:{background:"#fff"},attrs:{for:"x20"}},[i("div",{staticClass:"weui-cell__bd"},[i("p",{staticStyle:{"font-size":"15px"}},[t._v("微信支付")])]),i("div",{staticClass:"weui-cell__ft"},[i("input",{staticClass:"weui-check",attrs:{type:"radio",name:"radio1",id:"x20"}}),i("span",{staticClass:"weui-icon-checked",staticStyle:{transform:"scale(.8)"}})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card-con-title"},[i("span",[t._v("商品")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],bi={data:function(){return{Pwd_tip:!1,tnum:"",tableNum:"",on:"",data:"",orderDetails:"",other:"",tip_msg:"",loading:!0,CardData:"",Pwd:"",ScanGoods:"",order_no:"",o_c_1000:"",offer_amount:"",trangle:!1,offer_show:!1,o_rem:""}},beforeRouteEnter:function(t,e,i){document.title="订单结算",i()},computed:{},created:function(){var t=sessionStorage.getItem("o_c_1000");t&&(this.o_c_1000=JSON.parse(t))},mounted:function(){this.ScanGoods=this.$route.params.Goods,this.on=E.a.get("goodsOrderNo"),this.tnum=E.a.get("goosdOrderTnum"),this.tableNum=E.a.get("tableNum"),this.godo_Order(),this.GetAccountCard()},methods:Object(l["a"])({},Object(d["mapActions"])(["ClearCart"]),{showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},godo_Order:function(){var t=this,e=this,i=E.a.get("_lac_k_"),a=e.o_c_1000.id||"",s="/general_api/api/auth/ScanOrderDetais?token="+i+"&on="+this.on+"&coupon_id="+a+"&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(i){i.available?(e.loading=!1,e.data=i.data,e.order_no=i.data.order_no,e.orderDetails=i.data.items,null===i.pref_coupon?sessionStorage.removeItem("o_c_1000"):""===i.pref_coupon?(weui.topTips("当前优惠券无法使用",5e3),sessionStorage.removeItem("o_c_1000"),t.o_c_1000=""):(e.offer_amount=i.pref_coupon.prep_amount/100,e.offer_show=!0)):0==i.available&&"user_no_login"==i.messages[0]?(e.loading=!1,e.showTip("用户未登录")):(e.showTip(i.messages[0]),e.loading=!1)})},GetAccountCard:function(){var t=this,e=E.a.get("_lac_k_"),i="/general_api/api/auth/GetAccountCard?token="+e+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){e.available&&(t.CardData=e.obj),t.loading=!1})},PwdTip:function(){var t=this;t.Pwd_tip=!1},godo_ScangoodOrder:function(){var t=this,e=this;e.loading=!0;var i=e.tnum,a=E.a.get("_lac_k_");if("-1"!=e.CardData&&e.CardData)if(document.getElementById("x20").checked){var s=e.o_c_1000.id||"",n=e.o_rem;n||(n=""),n=encodeURIComponent(encodeURIComponent(n));r="/general_api/api/auth/GetWxObj?ct=201101&token="+a+"&o_rem="+n+"&coupon_id="+s+"&tnum="+i+"&ts="+Date.parse(new Date);fetch(r).then(function(t){return t.json()}).then(function(t){console.log(t),-1==t.code?(e.loading=!1,e.showTip(t.text)):0==t.code?(e.loading=!1,e.other=t.other,e.onBridgeReady()):0==t.available&&"user_no_login"==t.messages[0]&&e.showTip("用户未登录")})}else e.loading=!1,e.Pwd_tip=!0;else{var o=e.o_c_1000.id||"",c=e.o_rem;c||(c=""),c=encodeURIComponent(encodeURIComponent(c));var r="/general_api/api/auth/GetWxObj?ct=201101&tnum="+i+"&coupon_id="+o+"&token="+a+"&o_rem="+c+"&ts="+Date.parse(new Date);fetch(r).then(function(t){return t.json()}).then(function(i){console.log(i),-1==i.code?(e.loading=!1,e.showTip(i.text)):0==i.code?(e.loading=!1,e.other=i.other,e.onBridgeReady(),t.ClearCart()):0==i.available&&"user_no_login"==i.messages[0]&&(e.loading=!1,e.showTip("用户未登录"))})}},setPwd:function(){var t=this,e=E.a.get("_lac_k_"),i=t.tnum,a=t.o_c_1000.id||"",s=t.o_rem;s||(s=""),s=encodeURIComponent(encodeURIComponent(s));var n="/general_api/api/auth/GetWxObj?ct=101001&token="+e+"&o_rem="+s+"&coupon_id="+a+"&tnum="+i+"&pwd="+t.Pwd+"&unicode="+t.CardData[0].mc_num+"&ts="+Date.parse(new Date);t.loading=!0,t.Pwd_tip=!1,fetch(n).then(function(t){return t.json()}).then(function(e){t.loading=!1,"-1"==e.code?(t.loading=!1,t.Pwd_tip=!1,t.showTip(e.text),t.Pwd=""):"0"==e.code?(t.loading=!1,t.Pwd_tip=!1,t.showTip("支付成功"),t.Pwd="",setTimeout(function(){"tcssGoods"==t.ScanGoods?location.href="/general_api/tcss/index#/myTicket":location.href="/general_api/tcss/index#/ScanGoodsOrder/"+t.on+"/"+t.tableNum},100)):0==e.available&&"user_no_login"==e.messages[0]?(t.Pwd_tip=!1,t.Pwd="",t.showTip("用户未登录")):0==e.available&&"trade_status_invalid"==e.messages[0]&&(t.Pwd_tip=!1,t.Pwd="",t.showTip("请勿重复支付"))})},godo_goodOrder:function(){var t=this,e=this;e.loading=!0;var i=e.tnum,a=E.a.get("_lac_k_");if("-1"!=e.CardData&&e.CardData)if(document.getElementById("x20").checked){var s=e.o_c_1000.id||"";o="/general_api/api/auth/GetWxObj?ct=201101&token="+a+"&tnum="+i+"&coupon_id="+s+"&ts="+Date.parse(new Date);fetch(o).then(function(t){return t.json()}).then(function(t){console.log(t),-1==t.code?(e.loading=!1,e.showTip(t.text)):0==t.code?(e.loading=!1,e.other=t.other,e.onBridgeReady()):0==t.available&&"user_no_login"==t.messages[0]&&e.showTip("用户未登录")})}else e.loading=!1,e.Pwd_tip=!0;else{var n=e.o_c_1000.id||"",o="/general_api/api/auth/GetWxObj?ct=201101&tnum="+i+"&coupon_id="+n+"&token="+a+"&ts="+Date.parse(new Date);fetch(o).then(function(t){return t.json()}).then(function(i){console.log(i),-1==i.code?(e.loading=!1,e.showTip(i.text)):0==i.code?(e.loading=!1,e.other=i.other,e.onBridgeReady(),t.ClearCart()):0==i.available&&"user_no_login"==i.messages[0]&&(e.loading=!1,e.showTip("用户未登录"))})}},onBridgeReady:function(){var t=this,e=t.other;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:"MD5",paySign:e.paySign},function(e){"get_brand_wcpay_request:ok"==e.err_msg?"tcssGoods"==t.ScanGoods?location.href="/general_api/tcss/index#/myTicket":location.href="/general_api/tcss/index#/ScanGoodsOrder/"+t.on+"/"+t.tableNum:"get_brand_wcpay_request:cancel"==e.err_msg?alert("您取消了付款"):"get_brand_wcpay_request:fail"==e.err_msg&&alert("支付失败")})},GoKaika:function(){location.href="/general_api/tcss/index/?#/purchasingCard/purchasing"},isShow:function(){this.trangle=!this.trangle;var t=$("#iosMask"),e=$(".order-details-card");this.trangle?(t.fadeIn(200),e.slideDown(400)):(t.fadeOut(200),e.slideUp(400))},goCoupons:function(){var t=this.order_no,e=this.ScanGoods;this.$router.push({name:"couponsForGoods",params:{order_no:t,Goods:e}})}})},yi=bi,ki=(i("ba94"),Object(p["a"])(yi,Ci,wi,!1,null,null,null)),xi=ki.exports,Si=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"bg"}),t._m(0),i("div",{staticClass:"confirmGoodsO-top"},[t._v("当前桌号 "),i("span",[t._v(t._s(t.tableNum))])]),i("div",{staticClass:"store-weui-panel weui-panel weui-panel_access",staticStyle:{width:"100%","margin-top":".2rem"}},[i("div",{staticClass:"weui-panel__bd",staticStyle:{"margin-bottom":".2rem"}},[i("p",{staticClass:"alreadyGoods"},[t._v("已点餐品")]),t._l(t.orderDetails,function(e){return i("div",{staticClass:"weui-media weui-media-box_appmsg",staticStyle:{"margin-left":".3rem",padding:".3rem .3rem .3rem 0"}},[i("div",{staticClass:"weui-media-box__hd",staticStyle:{width:"1rem",height:"1rem"}},[i("img",{staticClass:"weui-media-box__thumb",attrs:{src:"http://pe1s.static.pdr365.com/"+e.pic_url,alt:""}})]),i("div",{staticClass:"weui-media-box__bd",staticStyle:{"text-align":"left"}},[i("div",{staticClass:"select-goods-info"},[i("div",{staticClass:"select-goods-info-title",staticStyle:{"font-size":".28rem","font-weight":"bold"}},[t._v(t._s(e.goods_name))]),i("div",{staticClass:"select-goods-info-vol",staticStyle:{"font-size":".2rem",color:"#8D9398"}},[t._v(t._s(e.goods_name))]),i("div",{staticClass:"select-goods-info-price",staticStyle:{"margin-top":".1rem"}},[i("span",{staticStyle:{"font-size":".24rem",color:"#FF6231","font-weight":"bold"}},[t._v("x "+t._s(e.buy_num))])])])]),i("div",{staticClass:"store-goods-cal"},[i("p",{staticStyle:{"font-size":".28rem",color:"#000","font-weight":"bold"}},[t._v("¥"+t._s(e.unit_amount/100))])])])}),i("p",{staticClass:"xiaoji"},[t._v("小计 "),i("span",[t._v(" ¥"+t._s(t.data.pay_amount/100))])])],2)]),t._m(1)])},Di=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ScanOrder-top"},[i("img",{staticStyle:{width:"100%",height:"auto"},attrs:{src:"http://pe1s.static.pdr365.com/1535373165177.jpg"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"erCode"},[i("img",{attrs:{src:"http://pe1s.static.pdr365.com/WechatIMG7459.jpeg"}}),i("p",[t._v('关注"好时光部落"公众号领取更多优惠')])])}],Ti={data:function(){return{tableNum:"",orderDetails:"",data:"",on:""}},computed:{count:function(){return 0}},mounted:function(){this.tableNum=this.$route.params.tableNum,this.on=this.$route.params.on,this.godo_Order()},methods:{godo_Order:function(){var t=this,e=E.a.get("_lac_k_"),i="/general_api/api/auth/ScanOrderDetais?token="+e+"&on="+t.on+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){e.available&&(t.data=e.data,t.orderDetails=e.data.items)})}}},Ei=Ti,ji=(i("71e3"),Object(p["a"])(Ei,Si,Di,!1,null,null,null)),Oi=ji.exports,Ii=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._m(0),i("div",{staticClass:"login-mid"},[i("form",{staticClass:"form-wrapper",attrs:{autocomplete:"off",method:"POST",id:"login-formWrapper"}},[i("div",{staticClass:"login-mid-form"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.UserPhone,expression:"UserPhone"}],staticClass:"text-input",attrs:{type:"text",name:"username",maxlength:"60",placeholder:"请输入手机号",value:"",id:"mobile"},domProps:{value:t.UserPhone},on:{input:function(e){e.target.composing||(t.UserPhone=e.target.value)}}})]),i("div",{staticClass:"login-mid-form login-mid-form-code"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.ValidateCode,expression:"ValidateCode"}],staticClass:"text-input-code",staticStyle:{"margin-left":"0"},attrs:{type:"number",id:"img_validate_code",name:"verifycode",value:"",placeholder:"请输入验证码",autocomplete:"off",maxlength:"6"},domProps:{value:t.ValidateCode},on:{input:function(e){e.target.composing||(t.ValidateCode=e.target.value)}}}),i("Button",{staticStyle:{float:"right",display:"inline-block","margin-top":".3rem",border:"none","font-size":"0.28rem"},on:{click:t.godo_code}},[t._v(t._s(t.time))])],1),i("div",{staticClass:"login-box"},[i("div",{staticClass:"login",on:{click:t.godo_login}},[t._v("登录")])])])]),t._m(1),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v(t._s(t.loading))])])]):t._e(),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e()])},$i=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login-top"},[i("img",{staticClass:"login-top-logo",attrs:{src:"http://pe1s.static.pdr365.com/timg.jpeg"}}),i("p",{staticClass:"login-top-title"},[t._v("欢迎来到腾讯好时光")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"login-hint"},[t._v("点击登录，即代表已阅读并同意"),i("span",[t._v("《好时光影院相关条例》")])])}],Li={data:function(){return{loading:"",login:!1,tip_msg:"",UserPhone:"",ValidateCode:"",time:"获取验证码",num:"",apid:""}},beforeRouteEnter:function(t,e,i){document.title="腾讯好时光",i()},created:function(){this.apid=this.$route.params.apid},methods:{back:function(){router.go(-1)},showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},showlogin:function(t,e){var i=this;i.loading=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.loading=""},e))},godo_code:function(){var t=this,e=t.UserPhone,i=/^[1][3,4,5,7,8,9][0-9]{9}$/;if(i.test(e)){t.showlogin("正在发送验证码",1e3);var a="/general_api/api/MessageCode?p="+e+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){e.available&&(t.loading=!1)}),t.num=3e5,t.daojishi(t.num)}else t.showTip("请输入正确的手机号")},daojishi:function(t){var e=this;if(0!=e.num){var i=t/1e3;e.time=i+" S",e.num=t,setTimeout(function(){t-=1e3,e.daojishi(t)},1e3)}else{var a="发送验证码";e.time=a}},godo_login:function(){var t=this,e=t.UserPhone,i=t.ValidateCode,a=t.apid,s="/general_api/api/Login?p="+e+"&code="+i+"&apid="+a+"&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(e){e.available?(document.cookie="_lac_k_="+e.data,location.href="/general_api/tcss/index#/purchasingCard/Scanpurchasing"):t.showTip(e.messages[0])}),t.login=!1}}},Pi=Li,Ri=(i("2cc3"),Object(p["a"])(Pi,Ii,$i,!1,null,null,null)),Gi=Ri.exports,Mi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"text-align":"center"}},[t._m(0),i("div",{staticClass:"purchasingcard-mid"},[i("ul",{staticClass:"purchasingcard-mid-ul"},t._l(t.RechargeData,function(e,a){return-1!=t.RechargeData?i("li",{class:t.HId==e.id?"purchasingcard-mid-li-true":"purchasingcard-mid-li",on:{click:function(i){t.godo_choose(e.id,a)}}},[i("p",{class:t.HId==e.id?"purchasingcard-mid-li-grade-true":"purchasingcard-mid-li-grade"},[t._v(t._s(e.h_name))]),i("p",{class:t.HId==e.id?"purchasingcard-mid-li-introduce-true":"purchasingcard-mid-li-introduce"},[t._v(t._s(e.cr_type_desc))]),i("p",{class:t.HId==e.id?"purchasingcard-mid-li-price-true":"purchasingcard-mid-li-price"},[t._v("¥"+t._s(e.getpay/100))]),t.HId==e.id?i("img",{staticClass:"purchasingcard-mid-li-true-img",attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/dot_icon.png"}}):t._e()]):t._e()}))]),i("div",{staticClass:"PurchasingCard-box"},[i("div",{staticClass:"PurchasingCard",on:{click:t.SshowNum}},[i("span",{staticClass:"PurchasingTitle"},[t._v("设置支付密码")]),i("span",{staticClass:"PurchasingHint"},[t._v("密码用于消费操作时，验证您的身份")]),""!=t.pwd?i("span",{staticClass:"shezhi"},[t._v("已设置")]):t._e(),i("div",{staticClass:"vertical2"})])]),t._m(1),i("div",{staticClass:"purchase-box"},[i("div",{staticClass:"purchase",on:{click:t.godo_recharge}},[t._v("立即开通")])]),t.one?i("div",{staticClass:"purchasing-num-box"},[i("div",{staticClass:"purchasing-num-bgc",on:{click:function(e){t.one=!1}}}),i("div",{staticClass:"purchasing-num"},[i("div",{staticClass:"purchasing-num-top"},[i("img",{staticStyle:{float:"left",display:"inline-block",width:".4rem","margin-left":".2rem","margin-top":".15rem"},attrs:{src:"http://pe1s.static.pdr365.com/chahao.png"},on:{click:function(e){t.one=!1}}}),i("p",[t._v("设置会员卡支付密码")])]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.Ticket_one,expression:"Ticket_one"}],staticClass:"purchasing-num-input",attrs:{type:"num",placeholder:"请输入6位数字密码",readonly:"readonly",maxlength:"6",clearable:""},domProps:{value:t.Ticket_one},on:{input:function(e){e.target.composing||(t.Ticket_one=e.target.value)}}}),i("p",{staticClass:"purchasing-num-p"},[t._v("支付密码用于支付操作时，验证您的身份")]),i("div",{staticClass:"keyboard",staticStyle:{background:"#fff"},on:{click:function(e){return e.stopPropagation(),t.TicketKeyPress(e)}}},[t._m(2),t._m(3),t._m(4),t._m(5)])])]):t._e(),t.two?i("div",{staticClass:"purchasing-num-box"},[i("div",{staticClass:"purchasing-num-bgc",on:{click:function(e){t.two=!1}}}),i("div",{staticClass:"purchasing-num"},[i("div",{staticClass:"purchasing-num-top"},[i("img",{staticStyle:{float:"left",display:"inline-block",width:".4rem","margin-left":".2rem","margin-top":".15rem"},attrs:{src:"http://pe1s.static.pdr365.com/chahao.png"},on:{click:function(e){t.two=!1}}}),i("p",[t._v("确认会员卡支付密码")])]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.Ticket_two,expression:"Ticket_two"}],staticClass:"purchasing-num-input",attrs:{type:"num",placeholder:"请输入6位数字密码",readonly:"readonly",maxlength:"6",clearable:""},domProps:{value:t.Ticket_two},on:{input:function(e){e.target.composing||(t.Ticket_two=e.target.value)}}}),i("p",{staticClass:"purchasing-num-p"},[t._v("请在此输入您的支付密码")]),i("div",{staticClass:"keyboard",staticStyle:{background:"#fff"},on:{click:function(e){return e.stopPropagation(),t.TicketTwo(e)}}},[t._m(6),t._m(7),t._m(8),t._m(9)])])]):t._e(),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v(t._s(t.loading))])])]):t._e()])},Bi=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"purchasingcard-top"},[i("p",{staticClass:"purchasingcard-top-title"},[t._v("选择等级")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"purchasingcard-bot"},[i("div",{staticClass:"purchasingcard-bot-title"},[t._v("\n\t\t\t\t支付方式\n\t\t\t")]),i("div",{staticClass:"purchasingcard-bot-pay"},[i("div",[i("img",{attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/wechat_pay_icon.png"}}),i("p",[t._v("微信支付")])]),i("i",{staticClass:"weui-icon-success weui-icon_msg",staticStyle:{"font-size":".4rem","margin-right":".3rem"}})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"1"}},[t._v("1")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"2"}},[t._v("2")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"3"}},[t._v("3")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"4"}},[t._v("4")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"5"}},[t._v("5")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"6"}},[t._v("6")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"7"}},[t._v("7")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"8"}},[t._v("8")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"9"}},[t._v("9")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"D"}},[t._v("删除")]),i("div",{staticClass:"numInput key-cell",attrs:{"data-num":"0"}},[t._v("0")]),i("div",{staticClass:"numInput key-confirm",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"S"}},[t._v("确认")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"1"}},[t._v("1")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"2"}},[t._v("2")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"3"}},[t._v("3")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"4"}},[t._v("4")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"5"}},[t._v("5")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"6"}},[t._v("6")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"7"}},[t._v("7")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"8"}},[t._v("8")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"9"}},[t._v("9")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"D"}},[t._v("删除")]),i("div",{staticClass:"numInput key-cell",attrs:{"data-num":"0"}},[t._v("0")]),i("div",{staticClass:"numInput key-confirm",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"S"}},[t._v("确认")])])}],Ni={data:function(){return{loading:"",tip_msg:"",synopsis:"synopsis-none",showBtn:"showBtn",RechargeData:"",id:"",HId:"",Num:"",Ticket_one:"",Ticket_two:"",pwd:"",S:"",one:!1,two:!1,other:""}},beforeRouteEnter:function(t,e,i){document.title="购买会员",i()},created:function(){this.GradeList()},methods:{SshowNum:function(){this.one=!0},showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},showlogin:function(t,e){var i=this;i.loading=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.loading=""},e))},back:function(){router.go(-1)},GradeList:function(){var t=this,e="/general_api/api/CardGradeList?ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){t.RechargeData=e.obj,t.HId=e.obj[0].id,t.showlogin("正在加载~",100)})},godo_choose:function(t,e){for(var i=this,a=i.RechargeData,s=0;s<a.length;s++)s==e&&(i.HId=a[e].id);i.id=t},godo_recharge:function(){var t=this,e=this;e.showlogin("请稍等~",1300);var i=e.pwd,a=e.HId;if(""!=i){var s="/general_api/api/createCardRechargeOrder?mc_pwd="+i+"&h_id="+a+"&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(i){if(console.log(i),i.available){console.log(i),e.showlogin("创建成功~",1300);var a="/general_api/api/GetWxObj?ct=201101&tnum="+i.obj.data.tnum;fetch(a).then(function(t){return t.json()}).then(function(i){console.log(i),-1==i.code?t.showTip(i.text):0==i.code&&(e.other=i.other,e.onBridgeReady())})}else t.showTip(i.messages[0])})}else this.showTip("请设置6位数的密码~",1e3)},onBridgeReady:function(){var t=this.other;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:"MD5",paySign:t.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg?console.log("支付成功"):"get_brand_wcpay_request:cancel"==t.err_msg?console.log("支付过程中用户取消"):"get_brand_wcpay_request:fail"==t.err_msg&&console.log("支付失败")})},TicketKeyPress:function(t){var e=t.target.dataset.num;if(-1==e)return!1;switch(String(e)){case".":this.TicketDecimalPoint();break;case"D":this.TicketDeleteKey();break;case"C":this.TicketClearKey();break;case"S":this.TicketConfirmKey();break;default:this.TicketNumberKey(e);break}},TicketDecimalPoint:function(){if(this.Ticket_one.indexOf(".")>-1)return!1;this.Ticket_one.length?this.Ticket_one=this.Ticket_one+".":this.Ticket_one="0."},TicketDeleteKey:function(){var t=this.Ticket_one;if(!t.length)return!1;this.Ticket_one=t.substring(0,t.length-1)},TicketClearKey:function(){this.Ticket_one=""},TicketConfirmKey:function(){var t=this.Ticket_one;if(!t.length)return this.showTip("您目前未输入~",1e3),!1;6==t.length?(this.pwd=t,this.one=!1,this.two=!0):this.showTip("请设置6位数的密码~",1e3)},TicketNumberKey:function(t){console.log("aaa");var e=this.Ticket_one;if(e.length<6){if(e.indexOf(".")>-1&&e.substring(e.indexOf(".")+1).length<2&&(this.Ticket_one=e+t),!(e.indexOf(".")>-1))if(0==t&&0==e.length)this.Ticket_one="0.";else{if(e.length&&0===Number(e.charAt(0)))return;this.Ticket_one=e+t}}else this.showTip("最多只能设置6位数的密码~",1e3)},TicketTwo:function(t){var e=t.target.dataset.num;if(-1==e)return!1;switch(String(e)){case".":this.aTicketDecimalPoint();break;case"D":this.aTicketDeleteKey();break;case"C":this.aTicketClearKey();break;case"S":this.aTicketConfirmKey();break;default:this.aTicketNumberKey(e);break}},aTicketDecimalPoint:function(){if(this.Ticket_two.indexOf(".")>-1)return!1;this.Ticket_two.length?this.Ticket_two=this.Ticket_two+".":this.Ticket_two="0."},aTicketDeleteKey:function(){var t=this.Ticket_two;if(!t.length)return!1;this.Ticket_two=t.substring(0,t.length-1)},aTicketClearKey:function(){this.Ticket_two=""},aTicketConfirmKey:function(){var t=this.Ticket_two;if(!t.length)return this.showTip("您目前未输入~",1e3),!1;if(6==t.length){if(this.pwd!=t)return void this.showTip("两次输入的密码不一致~",1e3);this.pwd=t,this.two=!1,this.one=!1}else this.showTip("请设置6位数的密码~",1e3)},aTicketNumberKey:function(t){console.log("aaa");var e=this.Ticket_two;if(e.length<6){if(e.indexOf(".")>-1&&e.substring(e.indexOf(".")+1).length<2&&(this.Ticket_two=e+t),!(e.indexOf(".")>-1))if(0==t&&0==e.length)this.Ticket_two="0.";else{if(e.length&&0===Number(e.charAt(0)))return;this.Ticket_two=e+t}}else this.showTip("最多只能设置6位数的密码~",1e3)}}},Ai=Ni,Wi=(i("2b59"),Object(p["a"])(Ai,Mi,Bi,!1,null,"0bb8cbf0",null)),Ui=Wi.exports,zi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._m(0),i("div",{staticClass:"goOk",on:{click:t.godo_index}},[t._v("完成")])])},Ki=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"kaitong"},[i("img",{attrs:{src:"http://pe1s.static.pdr365.com/1536575795599.jpg"}}),i("p",[t._v("开通成功")])])}],qi={data:function(){return{loading:!0,account:""}},beforeRouteEnter:function(t,e,i){document.title="好时光会员卡",i()},created:function(){},methods:{godo_index:function(){this.$router.push({name:"myCards"})}}},Fi=qi,Hi=(i("7ae5"),Object(p["a"])(Fi,zi,Ki,!1,null,null,null)),Ji=Hi.exports,Vi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"details-bg"}),i("div",{staticClass:"video-details-content-box"},[i("div",{staticClass:"video-details-content-bj"},[i("img",{attrs:{src:null==t.MovieD.pic_entry?"http://pe1s.static.pdr365.com/default_movie_pic.jpg":t.MovieD.pic_entry}})]),i("div",{staticClass:"video-details-content"},[i("div",{staticClass:"video-details-content-img"},[i("img",{attrs:{src:null==t.MovieD.pic_entry?"http://pe1s.static.pdr365.com/default_movie_pic.jpg":t.MovieD.pic_entry}})]),i("div",{staticClass:"video-details-content-right"},[i("div",{staticClass:"video-details-content-right-title"},[i("p",[t._v(t._s(t.MovieD.film_name))]),i("div",[t._v(t._s(t.MovieD.film_dimensional))])]),i("p",{staticClass:"video-details-content-right-title-en"},[t._v(t._s(t.MovieD.film_brief))]),i("p",{staticClass:"video-details-content-right-type"},[t._v(t._s(t.MovieD.film_type))]),i("p",{staticClass:"video-details-content-right-country"},[t._v(t._s(t.MovieD.film_region)+"|"+t._s(t.MovieD.time_diff)+"分钟")]),i("p",{staticClass:"video-details-content-right-title-time"},[t._v(t._s(t.MovieD.release_date)+" 上映")]),i("div",{staticClass:"video-details-content-right-collect",staticStyle:{"text-align":"right","padding-right":"1rem"}},[t._v(t._s(t.MovieD.film_score)+"\n\t\t\t\t\t")])])])]),i("div",{staticClass:"video-synopsis"},[i("div",{staticClass:"video-synopsis-top"},[i("p",{staticClass:"video-synopsis-title"},[t._v("简介")]),i("div",{staticClass:"video-synopsis-character"},[i("span",{class:t.synopsis,on:{click:t.go_none}},[t._v(t._s(t.MovieD.film_content))]),i("a",{class:t.showBtn,on:{click:t.go_block}},[t._v("展开")])])]),i("div",{staticClass:"video-synopsis-bottom"},[i("p",{staticClass:"video-synopsis-actor"},[t._v("演员")]),i("div",{staticClass:"video-synopsis-actor-img",staticStyle:{position:"relative"}},[i("div",{ref:"gActorWrapper",staticClass:"wrapper",staticStyle:{position:"absolute",left:"0",top:"0",height:"100%"}},[i("ul",{style:t.actorListWidth},t._l(t.MovieD.celebritys,function(e){return i("li",[i("img",{attrs:{src:e.title_img}}),i("span",[t._v(t._s(e.cele_name))])])}))])])])]),i("div",{staticClass:"stage-photo-box"},[i("div",{staticClass:"stage-photo"},[i("p",{staticClass:"stage-photo-title"},[t._v("剧照")]),i("div",{staticClass:"stage-photo-list",staticStyle:{position:"relative"}},[i("div",{ref:"gStageScroll",staticClass:"wrapper",staticStyle:{position:"absolute",left:"0",top:"0",height:"100%"}},[i("ul",{style:t.stagePhotoWidth},t._l(t.MovieD.pictures,function(t){return i("li",[i("img",{attrs:{src:t.pic_url}})])}))])])])]),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e()])},Yi=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],Xi={data:function(){return{loading:!0,synopsis:"synopsis-none",showBtn:"showBtn",mid:"",MovieD:"",index:"",actorListWidth:"",stagePhotoWidth:""}},beforeRouteEnter:function(t,e,i){document.title="影片详情",i()},created:function(){this.mid=this.$route.params.mid,this.index=this.$route.params.index,this.MovieDeatil()},methods:{MovieDeatil:function(){var t=this,e="/general_api/api/MovieFutureDetails?movie_id="+t.mid+"&ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){0==e.code&&(t.MovieD=e.data,t.actorListWidth="width: ".concat(1.34*e.data.celebritys.length,"rem"),t.stagePhotoWidth="width: ".concat(1.88*e.data.pictures.length,"rem"),t.$nextTick(function(){t.gActorScroll=new j["a"](t.$refs.gActorWrapper,{click:!0,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1}),t.gStageScroll=new j["a"](t.$refs.gStageScroll,{click:!0,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1})})),t.loading=!1,console.log(e)})},back:function(){router.go(-1)},go_block:function(){var t=this;t.synopsis="synopsis-block",t.showBtn="noneBtn"},go_none:function(){var t=this;t.synopsis="synopsis-none",t.showBtn="showBtn"}}},Zi=Xi,Qi=(i("25cd"),Object(p["a"])(Zi,Vi,Yi,!1,null,null,null)),ta=Qi.exports,ea=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"details-bg"}),i("div",{staticClass:"my-ticket-box"},[i("div",{staticClass:"my-cardWrap"},[i("div",{staticClass:"my-card my-cardtop my-module-1",staticStyle:{"padding-bottom":"0","min-height":"auto"}},[t._l(t.OrderList.items,function(e){return i("div",{staticClass:"weui-media weui-media-box_appmsg",staticStyle:{"margin-left":".3rem",padding:".3rem .3rem .3rem 0","border-bottom":"1px solid #efeff4"}},[i("div",{staticClass:"weui-media-box__hd",staticStyle:{width:"1rem",height:"1rem"}},[i("img",{staticClass:"weui-media-box__thumb",attrs:{src:"http://pe1s.static.pdr365.com/"+e.pic_url,alt:""}})]),i("div",{staticClass:"weui-media-box__bd",staticStyle:{"text-align":"left"}},[i("div",{staticClass:"select-goods-info"},[i("div",{staticClass:"select-goods-info-title",staticStyle:{"font-size":".28rem","font-weight":"bold"}},[t._v(t._s(e.goods_name))]),i("div",{staticClass:"select-goods-info-vol",staticStyle:{"font-size":".2rem",color:"#8D9398"}},[t._v(t._s(e.goods_name))]),i("div",{staticClass:"select-goods-info-price",staticStyle:{"margin-top":".1rem"}},[i("span",{staticStyle:{"font-size":".24rem",color:"#FF6231","font-weight":"bold"}},[t._v("¥"+t._s(e.unit_amount/100))])])])]),i("div",{staticClass:"store-goods-cal"},[i("p",{staticStyle:{"font-size":".28rem",color:"#999"}},[t._v(t._s(e.buy_num)+"份")])])])}),t._m(0)],2),i("div",{staticClass:"my-card my-cardbot my-module-2"},[i("p",{staticClass:"my-module-2-num"},[t._v("1张小食券")]),i("p",{staticClass:"my-module-2-hint"},[t._v("请到影院卖品柜台像员工出示以下信息取小食")]),i("img",{staticClass:"my-module-2-codeimg",attrs:{src:"http://qr.liantu.com/api.php?text="+t.OrderList.order_no}}),t._m(1)]),i("div",{staticClass:"my-card my-cardbot4 my-module-4"},[i("p",{staticClass:"my-module-5-title",staticStyle:{"border-bottom":"1px solid #efeff4","padding-bottom":".2rem",margin:".3rem .3rem .2rem .3rem",color:"#ccc"}},[t._v("订单信息")]),i("p",{staticClass:"my-module-4-nm",staticStyle:{"font-size":".28rem",margin:".4rem .3rem .3rem .3rem"}},[t._v("实付金额"),i("span",[t._v(t._s(t.OrderList.pay_amount/100)+"元")])]),i("p",{staticClass:"my-module-4-info",staticStyle:{"font-size":".28rem"}},[t._v("订单号"),i("span",[t._v(t._s(t.OrderList.order_no))])])]),t._m(2)])]),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e()])},ia=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"weui-media-box weui-media-box_text",staticStyle:{display:"inline-block"}},[i("div",{staticClass:"weui-media-box__desc",staticStyle:{display:"flex","justify-content":"space-between"}},[i("div",{staticClass:"store-order-slogan"},[i("i",{staticClass:"iconfont icon-duigou"}),i("span",[t._v("随时退、过期退")])])])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"my-module-2-code"},[t._v("\n\t\t    \t\t\t提示：\n\t\t    \t\t\t"),i("span",[t._v("请向工作人员出示二维码")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"my-card marginy-cardbot5  my-module-5",staticStyle:{float:"left",width:"100%","border-top":".18em dashed #efeff4","border-radius":"0 0 .18rem .18rem"}},[i("p",{staticClass:"my-module-5-title",staticStyle:{"border-bottom":"1px solid #efeff4","padding-bottom":".2rem",margin:".3rem .3rem .2rem .3rem",color:"#ccc"}},[t._v("购买须知")]),i("p",{staticClass:"my-module-5-clause",staticStyle:{color:"#000","font-size":".28rem"}},[t._v("使用时间")]),i("p",{staticClass:"my-module-5-clause"},[t._v("腾讯券24小时可用")])])}],aa={data:function(){return{loading:!0,on:"",movieDetails:"",index:"",tip_msg:"",apid:"",OrderList:""}},beforeRouteEnter:function(t,e,i){document.title="订单详情页",i()},created:function(){this.on=this.$route.params.on,this.index=this.$route.params.index,this.apid=this.$route.params.apid,this.GetOrderDetails()},methods:{showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},back:function(){router.go(-1)},GetOrderDetails:function(){var t=this,e=E.a.get("_lac_k_"),i="/general_api/api/OrderList?apid="+t.apid+"&ds=&token="+e+"&oss=1&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){if(e){t.loading=!1;for(var i=0;i<e.length;i++)t.index==i&&(t.OrderList=e[i])}else t.loading=!1,t.showTip("暂无订单")}).catch(function(e){t.loading=!1,t.OrderList=null,t.showTip("暂无订单")})}}},sa=aa,na=(i("1982"),Object(p["a"])(sa,ea,ia,!1,null,null,null)),oa=na.exports,ca=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"details-bg"}),i("div",{staticClass:"b_MD"},[i("div",{staticClass:"MD_top"},[i("div",{staticClass:"MD_top_n"},[i("div",{staticClass:"MD_top_img"},[i("span",[t._v("头像")]),i("img",{attrs:{src:""==t.img?""==t.account.head||null==t.account.head?"http://pe1s.static.pdr365.com/touxiang.png":t.account.head:t.img}}),i("input",{staticClass:"form-control",attrs:{type:"file",id:"HeadImg"},on:{change:t.upPIC}})]),i("div",{staticClass:"MD_top_ck"},[i("span",[t._v("昵称")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",placeholder:""==t.account.nickname||null==t.account.nickname?"请输入新的昵称":t.account.nickname,name:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])])]),i("div",{staticClass:"MD_top_save",on:{click:t.PreviewImage}},[t._v("保 存")])]),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e(),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e()])},ra=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],la=(i("7f7f"),{data:function(){return{tip_msg:"",loading:!0,name:"",img:"",account:""}},beforeRouteEnter:function(t,e,i){document.title="修改资料",i()},created:function(){this.GetAccount()},methods:{showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},GetCode:function(){var t=this,e=this,i=window.location.href,a=encodeURIComponent(i);E.a.get("_lac_k_");if(i.indexOf("code")>0){var s=i.split("="),n=s[1].toString(),o=n.substr(0,32);a="/general_api/api/CheckCode?code="+o+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(i){if(!i.available)return"bind_mobile"==i.messages[0]?void t.$router.push({name:"login",params:{apid:i.data}}):void t.showTip(i.messages[0]);e.loading=!1,document.cookie="_lac_k_="+i.data,t.GetAccount()}),e.loading=!1}else-1==i.indexOf("code")&&(location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx8c675ee4c365e1cd&redirect_uri="+a+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")},GetAccount:function(){var t=this,e=this,i=E.a.get("_lac_k_"),a="/general_api/api/auth/GetAccount?token="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(i){i.available?(e.loading=!1,e.account=i.data):0==i.available&&"user_no_login"==i.messages[0]&&t.GetCode(),e.loading=!1})},upPIC:function(){var t=this;t.loading=!0;var e=new FormData;e.append("HeadImg",document.getElementById("HeadImg").files[0]),$.ajax({url:"/general_api/api/upload_file",type:"POST",data:e,datatype:"json",contentType:!1,processData:!1,traditional:!0,success:function(e){e.available?(t.loading=!1,t.img=e.data):(t.loading=!1,t.showTip(e.messages[0]))},error:function(e){t.loading=!1}})},PreviewImage:function(){var t=this;if(t.loading=!0,""==e)var e=t.account.head;else e=t.img;if(""==t.name)var i=t.account.nickname;else i=t.name;var a=E.a.get("_lac_k_");$.ajax({url:"/general_api/api/auth/update_account",type:"POST",data:{token:a,head:e,name:i},datatype:"json",success:function(e){t.loading=!1;var i=JSON.parse(e);i.available?(t.showTip("修改资料成功"),t.$router.go(-1)):t.showTip("修改资料失败")},error:function(e){t.loading=!1,t.showTip("改修资料失败")}})}}}),da=la,ua=(i("99a6"),Object(p["a"])(da,ca,ra,!1,null,null,null)),_a=ua.exports,ma=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"details-bg"}),i("div",{staticClass:"my-coupons-box"},[t.Coupons.length>0?i("div",{staticClass:"my-coupons"},t._l(t.Coupons,function(e,a){return i("div",{staticClass:"my-coupons-list stamp02"},[i("div",{staticClass:"my-coupons-list-left"},["1000"==e.coupon_type?i("p",{staticClass:"my-coupons-list-left-num"},[t._v("¥ "),i("span",[t._v(" "+t._s(e.rule_value/100))])]):"3000"==e.coupon_type?i("p",{staticClass:"my-coupons-list-left-num"},[i("span",[t._v(" "+t._s(t._f("toSlice")(e.rule_value))+"折")])]):"2000"==e.coupon_type?i("p",{staticClass:"my-coupons-list-left-num",staticStyle:{margin:"auto","line-height":"2.2rem"}},[i("span",{staticStyle:{"font-size":".4rem"}},[t._v(" 兑换券 ")])]):t._e(),i("p",{staticClass:"my-coupons-list-left-type"},[t._v(t._s("1000"==e.coupon_type?"代金券":"3000"==e.coupon_type?"折扣券":""))])]),i("div",{staticClass:"my-coupons-list-mid"},[i("p",{staticClass:"my-coupons-list-mid-title"},[t._v(t._s(e.batch_title))]),"2000"==e.coupon_type?i("p",{staticClass:"my-coupons-list-mid-info"},[i("span",[t._v("仅限到店使用")])]):i("p",{staticClass:"my-coupons-list-mid-info"},t._l(e.rule,function(e){return i("span",[t._v(" "+t._s(e)+" ")])})),i("p",{staticClass:"my-coupons-list-mid-info"},[t._v("有效期："+t._s(t.timelist[a]))]),i("p",{staticClass:"my-coupons-list-mid-info"},[t._v("券码："),i("span",[t._v(t._s(e.code))])])]),i("div",{staticClass:"my-coupons-list-pay",on:{click:function(i){t.chooseCoupons(e)}}},[t._v("选择")])])})):i("div",{staticClass:"my-coupons"},[t._m(0)])]),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(1)]):t._e(),i("div",{staticStyle:{position:"fixed",bottom:"0",width:"100%",padding:"20px .3rem",background:"#efeff4"}},[i("a",{staticClass:"weui-btn weui-btn_primary",staticStyle:{"font-size":"0.34rem",color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.goBack}},[t._v("不使用优惠券")])])])},pa=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"NoCoupons"},[i("img",{attrs:{src:"http://pe1s.static.pdr365.com/Nocoupons.png"}}),i("p",[t._v("您还没有优惠券呢～")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],va={data:function(){return{loading:!0,Coupons:"",timelist:[],order_no:"",tnum:""}},beforeRouteEnter:function(t,e,i){document.title="选择优惠券",i()},created:function(){this.order_no=this.$route.params.order_no,this.tnum=this.$route.params.tnum},mounted:function(){this.GetCoupons()},methods:{back:function(){router.go(-1)},GetCoupons:function(){var t=this,e=this.order_no,i=E.a.get("_lac_k_"),a="/general_api/api/auth/GetAccountCoupnsByOrder?token="+i+"&order_id="+e+"&oc=2000&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){if("0"==e.code){t.loading=!1,t.Coupons=e.list;for(var i=[],a=0;a<e.list.length;a++){var s=e.list[a].validate_end,n=new Date(s),o=n.getFullYear(),c=n.getMonth()+1,r=n.getDate(),l=o+"-"+c+"-"+r;i.push(l)}t.timelist=i}else{t.loading=!1;E.a.get("_lac_ap_")}})},chooseCoupons:function(t){var e=JSON.stringify(t||{});sessionStorage.setItem("o_c",e),this.$router.push({name:"confirmOrder",params:{tnum:this.tnum}})},goBack:function(){sessionStorage.removeItem("o_c"),this.$router.push({name:"confirmOrder",params:{tnum:this.tnum}})}}},ha=va,ga=(i("7e63"),Object(p["a"])(ha,ma,pa,!1,null,null,null)),fa=ga.exports,Ca=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"details-bg"}),i("div",{staticClass:"my-coupons-box"},[t.Coupons.length>0?i("div",{staticClass:"my-coupons"},t._l(t.Coupons,function(e,a){return i("div",{staticClass:"my-coupons-list stamp02"},[i("div",{staticClass:"my-coupons-list-left"},["1000"==e.coupon_type?i("p",{staticClass:"my-coupons-list-left-num"},[t._v("¥ "),i("span",[t._v(" "+t._s(e.rule_value/100))])]):"3000"==e.coupon_type?i("p",{staticClass:"my-coupons-list-left-num"},[i("span",[t._v(" "+t._s(t._f("toSlice")(e.rule_value))+"折")])]):"2000"==e.coupon_type?i("p",{staticClass:"my-coupons-list-left-num",staticStyle:{margin:"auto","line-height":"2.2rem"}},[i("span",{staticStyle:{"font-size":".4rem"}},[t._v(" 兑换券 ")])]):t._e(),i("p",{staticClass:"my-coupons-list-left-type"},[t._v(t._s("1000"==e.coupon_type?"代金券":"3000"==e.coupon_type?"折扣券":""))])]),i("div",{staticClass:"my-coupons-list-mid"},[i("p",{staticClass:"my-coupons-list-mid-title"},[t._v(t._s(e.batch_title))]),"2000"==e.coupon_type?i("p",{staticClass:"my-coupons-list-mid-info"},[i("span",[t._v("仅限到店使用")])]):i("p",{staticClass:"my-coupons-list-mid-info"},t._l(e.rule,function(e){return i("span",[t._v(" "+t._s(e)+" ")])})),i("p",{staticClass:"my-coupons-list-mid-info"},[t._v("有效期："+t._s(t.timelist[a]))]),i("p",{staticClass:"my-coupons-list-mid-info"},[t._v("券码："),i("span",[t._v(t._s(e.code))])])]),i("div",{staticClass:"my-coupons-list-pay",on:{click:function(i){t.chooseCoupons(e)}}},[t._v("选择")])])})):i("div",{staticClass:"my-coupons"},[t._m(0)])]),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(1)]):t._e(),i("div",{staticStyle:{position:"fixed",bottom:"0",width:"100%",padding:"20px .3rem",background:"#efeff4"}},[i("a",{staticClass:"weui-btn weui-btn_primary",staticStyle:{"font-size":"0.34rem",color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.goBack}},[t._v("不使用优惠券")])])])},wa=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"NoCoupons"},[i("img",{attrs:{src:"http://pe1s.static.pdr365.com/Nocoupons.png"}}),i("p",[t._v("您还没有优惠券呢～")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],ba={data:function(){return{loading:!0,Coupons:"",timelist:[],order_no:"",goods:""}},beforeRouteEnter:function(t,e,i){document.title="选择优惠券",i()},created:function(){this.order_no=this.$route.params.order_no,this.goods=this.$route.params.Goods},mounted:function(){this.GetCoupons()},methods:{back:function(){router.go(-1)},GetCoupons:function(){var t=this,e=this,i=this.order_no,a=E.a.get("_lac_k_"),s="/general_api/api/auth/GetAccountCoupnsByOrder?token="+a+"&order_id="+i+"&oc=1000&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(i){if("0"==i.code){e.loading=!1,e.Coupons=i.list;for(var a=[],s=0;s<i.list.length;s++){var n=i.list[s].validate_end,o=new Date(n),c=o.getFullYear(),r=o.getMonth()+1,l=o.getDate(),d=c+"-"+r+"-"+l;a.push(d)}e.timelist=a}else{e.loading=!1;var u=E.a.get("_lac_ap_");u?t.$router.push({name:"login",params:{apid:u}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}})},chooseCoupons:function(t){var e=JSON.stringify(t||{});sessionStorage.setItem("o_c_1000",e),this.$router.push({name:"ConfirmGoodsOrder",params:{Goods:this.goods}})},goBack:function(){sessionStorage.removeItem("o_c_1000"),this.$router.push({name:"ConfirmGoodsOrder",params:{Goods:this.goods}})}}},ya=ba,ka=(i("e87c"),Object(p["a"])(ya,Ca,wa,!1,null,null,null)),xa=ka.exports;o.a.use(f.a);var Sa,Da=new f.a({routes:[{path:"/index",name:"index",component:x},{path:"/",name:"storeList",component:ti},{path:"/cinemaList/:mid",name:"cinemaList",component:W},{path:"/videoDetails/:mid/:index",name:"videoDetails",component:P},{path:"/moviecinemaList/:mid",name:"moviecinemaList",component:H},{path:"/login/:apid",name:"login",component:Q},{path:"/myCoupons/",name:"myCoupons",component:nt},{path:"/personalCenter/:st?",name:"personalCenter",component:ut},{path:"/myTicket/",name:"myTicket",component:gt},{path:"/votingCode/:on",name:"votingCode",component:kt},{path:"/myCards/",name:"myCards",component:jt},{path:"/purchasingCard/:CardNm",name:"purchasingCard",component:Rt},{path:"/bindCard/",name:"bindCard",component:Wt},{path:"/cardDetails/",name:"cardDetails",component:Ht},{path:"/myIntegral/",name:"myIntegral",component:Qt},{path:"/integrationRule/",name:"integrationRule",component:ne},{path:"/cityList/",name:"cityList",component:ue},{path:"/schedule/:cinemaId/:mid/:index",name:"schedule",component:ge},{path:"/seats/:planId/:lastUpdateTime/:hallId/:cinemaId/:plan_date",name:"seats",component:xe},{path:"/confirmOrder/:tnum",name:"confirmOrder",component:Oe},{path:"/storeOrder/:tnum",name:"storeOrder",component:oi},{path:"/rechargeAmount/:CardNm",name:"rechargeAmount",component:_i},{path:"/ScavengingPointMea/:tableNum/:sid?",name:"ScavengingPointMea",component:fi},{path:"/ConfirmGoodsOrder/:Goods",name:"ConfirmGoodsOrder",component:xi},{path:"/ScanGoodsOrder/:on/:tableNum",name:"ScanGoodsOrder",component:Oi},{path:"/scanLogin/:apid",name:"scanLogin",component:Gi},{path:"/scanPurchasingCard",name:"scanPurchasingCard",component:Ui},{path:"/kaikaSuccess",name:"kaikaSuccess",component:Ji},{path:"/GoIngvideoDetails",name:"GoIngvideoDetails",component:ta},{path:"/GoodsCode/:on/:index/:apid",name:"GoodsCode",component:oa},{path:"/modifiedData",name:"modifiedData",component:_a},{path:"/couponsForOrder/:order_no",name:"couponsForOrder",component:fa},{path:"/couponsForGoods/:order_no",name:"couponsForGoods",component:xa}]}),Ta={groupList:[],goodsList:[],cartList:[],firCatId:-1,comboShow:!1,logo:{}},Ea=Ta,ja=function(t){return t.totalMoney},Oa=(i("20d6"),"SET_GROUP_LIST"),Ia="SET_GOODS_LIST",$a="SET_FIR_CAT_ID",La="ADD_TO_CART",Pa="RELEASE_TO_CART",Ra="CLEAR_CART",Ga="LISTEN_CART",Ma="TOGGLE_COMBO_SHOW",Ba="GET_LOGO",Na=i("bc3a"),Aa=i.n(Na),Wa=i("3955"),Ua=i.n(Wa),za=function(t){var e="/general_api/api/goods_cat?ts="+Date.parse(new Date);"storeList"===t?e+="&c=GENERAL_EC":"ScavengingPointMea"===t&&(e+="&c=GENERAL_SOC");var i=[],a=weui.loading("加载中");return Aa.a.get(e).then(function(t){return a.hide(),t.data?(t.data.forEach(function(t){i.push(t)}),i):(Wa["Message"].error({content:"暂无可用分组",duration:3}),i)}).catch(function(t){return console.log(t),a.hide(),Wa["Message"].error({content:"获取分组失败,请检查网络"+t,duration:3}),i})},Ka=function(t,e){var i=weui.loading("加载中"),a="/general_api/api/goods?ts="+Date.parse(new Date),s=[],n={cat_id:t,sid:e};return Aa.a.get(a,{params:n}).then(function(t){return t.data.length>0?(s=t.data,s.forEach(function(t,e){t[0].skus=JSON.parse(t[0].skus);var i=[];for(var a in t[0].skus)i.push(a);t[0].length=i.length,t[0].count=0}),i.hide(),s):(i.hide(),s)})},qa=function(){var t="/general_api/api/project_by_id?ts="+Date.parse(new Date),e={};return Aa.a.get(t).then(function(t){return e=t.data,e})},Fa=function(t,e){var i=t.commit;return za(e).then(function(t){i(Oa,t),i($a,t[0].id)})},Ha=function(t,e){var i=t.commit,a=t.state;console.log(e),Ka(e.id,e.sid).then(function(t){if(a.cartList.length>0)for(var e=function(e){if(t.length>0){var i=t.findIndex(function(t){return console.log(t),t[0].id===a.cartList[e][0].id&&t[1].id===a.cartList[e][1].id});-1!==i&&(t[i][0].count=a.cartList[e][0].count)}},s=0;s<a.cartList.length;s++)e(s);i(Ia,t)})},Ja=function(t){t.commit;for(var e=t.state,i=function(t){if(e.goodsList.length>0){var i=e.goodsList.findIndex(function(i){return i[0].id===e.cartList[t][0].id&&i[1].id===e.cartList[t][1].id});-1!==i&&(e.goodsList[i][0].count=e.cartList[t][0].count)}},a=0;a<e.cartList.length;a++)i(a)},Va=function(t,e){var i=t.commit,a=t.state,s=e.data;if(a.cartList.length>0){for(var n=!1,o=0;o<a.cartList.length;o++){if(a.cartList[o][0].id===s[0].id)return n=!1,void(a.cartList[o][0].count=s[0].count);n=!0}n&&a.cartList.push(s)}else a.cartList.push(s);i(La,a.cartList)},Ya=function(t,e){t.commit;for(var i=t.state,a=e.data,s=0;s<i.cartList.length;s++)if(i.cartList[s][0].id===a[0].id)return void(0===a[0].count&&i.cartList.splice(s,1))},Xa=function(t){var e=t.commit,i=t.state;i.goodsList.length>0&&i.goodsList.forEach(function(t){t[0].count=0});var a=[];e(Ra,a)},Za=function(t){var e=t.commit,i=t.state,a=!i.comboShow;e(Ma,a)},Qa=function(t){var e=t.commit;t.state;e($a,-1)},ts=function(t){var e=t.commit;t.state;qa().then(function(t){e(Ba,t)})},es=(Sa={},Object(we["a"])(Sa,Oa,function(t,e){t.groupList=e}),Object(we["a"])(Sa,Ia,function(t,e){t.goodsList=e}),Object(we["a"])(Sa,$a,function(t,e){t.firCatId=e}),Object(we["a"])(Sa,La,function(t,e){t.cartList=e}),Object(we["a"])(Sa,Pa,function(t,e){t.cartList=e}),Object(we["a"])(Sa,Ra,function(t,e){t.cartList=e}),Object(we["a"])(Sa,Ga,function(t,e){t.goodsList=e}),Object(we["a"])(Sa,Ma,function(t,e){t.comboShow=e}),Object(we["a"])(Sa,Ba,function(t,e){t.logo=e}),Sa),is=es;o.a.use(u.a);var as=new u.a.Store({state:Ea,getters:a,mutations:is,actions:s}),ss=i("7212"),ns=i.n(ss);i("6d93");(function(t,e){var i=t.documentElement,a="orientationchange"in window?"orientationchange":"resize",s=function(){var t=i.clientWidth;t&&(i.style.fontSize=t>=750?"100px":t/750*100+"px")};t.addEventListener&&(e.addEventListener(a,s,!1),s())})(document,window);i("dfa4");var os=function(t){return Number(t).toFixed(2)},cs=function(t){return Number(t.slice(0,t.indexOf("/")))/10},rs={toFixed:os,toSlice:cs};Object.keys(rs).forEach(function(t){o.a.filter(t,rs[t])}),o.a.use(ns.a),o.a.use(Ua.a),o.a.config.productionTip=!1,new o.a({router:Da,store:as,render:function(t){return t(h)}}).$mount("#app")},5722:function(t,e,i){"use strict";var a=i("d82d"),s=i.n(a);s.a},5880:function(t,e){t.exports=Vuex},5922:function(t,e,i){},"5db3":function(t,e,i){"use strict";var a=i("7bec"),s=i.n(a);s.a},"5dc0":function(t,e,i){},"60b6":function(t,e,i){"use strict";var a=i("1d3d"),s=i.n(a);s.a},6124:function(t,e,i){},6174:function(t,e,i){},6389:function(t,e){t.exports=VueRouter},"64ba":function(t,e,i){},"66c0":function(t,e,i){"use strict";var a=i("1a2c"),s=i.n(a);s.a},"6f51":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__);__webpack_exports__["a"]={data:function(){var t=this;return{isShow:!1,click_flag:!1,cinemaId:"",movie_id:"",cinema_id:"",store_city:"",store_zone:"",cinema_info:{},movie_list:[],current_plan_list:[],date_index:0,date_list_length:0,current_movie_index:0,current_movie:{},date_list:"",properties:"",loading:!0,actorList:"",storeAdd:"",storeName:"",index:"",swiperOption:{slidesPerView:4,spaceBetween:10,centeredSlides:!0,on:{slideChangeTransitionEnd:function(){var e=$(".swiper-slide-active input").val();void 0!=e&&(t.current_plan_list=t.date_list[0].plans,t.current_movie_index=this.activeIndex,t.date_index=0)},click:function(e){var i=this;t.current_plan_list=t.movie_list[i.clickedIndex].dates[0].plans,t.properties=t.movie_list[i.clickedIndex].properties,t.actorList=t.movie_list[i.clickedIndex].celebritys,i.slideTo(i.clickedIndex)}}}}},computed:{swiper:function(){return this.$refs.mySwiper.swiper}},beforeRouteEnter:function(t,e,i){document.title="影片排期",i()},created:function(){this.movie_id=this.$route.params.mid,this.index=this.$route.params.index,this.cinemaId=this.$route.params.cinemaId;var t=this.getCookie("storeName");this.decodeUnicodeNm(t);var e=this.getCookie("storeAdd");this.decodeUnicodeAdd(e)},mounted:function(){this.fetchMovieData()},methods:{decodeUnicodeAdd:function decodeUnicodeAdd(str){str=str.replace(/\\/g,"%");var inner_name=unescape(str);inner_name=eval("'"+inner_name+"'"),this.storeAdd=unescape(inner_name.replace(/\u/g,"%u"))},decodeUnicodeNm:function decodeUnicodeNm(str){str=str.replace(/\\/g,"%");var inner_name=unescape(str);inner_name=eval("'"+inner_name+"'"),this.storeName=unescape(inner_name.replace(/\u/g,"%u"))},getCookie:function(t){for(var e=document.cookie,i=e.split("; "),a=0;a<i.length;a++){var s=i[a].split("=");if(s[0]==t)return s[1]}return""},fetchMovieData:function(){var t=this,e="/general_api/api/CityMovieList?cinema_id="+t.cinemaId+"&ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){if(0==e.code){var i=[];t.current_swiper_index=t.index,i.push(e.data[t.index].properties.id),t.movie_list=e.data,t.current_plan_list=e.data[t.index].dates[0].plans,t.current_movie=e.data[t.current_swiper_index],t.properties=e.data[t.current_swiper_index].properties,t.actorList=e.data[t.current_swiper_index].celebritys,t.swiper.slideTo(t.current_swiper_index),t.fetchPlanData(),t.loading=!1}else t.loading=!1})},fetchPlanData:function(){var t=this;t.movie_id;t.date_list=t.movie_list[t.index].dates},clickDate:function(t){this.date_index=t,this.current_plan_list=this.date_list[t].plans},closeDialog:function(){$("body").removeClass("body-no-scroll"),this.isShow=!1},godo_seats:function(t,e,i,a){e||(e="0"),this.$router.push({name:"seats",params:{planId:t,lastUpdateTime:e,hallId:i,cinemaId:this.cinemaId,plan_date:a}})},godo_cinemas:function(){this.$router.push({name:"cinemaList",params:{mid:"2"}})},goMap:function(){location.href="https://3gimg.qq.com/lightmap/v1/marker/index.html?marker=coord:21.21055,110.4016;title:%E6%B9%9B%E6%B1%9F%E4%B8%AD%E5%BD%B1%E6%98%9F%E7%BE%8EIMAX%E5%9B%BD%E9%99%85%E5%BD%B1%E5%9F%8E;addr:%E6%B9%9B%E6%B1%9F%E5%B8%82%E6%B9%9B%E6%B1%9F%E5%B8%82%E9%9C%9E%E5%B1%B1%E5%8C%BA%E4%BA%BA%E6%B0%91%E5%A4%A7%E9%81%93%E5%8D%97116%E5%8F%B7%E9%BC%8E%E7%9B%9B%E5%B9%BF%E5%9C%BA%E5%9B%9B%E6%A5%BCfrom=canary&key=OEIBZ-NBO3J-JL2FM-KYSH3-NP5O3-MDBYO&referer=wepiao&ch=uri-api&ADTAG=uri-api.wepiao#"},godo_goods:function(){location.href="/general_api/tcss/index#/storeList"},godo_index:function(){this.$router.push({name:"index"})},godo_mine:function(){location.href="/general_api/tcss/index#/personalCenter"}},watch:{current_movie_index:function(){this.date_list=this.movie_list[this.current_movie_index].dates,this.current_plan_list=this.movie_list[this.current_movie_index].dates[0].plans,this.current_movie=this.movie_list[this.current_movie_index],this.properties=this.movie_list[this.current_movie_index].properties,this.actorList=this.movie_list[this.current_movie_index].celebritys;this.current_movie.img},current_plan_list:function(){if(null!=this.current_plan_list)for(var t=0;t<this.current_plan_list.length;t++){var e=parseInt(this.current_plan_list[t].startClock.slice(0,3));this.current_plan_list[t].time_flag=e>5&&e<19?1:2}}}}},7054:function(t,e,i){"use strict";var a=i("3410"),s=i.n(a);s.a},"71e3":function(t,e,i){"use strict";var a=i("5dc0"),s=i.n(a);s.a},"722f":function(t,e,i){"use strict";var a=i("64ba"),s=i.n(a);s.a},7536:function(t,e,i){},"7ae5":function(t,e,i){"use strict";var a=i("969b"),s=i.n(a);s.a},"7b65":function(t,e,i){"use strict";var a=i("f34d"),s=i.n(a);s.a},"7bec":function(t,e,i){},"7dfb":function(t,e,i){"use strict";var a=i("b0a0"),s=i.n(a);s.a},"7e63":function(t,e,i){"use strict";var a=i("6174"),s=i.n(a);s.a},8145:function(t,e,i){},"8bbf":function(t,e){t.exports=Vue},"8ce5":function(t,e,i){"use strict";var a=i("e50c"),s=i.n(a);s.a},"92a2":function(t,e,i){"use strict";var a=i("1597"),s=i.n(a);s.a},"93b5":function(t,e,i){"use strict";var a=i("eaa0"),s=i.n(a);s.a},"952f":function(t,e,i){},"969b":function(t,e,i){},"96a6":function(t,e,i){"use strict";var a=i("96c2"),s=i.n(a);s.a},"96c2":function(t,e,i){},"99a6":function(t,e,i){"use strict";var a=i("e6de"),s=i.n(a);s.a},"9db0":function(t,e,i){},a000:function(t,e,i){"use strict";var a=i("1f73"),s=i.n(a);s.a},a13f:function(t,e,i){"use strict";var a=i("5922"),s=i.n(a);s.a},aca8:function(t,e,i){},b0a0:function(t,e,i){},b0d3:function(t,e,i){},b2ec:function(t,e,i){"use strict";var a=i("387b"),s=i.n(a);s.a},b877:function(t,e,i){"use strict";var a=i("ec3f"),s=i.n(a);s.a},ba94:function(t,e,i){"use strict";var a=i("340e"),s=i.n(a);s.a},c70f:function(t,e,i){},c7cb:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("c5f6"),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3__),js_cookie__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("a78e"),js_cookie__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_4__),better_scroll__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("1fba"),_c_tabBottom_tabBottom_vue__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("4116");__webpack_exports__["a"]={data:function(){return{loading:!0,forbid:!1,tip_msg:"",MovieList:"",MovieNum:"",ComeList:"",cinemaId:0,city_name:"",city_no:"",cinemanm:"",comingListWidth:"",movieListWidth:"",swiperOption:{autoplay:!0}}},beforeRouteEnter:function(t,e,i){document.title="正在热映",i()},created:function(){this.CheckLogin(),this.ComeingMovie(),this.cityList(),this.GetMovie();var t=this.getCookie("storeName");this.decodeUnicode(t)},computed:{swiper:function(){return this.$refs.indexSwiper.swiper}},methods:{decodeUnicode:function decodeUnicode(str){str=str.replace(/\\/g,"%");var inner_cinemaname=unescape(str);inner_cinemaname=eval("'"+inner_cinemaname+"'"),this.cinemanm=unescape(inner_cinemaname.replace(/\u/g,"%u"))},CheckLogin:function(){var t=js_cookie__WEBPACK_IMPORTED_MODULE_4___default.a.get("_lac_ap_");t||(location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime())},getCookie:function(t){for(var e=document.cookie,i=e.split("; "),a=0;a<i.length;a++){var s=i[a].split("=");if(s[0]==t)return s[1]}return""},cityList:function(){var t=this,e=js_cookie__WEBPACK_IMPORTED_MODULE_4___default.a.get("city_no");if(e){var i=js_cookie__WEBPACK_IMPORTED_MODULE_4___default.a.get("cinemaId");i?this.cinemaId=i:this.GetStore(e)}else{var a=this,s="/general_api/api/cityList?ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(e){console.log(e),"0"==e.code&&e.data&&e.data.length>0&&(js_cookie__WEBPACK_IMPORTED_MODULE_4___default.a.set("city_no",e.data[0].city_no),a.city_name=e.data[0].city_name,a.city_no=Number(e.data[0].city_no),t.GetStore(Number(e.data[0].city_no)),js_cookie__WEBPACK_IMPORTED_MODULE_4___default.a.set("city_name",a.city_name)),a.loading=!1})}},ComeingMovie:function(){var t=this,e="/general_api/api/UpcomingMovies";fetch(e).then(function(t){return t.json()}).then(function(e){0==e.code&&(t.ComeList=e.data.coming,t.comingListWidth="width: ".concat(1.78*e.data.coming.length,"rem"),t.$nextTick(function(){t.scroll=new better_scroll__WEBPACK_IMPORTED_MODULE_5__["a"](t.$refs.comingWrapper,{click:!0,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1})}))})},GetStore:function(t){var e=this,i="/general_api/api/StoreList?city_no="+t+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(t){if(console.log(t),0==t.code&&t.data&&t.data.length>0){var i=0;t.data[0].cinema_id&&(i=t.data[0].cinema_id),e.cinemaId=i,e.cinemanm=t.data[0].store_name,e.s_id=t.data[0].s_id,console.log("set cinemaId default cookie======"+e.cinemaId),js_cookie__WEBPACK_IMPORTED_MODULE_4___default.a.set("cinemaId",e.cinemaId),js_cookie__WEBPACK_IMPORTED_MODULE_4___default.a.set("s_id",t.data[0].store_basic);var a=t.data[0].city;t.data[0].zone&&(a+=t.data[0].zone),t.data[0].address&&(a+=t.data[0].address),e.encodeUnicodeAdd(a),e.encodeUnicodeName(t.data[0].physics_name)}e.loading=!1})},encodeUnicodeAdd:function(t){for(var e=[],i=0;i<t.length;i++)e[i]=("00"+t.charCodeAt(i).toString(16)).slice(-4);js_cookie__WEBPACK_IMPORTED_MODULE_4___default.a.set("storeAdd","\\u"+e.join("\\u"))},encodeUnicodeName:function(t){for(var e=[],i=0;i<t.length;i++)e[i]=("00"+t.charCodeAt(i).toString(16)).slice(-4);js_cookie__WEBPACK_IMPORTED_MODULE_4___default.a.set("storeName","\\u"+e.join("\\u"))},GetMovie:function(){var t=this,e=js_cookie__WEBPACK_IMPORTED_MODULE_4___default.a.get("cinemaId");if(e){var i="/general_api/api/CityMovieList?cinema_id="+e+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){0==e.code&&(t.MovieList=e.data,t.MovieNum=e.data.length,t.movieListWidth="width: ".concat(1.78*e.data.length,"rem"),t.$nextTick(function(){t.scroll=new better_scroll__WEBPACK_IMPORTED_MODULE_5__["a"](t.$refs.movieWrapper,{click:!0,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1})})),t.loading=!1})}else{var a=js_cookie__WEBPACK_IMPORTED_MODULE_4___default.a.get("city_no");this.GetStore(a)}},showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},back:function(){router.go(-1)},godo_cinema:function(){this.$router.push({name:"moviecinemaList",params:{mid:"2"}})},GoIngvideoDetails:function(t,e){this.$router.push({name:"GoIngvideoDetails",params:{mid:t,index:e}})},videoDetails:function(t,e){this.$router.push({name:"videoDetails",params:{mid:t,index:e}})},godo_buy:function(t,e){var i=this;this.$router.push({name:"schedule",params:{cinemaId:i.cinemaId,mid:t,index:e}})},godo_mine:function(){location.href="/general_api/tcss/index#/personalCenter"},godo_cinemas:function(){this.$router.push({name:"cinemaList",params:{mid:"2"}})},godo_goods:function(){location.href="/general_api/tcss/index#/storeList"}},components:{tabBottom:_c_tabBottom_tabBottom_vue__WEBPACK_IMPORTED_MODULE_6__["a"]}}},cda1:function(t,e,i){},d44d:function(t,e,i){"use strict";var a=i("daad"),s=i.n(a);s.a},d82d:function(t,e,i){},daad:function(t,e,i){},db08:function(t,e,i){"use strict";var a=i("b0d3"),s=i.n(a);s.a},df27:function(t,e,i){"use strict";var a=i("952f"),s=i.n(a);s.a},e50c:function(t,e,i){},e6de:function(t,e,i){},e87c:function(t,e,i){"use strict";var a=i("aca8"),s=i.n(a);s.a},eaa0:function(t,e,i){},ec3f:function(t,e,i){},f34d:function(t,e,i){},f8cd:function(t,e,i){},f9e9:function(t,e,i){"use strict";var a=i("7536"),s=i.n(a);s.a},fd03:function(t,e,i){},fe4c:function(t,e,i){"use strict";var a=i("f8cd"),s=i.n(a);s.a}});