(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-594a"],{"340e":function(t,e,a){},a78e:function(t,e,a){var i,s;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(o){var c=!1;if(i=o,s="function"===typeof i?i.call(e,a,e,t):i,void 0===s||(t.exports=s),c=!0,t.exports=o(),c=!0,!c){var n=window.Cookies,l=window.Cookies=o();l.noConflict=function(){return window.Cookies=n,l}}})(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var a=arguments[t];for(var i in a)e[i]=a[i]}return e}function e(a){function i(e,s,o){var c;if("undefined"!==typeof document){if(arguments.length>1){if(o=t({path:"/"},i.defaults,o),"number"===typeof o.expires){var n=new Date;n.setMilliseconds(n.getMilliseconds()+864e5*o.expires),o.expires=n}o.expires=o.expires?o.expires.toUTCString():"";try{c=JSON.stringify(s),/^[\{\[]/.test(c)&&(s=c)}catch(t){}s=a.write?a.write(s,e):encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape);var l="";for(var r in o)o[r]&&(l+="; "+r,!0!==o[r]&&(l+="="+o[r]));return document.cookie=e+"="+s+l}e||(c={});for(var d=document.cookie?document.cookie.split("; "):[],_=/(%[0-9A-Z]{2})+/g,u=0;u<d.length;u++){var p=d[u].split("="),m=p.slice(1).join("=");this.json||'"'!==m.charAt(0)||(m=m.slice(1,-1));try{var f=p[0].replace(_,decodeURIComponent);if(m=a.read?a.read(m,f):a(m,f)||m.replace(_,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(t){}if(e===f){c=m;break}e||(c[f]=m)}catch(t){}}return c}}return i.set=i,i.get=function(t){return i.call(i,t)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(e,a){i(e,"",t(a,{expires:-1}))},i.withConverter=e,i}return e(function(){})})},ba94:function(t,e,a){"use strict";var i=a("340e"),s=a.n(i);s.a},c93e:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var i=a("a322");function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},s=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),s.forEach(function(e){Object(i["a"])(t,e,a[e])})}return t}},d8fd:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{background:"#EFEFF4",width:"100%",height:"100%"}},[a("div",{staticClass:"bg"}),"ScanGoods"==t.ScanGoods?a("div",{staticStyle:{"padding-bottom":"2.8rem"}},[a("div",{staticClass:"confirmGoodsO-top"},[t._v("当前桌号 "),a("span",[t._v(t._s(t.tableNum))])]),a("div",{staticClass:"store-weui-panel weui-panel weui-panel_access",staticStyle:{width:"100%","margin-top":".2rem"}},[a("div",{staticClass:"weui-panel__bd",staticStyle:{"margin-bottom":".2rem"}},[a("p",{staticClass:"alreadyGoods"},[t._v("已点餐品")]),t._l(t.orderDetails,function(e){return a("div",{staticClass:"weui-media weui-media-box_appmsg",staticStyle:{"margin-left":".3rem",padding:".3rem .3rem .3rem 0"}},[a("div",{staticClass:"weui-media-box__hd",staticStyle:{width:"1rem",height:"1rem"}},[a("img",{staticClass:"weui-media-box__thumb",attrs:{src:"http://pe1s.static.pdr365.com/"+e.pic_url,alt:""}})]),a("div",{staticClass:"weui-media-box__bd",staticStyle:{"text-align":"left"}},[a("div",{staticClass:"select-goods-info"},[a("div",{staticClass:"select-goods-info-title",staticStyle:{"font-size":".28rem","font-weight":"bold"}},[t._v(t._s(e.goods_name))]),a("div",{staticClass:"select-goods-info-vol",staticStyle:{"font-size":".2rem",color:"#8D9398"}},[t._v(t._s(e.goods_name))]),a("div",{staticClass:"select-goods-info-price",staticStyle:{"margin-top":".1rem"}},[a("span",{staticStyle:{"font-size":".24rem",color:"#FF6231","font-weight":"bold"}},[t._v("x "+t._s(e.buy_num))])])])]),a("div",{staticClass:"store-goods-cal"},[a("p",{staticStyle:{"font-size":".28rem",color:"#000","font-weight":"bold"}},[t._v("¥"+t._s(e.unit_amount/100))])])])}),a("p",{staticClass:"xiaoji"},[t._v("总价 "),a("span",[t._v(" ¥"+t._s(t.data.total_amount/100))])])],2)]),a("div",{staticClass:"remark-box"},[a("span",[t._v("备注")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.o_rem,expression:"o_rem"}],attrs:{type:"text",placeholder:"口味、偏好等要求"},domProps:{value:t.o_rem},on:{input:function(e){e.target.composing||(t.o_rem=e.target.value)}}})]),a("section",{staticClass:"myweui-cells weui-cells"},[a("a",{staticClass:"weui-cell myweui-cell cell-height-88 weui-cell_access",staticStyle:{color:"#2c3e50"},attrs:{href:"javascript:;"},on:{click:t.goCoupons}},[t._m(0),t.o_c_1000?a("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":".3rem"}},[t._v(t._s(t.o_c_1000.batch_title))]):a("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":".3rem"}},[t._v("点击选择")])])]),t.CardData?a("section",{staticClass:"myweui-cells weui-cells_checkbox",staticStyle:{"margin-top":".3rem"}},[t.CardData?a("label",{staticClass:"weui-cell myweui-cell cell-height-88 weui-check__label",staticStyle:{background:"#fff"},attrs:{for:"x10"}},[a("div",{staticClass:"weui-cell__bd"},[a("p",{staticStyle:{"font-size":"15px"}},[t._v("会员余额支付（余额："+t._s(t.CardData[0].balance/100)+"元）")])]),t._m(2)]):t._e(),t._m(3)]):a("section",{staticClass:"vip-card"},[a("div",{staticClass:"weui-cells myweui-cells",on:{click:t.GoKaika}},[a("a",{staticClass:"weui-cell myweui-cell vip-cell weui-cell_access",attrs:{href:"javascript:;"}},[a("div",{staticClass:"weui-cell__bd"},[a("div"),a("p",{staticClass:"vip-cell-title",staticStyle:{color:"#2c3e50"}},[t._v(t._s(t.logo.proj_name)+"会员卡")]),t._m(1)]),a("div",{staticClass:"weui-cell__ft"})])])]),a("div",{staticClass:"make-order-container clear",staticStyle:{bottom:"0px","border-top":"1px solid #e5e9ec"}},[a("div",{staticClass:"make-order-left"},[t._m(4),a("div",{staticClass:"make-order-total-price",staticStyle:{"font-size":".4rem","font-weight":"bold",color:"#000","margin-left":".2rem"}},[t._v("¥ "+t._s(t.data.pay_amount/100))])]),a("div",{staticClass:"make-order-btn",staticStyle:{"font-size":".28rem","font-weight":"bold"},on:{click:t.godo_ScangoodOrder}},[t._v("确认并支付")])])]):t._e(),"tcssGoods"==t.ScanGoods?a("div",{staticStyle:{"padding-bottom":"2.8rem"}},[a("div",{staticClass:"store-weui-panel weui-panel weui-panel_access"},[a("div",{staticClass:"weui-panel__bd"},[t._l(t.orderDetails,function(e){return a("div",{staticClass:"weui-media-box weui-media-box_appmsg"},[a("div",{staticClass:"weui-media-box__hd"},[a("img",{staticClass:"weui-media-box__thumb",attrs:{src:"http://pe1s.static.pdr365.com/"+e.pic_url,alt:""}})]),a("div",{staticClass:"weui-media-box__bd"},[a("div",{staticClass:"select-goods-info"},[a("div",{staticClass:"select-goods-info-title"},[t._v(t._s(e.goods_name))]),a("div",{staticClass:"select-goods-info-vol"},[t._v(t._s(e.goods_name))]),a("div",{staticClass:"select-goods-info-price"},[a("span",[t._v(t._s(e.pay_amount/100)+"元")])])])]),a("div",{staticClass:"store-goods-cal"},[a("p",[t._v("已售"+t._s(e.id))]),a("div",{staticClass:"select-goods-cal-item"},[t._v("\n                            *"+t._s(e.buy_num)+"\n                            ")])])])}),t._m(5)],2)]),a("section",{staticClass:"myweui-cells weui-cells"},[a("a",{staticClass:"weui-cell myweui-cell cell-height-88 weui-cell_access",staticStyle:{color:"#2c3e50"},attrs:{href:"javascript:;"},on:{click:t.goCoupons}},[t._m(6),t.o_c_1000?a("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":".3rem"}},[t._v(t._s(t.o_c_1000.batch_title))]):a("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":".3rem"}},[t._v("点击选择")])]),a("div",{staticClass:"weui-cell myweui-cell cell-height-88"},[t._m(7),a("div",{staticClass:"weui-cell__ft",staticStyle:{color:"#00c203"}},[t._v(t._s(t.data.total_amount/100)+"元")])])]),t.CardData?t._e():a("section",{staticClass:"vip-card"},[a("div",{staticClass:"weui-cells myweui-cells",on:{click:t.GoKaika}},[a("a",{staticClass:"weui-cell myweui-cell vip-cell weui-cell_access",attrs:{href:"javascript:;"}},[a("div",{staticClass:"weui-cell__bd"},[a("div"),a("p",{staticClass:"vip-cell-title",staticStyle:{color:"#2c3e50"}},[t._v(t._s(t.logo.proj_name)+"会员卡")]),t._m(8)]),a("div",{staticClass:"weui-cell__ft"})])])]),a("section",{staticClass:"myweui-cells weui-cells_checkbox",staticStyle:{"margin-top":".3rem"}},[t.CardData?a("label",{staticClass:"weui-cell myweui-cell cell-height-88 weui-check__label",staticStyle:{background:"#fff"},attrs:{for:"x10"}},[a("div",{staticClass:"weui-cell__bd"},[a("p",{staticStyle:{"font-size":"15px"}},[t._v("会员余额支付（余额："+t._s(t.CardData[0].balance/100)+"元）")])]),t._m(9)]):t._e(),t._m(10)]),a("div",{staticClass:"confirm-btn-container",staticStyle:{position:"fixed",bottom:"0","margin-top":"0","z-index":"98"}},[a("div",{staticClass:"btn-container"},[a("div",{staticClass:"confirm-btn-total-price",on:{click:t.isShow}},[a("p",[a("span",[t._v("合计:")]),a("span",{staticStyle:{color:"#00c203"}},[t._v(t._s(t.data.pay_amount/100)+"元")]),a("span",{staticClass:"iconfont icon-triangle-up",class:t.trangle?"trangle-down":"trangle-up",staticStyle:{"font-size":".26rem",color:"#BCBEC1"}})])]),a("div",{staticClass:"confirm-btn"},[a("a",{staticClass:"weui-btn weui-btn_primary",staticStyle:{"font-size":"0.34rem",color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.godo_goodOrder}},[t._v("确认支付")])])]),a("div",{staticClass:"order-details-card",staticStyle:{display:"none"}},[a("div",{staticClass:"order-details-card-title"},[a("p",[t._v("结算明细")]),a("div",{staticClass:"cancel-card-show",on:{click:t.isShow}},[t._v("取消")])]),a("div",{staticClass:"order-details-card-con"},[t._m(11),a("div",{staticClass:"card-con-item"},[t._l(t.data.items,function(e,i){return a("p",{key:i,staticClass:"color-a9"},[a("span",[t._v(t._s(e.goods_name))]),a("span",[t._v(t._s(e.unit_amount/100)+"元 X "+t._s(e.buy_num))])])}),t.offer_show?a("p",{staticClass:"color-a9"},[a("span",[t._v("优惠券")]),a("span",[t._v("减："+t._s(t.offer_amount)+"元")])]):t._e()],2)])])])]):t._e(),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask",staticStyle:{"z-index":"100"}}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),a("div",{staticClass:"weui-mask",staticStyle:{display:"none","z-index":"88"},attrs:{id:"iosMask"},on:{click:t.isShow}}),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(12)]):t._e(),t.Pwd_tip?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog1"}},[a("div",{staticClass:"weui-mask",staticStyle:{"z-index":"100"}}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v("请输入会员卡密码")]),a("div",{staticClass:"weui-dialog__bd nified"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.Pwd,expression:"Pwd"}],staticStyle:{border:"1px solid #ccc",width:"70%",height:".6rem","margin-bottom":".3rem"},attrs:{type:"password",name:""},domProps:{value:t.Pwd},on:{input:function(e){e.target.composing||(t.Pwd=e.target.value)}}})]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:t.PwdTip}},[t._v("取消")]),a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:t.setPwd}},[t._v("确定")])])])]):t._e()])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__bd"},[a("p",[t._v("优惠券")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"vip-cell-con"},[t._v("开卡卖品最低"),a("span",[t._v("25元起")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__ft"},[a("input",{staticClass:"weui-check",attrs:{type:"radio",name:"radio1",id:"x10",checked:"checked"}}),a("span",{staticClass:"weui-icon-checked",staticStyle:{transform:"scale(.8)"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"weui-cell myweui-cell cell-height-88 weui-check__label",staticStyle:{background:"#fff"},attrs:{for:"x20"}},[a("div",{staticClass:"weui-cell__bd"},[a("p",{staticStyle:{"font-size":"15px"}},[t._v("微信支付")])]),a("div",{staticClass:"weui-cell__ft"},[a("input",{staticClass:"weui-check",attrs:{type:"radio",name:"radio1",id:"x20"}}),a("span",{staticClass:"weui-icon-checked",staticStyle:{transform:"scale(.8)"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative",width:"0.96rem",height:"0.5rem","text-align":"center"}},[a("i",{staticClass:"iconfont icon-ai66",staticStyle:{"font-size":".5rem",color:"#00c203","line-height":".96rem"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-media-box weui-media-box_text"},[a("div",{staticClass:"weui-media-box__desc",staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticClass:"store-order-slogan"},[a("i",{staticClass:"iconfont icon-duigou"}),a("span",[t._v("随时退、过期退")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__bd"},[a("p",[t._v("优惠券")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__bd"},[a("p",[t._v("总价")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"vip-cell-con"},[t._v("开卡卖品最低"),a("span",[t._v("25元起")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__ft"},[a("input",{staticClass:"weui-check",attrs:{type:"radio",name:"radio1",id:"x10",checked:"checked"}}),a("span",{staticClass:"weui-icon-checked",staticStyle:{transform:"scale(.8)"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"weui-cell myweui-cell cell-height-88 weui-check__label",staticStyle:{background:"#fff"},attrs:{for:"x20"}},[a("div",{staticClass:"weui-cell__bd"},[a("p",{staticStyle:{"font-size":"15px"}},[t._v("微信支付")])]),a("div",{staticClass:"weui-cell__ft"},[a("input",{staticClass:"weui-check",attrs:{type:"radio",name:"radio1",id:"x20"}}),a("span",{staticClass:"weui-icon-checked",staticStyle:{transform:"scale(.8)"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-con-title"},[a("span",[t._v("商品")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],o=a("c93e"),c=(a("cadf"),a("551c"),a("a78e")),n=a.n(c),l=a("5880"),r={data:function(){return{Pwd_tip:!1,tnum:"",tableNum:"",on:"",data:"",orderDetails:"",other:"",tip_msg:"",loading:!0,CardData:"",Pwd:"",ScanGoods:"",order_no:"",o_c_1000:"",offer_amount:"",trangle:!1,offer_show:!1,o_rem:""}},beforeRouteEnter:function(t,e,a){document.title="订单结算",a()},computed:Object(o["a"])({},Object(l["mapState"])(["logo"])),created:function(){var t=sessionStorage.getItem("o_c_1000");t&&(this.o_c_1000=JSON.parse(t))},mounted:function(){this.ScanGoods=this.$route.params.Goods,this.on=n.a.get("goodsOrderNo"),this.tnum=n.a.get("goosdOrderTnum"),this.tableNum=n.a.get("tableNum"),this.godo_Order(),this.GetAccountCard()},methods:Object(o["a"])({},Object(l["mapActions"])(["ClearCart"]),{showTip:function(t,e){var a=this;a.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},e))},godo_Order:function(){var t=this,e=this,a=n.a.get("_lac_k_"),i=e.o_c_1000.id||"",s="/general_api/api/auth/ScanOrderDetais?token="+a+"&on="+this.on+"&coupon_id="+i+"&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(a){a.available?(e.loading=!1,e.data=a.data,e.order_no=a.data.order_no,e.orderDetails=a.data.items,null===a.pref_coupon?sessionStorage.removeItem("o_c_1000"):""===a.pref_coupon?(weui.topTips("当前优惠券无法使用",5e3),sessionStorage.removeItem("o_c_1000"),t.o_c_1000=""):(e.offer_amount=a.pref_coupon.prep_amount/100,e.offer_show=!0)):0==a.available&&"user_no_login"==a.messages[0]?(e.loading=!1,e.showTip("用户未登录")):(e.showTip(a.messages[0]),e.loading=!1)})},GetAccountCard:function(){var t=this,e=n.a.get("_lac_k_"),a="/general_api/api/auth/GetAccountCard?token="+e+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){e.available&&(t.CardData=e.obj),t.loading=!1})},PwdTip:function(){var t=this;t.Pwd_tip=!1},godo_ScangoodOrder:function(){var t=this,e=this;e.loading=!0;var a=e.tnum,i=n.a.get("_lac_k_");if("-1"!=e.CardData&&e.CardData)if(document.getElementById("x20").checked){var s=e.o_c_1000.id||"",o=e.o_rem;o||(o=""),o=encodeURIComponent(encodeURIComponent(o));r="/general_api/api/auth/GetWxObj?ct=201101&token="+i+"&o_rem="+o+"&coupon_id="+s+"&tnum="+a+"&ts="+Date.parse(new Date);fetch(r).then(function(t){return t.json()}).then(function(t){console.log(t),-1==t.code?(e.loading=!1,e.showTip(t.text)):0==t.code?(e.loading=!1,e.other=t.other,e.onBridgeReady()):0==t.available&&"user_no_login"==t.messages[0]&&e.showTip("用户未登录")})}else e.loading=!1,e.Pwd_tip=!0;else{var c=e.o_c_1000.id||"",l=e.o_rem;l||(l=""),l=encodeURIComponent(encodeURIComponent(l));var r="/general_api/api/auth/GetWxObj?ct=201101&tnum="+a+"&coupon_id="+c+"&token="+i+"&o_rem="+l+"&ts="+Date.parse(new Date);fetch(r).then(function(t){return t.json()}).then(function(a){console.log(a),-1==a.code?(e.loading=!1,e.showTip(a.text)):0==a.code?(e.loading=!1,e.other=a.other,e.onBridgeReady(),t.ClearCart()):0==a.available&&"user_no_login"==a.messages[0]&&(e.loading=!1,e.showTip("用户未登录"))})}},setPwd:function(){var t=this,e=n.a.get("_lac_k_"),a=t.tnum,i=t.o_c_1000.id||"",s=t.o_rem;s||(s=""),s=encodeURIComponent(encodeURIComponent(s));var o="/general_api/api/auth/GetWxObj?ct=101001&token="+e+"&o_rem="+s+"&coupon_id="+i+"&tnum="+a+"&pwd="+t.Pwd+"&unicode="+t.CardData[0].mc_num+"&ts="+Date.parse(new Date);t.loading=!0,t.Pwd_tip=!1,fetch(o).then(function(t){return t.json()}).then(function(e){t.loading=!1,"-1"==e.code?(t.loading=!1,t.Pwd_tip=!1,t.showTip(e.text),t.Pwd=""):"0"==e.code?(t.loading=!1,t.Pwd_tip=!1,t.showTip("支付成功"),t.Pwd="",setTimeout(function(){"tcssGoods"==t.ScanGoods?location.href="/general_api/tcss/index#/myTicket":location.href="/general_api/tcss/index#/ScanGoodsOrder/"+t.on+"/"+t.tableNum},100)):0==e.available&&"user_no_login"==e.messages[0]?(t.Pwd_tip=!1,t.Pwd="",t.showTip("用户未登录")):0==e.available&&"trade_status_invalid"==e.messages[0]&&(t.Pwd_tip=!1,t.Pwd="",t.showTip("请勿重复支付"))})},godo_goodOrder:function(){var t=this,e=this;e.loading=!0;var a=e.tnum,i=n.a.get("_lac_k_");if("-1"!=e.CardData&&e.CardData)if(document.getElementById("x20").checked){var s=e.o_c_1000.id||"";c="/general_api/api/auth/GetWxObj?ct=201101&token="+i+"&tnum="+a+"&coupon_id="+s+"&ts="+Date.parse(new Date);fetch(c).then(function(t){return t.json()}).then(function(t){console.log(t),-1==t.code?(e.loading=!1,e.showTip(t.text)):0==t.code?(e.loading=!1,e.other=t.other,e.onBridgeReady()):0==t.available&&"user_no_login"==t.messages[0]&&e.showTip("用户未登录")})}else e.loading=!1,e.Pwd_tip=!0;else{var o=e.o_c_1000.id||"",c="/general_api/api/auth/GetWxObj?ct=201101&tnum="+a+"&coupon_id="+o+"&token="+i+"&ts="+Date.parse(new Date);fetch(c).then(function(t){return t.json()}).then(function(a){console.log(a),-1==a.code?(e.loading=!1,e.showTip(a.text)):0==a.code?(e.loading=!1,e.other=a.other,e.onBridgeReady(),t.ClearCart()):0==a.available&&"user_no_login"==a.messages[0]&&(e.loading=!1,e.showTip("用户未登录"))})}},onBridgeReady:function(){var t=this,e=t.other;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:"MD5",paySign:e.paySign},function(e){"get_brand_wcpay_request:ok"==e.err_msg?"tcssGoods"==t.ScanGoods?location.href="/general_api/tcss/index#/myTicket":location.href="/general_api/tcss/index#/ScanGoodsOrder/"+t.on+"/"+t.tableNum:"get_brand_wcpay_request:cancel"==e.err_msg?alert("您取消了付款"):"get_brand_wcpay_request:fail"==e.err_msg&&alert("支付失败")})},GoKaika:function(){location.href="/general_api/tcss/index/?#/purchasingCard/purchasing"},isShow:function(){this.trangle=!this.trangle;var t=$("#iosMask"),e=$(".order-details-card");this.trangle?(t.fadeIn(200),e.slideDown(400)):(t.fadeOut(200),e.slideUp(400))},goCoupons:function(){var t=this.order_no,e=this.ScanGoods;this.$router.push({name:"couponsForGoods",params:{order_no:t,Goods:e}})}})},d=r,_=(a("ba94"),a("2877")),u=Object(_["a"])(d,i,s,!1,null,null,null);e["default"]=u.exports}}]);