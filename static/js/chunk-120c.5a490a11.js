(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-120c"],{"16d1":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticStyle:{background:"#EFEFF4",width:"100%",height:"100%"}},[e("div",{staticClass:"store-weui-panel weui-panel weui-panel_access",staticStyle:{"margin-bottom":"2.8rem"}},[e("div",{staticClass:"weui-panel__bd"},[t._l(t.orderDetails,function(a){return e("div",{staticClass:"weui-media-box weui-media-box_appmsg"},[e("div",{staticClass:"weui-media-box__hd"},[e("img",{staticClass:"weui-media-box__thumb",attrs:{src:"http://pe1s.static.pdr365.com/"+a.pic_url,alt:""}})]),e("div",{staticClass:"weui-media-box__bd"},[e("div",{staticClass:"select-goods-info"},[e("div",{staticClass:"select-goods-info-title"},[t._v(t._s(a.goods_name))]),e("div",{staticClass:"select-goods-info-vol"},[t._v(t._s(a.goods_name))]),e("div",{staticClass:"select-goods-info-price"},[e("span",[t._v(t._s(a.pay_amount/100)+"元")])])])]),e("div",{staticClass:"store-goods-cal"},[e("p",[t._v("已售"+t._s(a.id))]),e("div",{staticClass:"select-goods-cal-item"},[t._v("\n                        *"+t._s(a.buy_num)+"\n                        ")])])])}),t._m(0)],2)]),e("section",{staticClass:"myweui-cells weui-cells"},[t._m(1),e("div",{staticClass:"weui-cell myweui-cell cell-height-88"},[t._m(2),e("div",{staticClass:"weui-cell__ft",staticStyle:{color:"#00c203"}},[t._v(t._s(t.data.pay_amount/100)+"元")])])]),"-1"==t.CardData?e("section",{staticClass:"vip-card",staticStyle:{"padding-bottom":"2.8rem"}},[e("div",{staticClass:"weui-cells myweui-cells",on:{click:t.GoKaika}},[t._m(3)])]):t._e(),e("div",{staticClass:"confirm-btn-container",staticStyle:{position:"fixed",bottom:"0","margin-top":"0"}},[e("div",{staticClass:"btn-container"},[e("div",{staticClass:"confirm-btn-total-price"},[e("p",[e("span",[t._v("合计:")]),e("span",{staticStyle:{color:"#00c203"}},[t._v(t._s(t.data.pay_amount/100)+"元")])])]),e("div",{staticClass:"confirm-btn"},[e("a",{staticClass:"weui-btn weui-btn_primary",staticStyle:{"font-size":"0.34rem",color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.godo_goodOrder}},[t._v("确认支付")])])])]),t.tip_msg?e("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[e("div",{staticClass:"weui-mask"}),e("div",{staticClass:"weui-dialog"},[e("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),e("div",{staticClass:"weui-dialog__ft"},[e("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(a){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?e("div",{attrs:{id:"loadingToast"}},[e("div",{staticClass:"weui-mask_transparent"}),t._m(4)]):t._e()])},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"weui-media-box weui-media-box_text"},[e("div",{staticClass:"weui-media-box__desc",staticStyle:{display:"flex","justify-content":"space-between"}},[e("div",{staticClass:"store-order-slogan"},[e("i",{staticClass:"iconfont icon-duigou"}),e("span",[t._v("随时退、过期退")])])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{staticClass:"weui-cell myweui-cell cell-height-88 weui-cell_access",staticStyle:{color:"#2c3e50"},attrs:{href:"javascript:;"}},[e("div",{staticClass:"weui-cell__bd"},[e("p",[t._v("优惠券")])]),e("div",{staticClass:"weui-cell__ft"},[t._v("无可用")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"weui-cell__bd"},[e("p",[t._v("小计")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a",{staticClass:"weui-cell myweui-cell vip-cell weui-cell_access",attrs:{href:"javascript:;"}},[e("div",{staticClass:"weui-cell__bd"},[e("div"),e("p",{staticClass:"vip-cell-title",staticStyle:{color:"#2c3e50"}},[t._v("影院会员卡")]),e("p",{staticClass:"vip-cell-con"},[t._v("开卡卖品最低"),e("span",[t._v("25元起")])])]),e("div",{staticClass:"weui-cell__ft"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"weui-toast"},[e("i",{staticClass:"weui-loading weui-icon_toast"}),e("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],n=e("a78e"),c=e.n(n),o=(e("d559"),e("c89d"),e("f398"),e("2f62"),{data:function(){return{tnum:"",tableNum:"",on:"",data:"",orderDetails:"",other:"",tip_msg:"",loading:!0,CardData:""}},beforeRouteEnter:function(t,a,e){document.title="订单结算",e()},mounted:function(){this.tnum=this.$route.params.tnum,this.on=c.a.get("goodsOrderNo"),this.godo_Order(),this.GetAccountCard()},methods:{showTip:function(t,a){var e=this;e.tip_msg=t,a&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){e.tip_msg=""},a))},godo_Order:function(){var t=this,a=c.a.get("_lac_k_"),e="/general_api/api/auth/ScanOrderDetais?token="+a+"&on="+this.on+"&ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(a){a.available?(t.data=a.data,t.orderDetails=a.data.items,t.loading=!1):0==a.available&&"user_no_login"==a.messages[0]&&t.showTip("用户未登录")})},GetAccountCard:function(){var t=this;console.log("11");var a="/general_api/api/GetAccountCard?ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(a){t.CardData=a.obj,t.loading=!1})},godo_goodOrder:function(){var t=this;console.log("11"),t.loading=!0;var a=c.a.get("_lac_k_"),e="/general_api/api/auth/GetWxObj?ct=201101&tnum="+t.tnum+"&token="+a+"&ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(a){console.log(a),-1==a.code?(t.loading=!1,t.showTip(a.text)):0==a.code?(t.loading=!1,t.other=a.other,t.onBridgeReady()):0==a.available&&"user_no_login"==a.messages[0]&&t.showTip("用户未登录")})},onBridgeReady:function(){var t=this.other;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:"MD5",paySign:t.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg||("get_brand_wcpay_request:cancel"==t.err_msg?alert("您取消了付款"):"get_brand_wcpay_request:fail"==t.err_msg&&alert("支付失败"))})},GoKaika:function(){location.href="/general_api/tcss/index#/purchasingCard/purchasing"}}}),l=o,r=(e("26d7"),e("2877")),d=Object(r["a"])(l,i,s,!1,null,null,null);a["default"]=d.exports},"26d7":function(t,a,e){"use strict";var i=e("6124"),s=e.n(i);s.a},6124:function(t,a,e){}}]);