(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7540"],{"2cc3":function(t,i,e){"use strict";var a=e("fd03"),o=e.n(a);o.a},"947d":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[t._m(0),e("div",{staticClass:"login-mid"},[e("form",{staticClass:"form-wrapper",attrs:{autocomplete:"off",method:"POST",id:"login-formWrapper"}},[e("div",{staticClass:"login-mid-form"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.UserPhone,expression:"UserPhone"}],staticClass:"text-input",attrs:{type:"text",name:"username",maxlength:"60",placeholder:"请输入手机号",value:"",id:"mobile"},domProps:{value:t.UserPhone},on:{input:function(i){i.target.composing||(t.UserPhone=i.target.value)}}})]),e("div",{staticClass:"login-mid-form login-mid-form-code"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.ValidateCode,expression:"ValidateCode"}],staticClass:"text-input-code",staticStyle:{"margin-left":"0"},attrs:{type:"number",id:"img_validate_code",name:"verifycode",value:"",placeholder:"请输入验证码",autocomplete:"off",maxlength:"6"},domProps:{value:t.ValidateCode},on:{input:function(i){i.target.composing||(t.ValidateCode=i.target.value)}}}),e("Button",{staticStyle:{float:"right",display:"inline-block","margin-top":".3rem",border:"none","font-size":"0.28rem"},on:{click:t.godo_code}},[t._v(t._s(t.time))])],1),e("div",{staticClass:"login-box"},[e("div",{staticClass:"login",on:{click:t.godo_login}},[t._v("登录")])])])]),t._m(1),t.loading?e("div",{attrs:{id:"loadingToast"}},[e("div",{staticClass:"weui-mask_transparent"}),e("div",{staticClass:"weui-toast"},[e("i",{staticClass:"weui-loading weui-icon_toast"}),e("p",{staticClass:"weui-toast__content"},[t._v(t._s(t.loading))])])]):t._e(),t.tip_msg?e("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[e("div",{staticClass:"weui-mask"}),e("div",{staticClass:"weui-dialog"},[e("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),e("div",{staticClass:"weui-dialog__ft"},[e("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(i){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e()])},o=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"login-top"},[e("img",{staticClass:"login-top-logo",attrs:{src:"http://pe1s.static.pdr365.com/timg.jpeg"}}),e("p",{staticClass:"login-top-title"},[t._v("欢迎来到腾讯好时光")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("p",{staticClass:"login-hint"},[t._v("点击登录，即代表已阅读并同意"),e("span",[t._v("《好时光影院相关条例》")])])}],s={data:function(){return{loading:"",login:!1,tip_msg:"",UserPhone:"",ValidateCode:"",time:"获取验证码",num:"",apid:""}},beforeRouteEnter:function(t,i,e){document.title="腾讯好时光",e()},created:function(){this.apid=this.$route.params.apid},methods:{back:function(){router.go(-1)},showTip:function(t,i){var e=this;e.tip_msg=t,i&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){e.tip_msg=""},i))},showlogin:function(t,i){var e=this;e.loading=t,i&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){e.loading=""},i))},godo_code:function(){var t=this,i=t.UserPhone,e=/^[1][3,4,5,7,8,9][0-9]{9}$/;if(e.test(i)){t.showlogin("正在发送验证码",1e3);var a="/general_api/api/MessageCode?p="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(i){i.available&&(t.loading=!1)}),t.num=3e5,t.daojishi(t.num)}else t.showTip("请输入正确的手机号")},daojishi:function(t){var i=this;if(0!=i.num){var e=t/1e3;i.time=e+" S",i.num=t,setTimeout(function(){t-=1e3,i.daojishi(t)},1e3)}else{var a="发送验证码";i.time=a}},godo_login:function(){var t=this,i=t.UserPhone,e=t.ValidateCode,a=t.apid,o="/general_api/api/Login?p="+i+"&code="+e+"&apid="+a+"&ts="+Date.parse(new Date);fetch(o).then(function(t){return t.json()}).then(function(i){i.available?(document.cookie="_lac_k_="+i.data,location.href="/general_api/tcss/index#/purchasingCard/Scanpurchasing"):t.showTip(i.messages[0])}),t.login=!1}}},n=s,l=(e("2cc3"),e("2877")),c=Object(l["a"])(n,a,o,!1,null,null,null);i["default"]=c.exports},fd03:function(t,i,e){}}]);