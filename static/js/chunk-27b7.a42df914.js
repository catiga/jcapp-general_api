(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27b7"],{"214f":function(t,e,i){"use strict";var s=i("32e9"),a=i("2aba"),o=i("79e5"),n=i("be13"),r=i("2b4c");t.exports=function(t,e,i){var c=r(t),d=i(n,c,""[t]),l=d[0],u=d[1];o(function(){var e={};return e[c]=function(){return 7},7!=""[t](e)})&&(a(String.prototype,t,l),s(RegExp.prototype,c,2==e?function(t,e){return u.call(t,this,e)}:function(t){return u.call(t,this)}))}},"28a5":function(t,e,i){i("214f")("split",2,function(t,e,s){"use strict";var a=i("aae3"),o=s,n=[].push,r="split",c="length",d="lastIndex";if("c"=="abbc"[r](/(b)*/)[1]||4!="test"[r](/(?:)/,-1)[c]||2!="ab"[r](/(?:ab)*/)[c]||4!="."[r](/(.?)(.?)/)[c]||"."[r](/()()/)[c]>1||""[r](/.?/)[c]){var l=void 0===/()??/.exec("")[1];s=function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!a(t))return o.call(i,t,e);var s,r,u,p,g,m=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),_=0,v=void 0===e?4294967295:e>>>0,f=new RegExp(t.source,h+"g");l||(s=new RegExp("^"+f.source+"$(?!\\s)",h));while(r=f.exec(i)){if(u=r.index+r[0][c],u>_&&(m.push(i.slice(_,r.index)),!l&&r[c]>1&&r[0].replace(s,function(){for(g=1;g<arguments[c]-2;g++)void 0===arguments[g]&&(r[g]=void 0)}),r[c]>1&&r.index<i[c]&&n.apply(m,r.slice(1)),p=r[0][c],_=u,m[c]>=v))break;f[d]===r.index&&f[d]++}return _===i[c]?!p&&f.test("")||m.push(""):m.push(i.slice(_)),m[c]>v?m.slice(0,v):m}}else"0"[r](void 0,0)[c]&&(s=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(i,a){var o=t(this),n=void 0==i?void 0:i[e];return void 0!==n?n.call(i,o,a):s.call(String(o),i,a)},s]})},"7dfb":function(t,e,i){"use strict";var s=i("b0a0"),a=i.n(s);a.a},a925:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%","padding-bottom":"60px"}},[i("div",{staticClass:"scan-top"},[i("img",{staticClass:"scan-logo",attrs:{src:"http://pe1s.static.pdr365.com/timg.jpeg"}}),i("div",{staticClass:"scan-content"},[i("select",{staticClass:"scan-content-nm",staticStyle:{background:"#000",border:"none","-webkit-appearance":"none","-moz-appearance":"none","-ms-appearance":"none",appearance:"none"},attrs:{id:"select"},on:{change:t.select_store}},t._l(t.StoreList,function(e){return i("option",{domProps:{value:e.id,selected:t.sid==e.id}},[t._v(t._s(e.store_name))])})),i("p",{staticClass:"scan-content-num"},[t._v("当前桌号："+t._s(t.tableNum))])]),i("div",{staticClass:"scan-personal-center"},[i("p",{on:{click:t.godo_my}},[t._v("个人中心")]),i("div")])]),i("div",{staticClass:"goods"},[i("div",{ref:"menuWrapper",staticClass:"menu-wrapper",staticStyle:{overflow:"auto"}},[i("ul",t._l(t.groupList,function(e,s){return i("li",{key:s,class:s===t.menuCurIndex?"menu-selected":"",on:{click:function(i){t.menuClick(s,e.id,i)}}},[i("p",[t._v(t._s(e.cat_name_cn))])])}))]),i("div",{ref:"goodsWrapper",staticClass:"goods-wrapper",staticStyle:{overflow:"auto"}},[t.groupList.length>0?i("div",{staticClass:"goods-wrapper-title"},[t._v(t._s(t.groupList[t.menuCurIndex].cat_name_cn))]):t._e(),i("ul",[0===t.goodsList.length?i("div",{staticStyle:{"margin-top":"20px","font-size":"20px",width:"100%","text-align":"center"}}):t._e(),t._l(t.goodsList,function(e,s){return i("li",{key:s},[i("div",{staticClass:"goods-item-box"},[i("div",{staticClass:"goods-img"},[null==e[0].stock||"0"==e[0].stock?i("span",{staticStyle:{padding:"2px 4px",background:"#CC6666",position:"absolute",color:"#fff","z-index":"1"}},[t._v("售罄")]):t._e(),i("img",{attrs:{src:"http://pe1s.static.pdr365.com/null"!==e[0].sku_img?e[0].sku_img:"",alt:""}})]),i("div",{staticClass:"goods-item"},[i("div",{staticClass:"goods-item-title"},[i("span",[t._v(t._s(e[1].goods_name))])]),t._l(e[0].skus,function(e,s,a){return i("div",{key:a,staticClass:"goods-item-sku"},[i("span",[t._v(t._s(s)+":")]),i("span",[t._v(t._s(e))])])}),i("div",{staticClass:"goods-item-price"},[i("span",[t._v("¥"+t._s(e[1].goods_price/100))])])],2),i("div",{staticClass:"goods-control"},[i("cartControl",{attrs:{foods:e,stock:e[0].stock}})],1)])])})],2),t.goodsList.length>0?i("div",{staticClass:"bottom-tip"},[t._v("已经是最底了哦～")]):t._e()]),i("comboCart",{directives:[{name:"show",rawName:"v-show",value:t.comboShow,expression:"comboShow"}],attrs:{combo:t.comboData}}),i("shopCart",{directives:[{name:"show",rawName:"v-show",value:!t.comboShow,expression:"!comboShow"}],attrs:{cartList:t.cartList,bottom:t.bottom},on:{"create-order":t.createOrder}})],1),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e()])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],o=(i("28a5"),i("ac6a"),i("c93e")),n=i("a78e"),r=i.n(n),c=i("d559"),d=i("c89d"),l=i("f398"),u=i("2f62"),p={data:function(){return{tableNum:"",loading:!1,tip_msg:"",choose:!1,GoPay:!1,StoreList:"",menuCurIndex:0,comboData:[],sid:"",bottom:"bottom:0"}},beforeRouteEnter:function(t,e,i){document.title="点餐",i()},computed:Object(o["a"])({},Object(u["c"])(["groupList","goodsList","firCatId","cartList","comboShow"])),created:function(){var t=this.$route.params.sid;t?(this.sid=t,r.a.set("s_id",t)):this.sid=r.a.get("s_id"),this.tableNum=this.$route.params.tableNum,document.cookie="tableNum="+this.$route.params.tableNum+";path=/"},mounted:function(){this.GetStoreList()},methods:Object(o["a"])({},Object(u["b"])(["getGoodsList","getGroupList","ToggleComboShow","initFirCatId"]),{_initScroll:function(){},CheckLogin:function(){var t=r.a.get("_lac_ap_");if(t)this.initFirCatId(),this.getGroupList("ScavengingPointMea");else{var e="/general_api/tcss/index#/ScavengingPointMea/"+this.tableNum+"/"+this.sid;e=encodeURIComponent(encodeURIComponent(e)),location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()+"&bu="+e}},menuClick:function(t,e,i){this.menuCurIndex=t;var s={};s.id=e,s.sid=this.sid,console.log(s),this.getGoodsList(s)},goCombo:function(t){this.comboData=t,this.ToggleComboShow()},showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},createOrder:function(){var t=this,e=r.a.get("_lac_k_");r.a.get("_lac_ated_"),r.a.get("_lac_op_");if(e)t.GoGoodsPay();else{var i=r.a.get("_lac_ap_");i?this.$router.push({name:"login",params:{apid:i}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}},GoGoodsPay:function(){var t=this,e="";t.loading=!0,this.cartList.forEach(function(t,i){var s="";s+=t[1].gt+","+t[1].id+","+t[0].id+",",e+=s.slice(0,s.length-1)+","+t[0].count+",;"});var i=e.slice(0,e.length-1),s=r.a.get("_lac_k_"),a=t.sid;console.log(a+"=cinemaId"),console.log("gs======"+i);var o="/general_api/api/auth/createOrder?dss=150&tbn="+t.tableNum+"&gs="+i+"&sid="+a+"&token="+s+"&ts="+Date.parse(new Date);fetch(o).then(function(t){return t.json()}).then(function(e){if(console.log(e),e.available){t.loading=!1;var i=e.data[0],s=e.data[1];document.cookie="goodsOrderNo="+s[0].order_no+";path=/",document.cookie="goosdOrderTnum="+i.tnum+";path=/",location.href="/general_api/tcss/index/?#/ConfirmGoodsOrder/ScanGoods"}else t.loading=!1})},getCookie:function(t){for(var e=document.cookie,i=e.split("; "),s=0;s<i.length;s++){var a=i[s].split("=");if(a[0]==t)return a[1]}return""},godo_my:function(){var t=r.a.get("_lac_k_");if(t)this.$router.push({name:"personalCenter",params:{st:"scan"}});else{var e=r.a.get("_lac_ap_");e?this.$router.push({name:"login",params:{apid:e}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}},GetStoreList:function(){var t=this,e="/general_api/api/scanStoreList?ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){t.CheckLogin(),e?(t.StoreList=e,t.sid||(t.sid=e[0].id)):t.showTip("获取门店失败")})},select_store:function(t){this.sid=t.target.value;var e={};e.id=this.firCatId,e.sid=this.sid,r.a.set("s_id",e.sid),this.getGoodsList(e)}}),watch:{firCatId:function(){if(console.log("scan order foods="+this.firCatId),-1!==this.firCatId){var t={};t.id=this.firCatId,t.sid=this.sid,this.getGoodsList(t)}}},components:{cartControl:c["a"],shopCart:d["a"],comboCart:l["a"]}},g=p,m=(i("7dfb"),i("2877")),h=Object(m["a"])(g,s,a,!1,null,null,null);e["default"]=h.exports},aae3:function(t,e,i){var s=i("d3f4"),a=i("2d95"),o=i("2b4c")("match");t.exports=function(t){var e;return s(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==a(t))}},b0a0:function(t,e,i){}}]);