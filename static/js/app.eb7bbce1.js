(function(t){function e(e){for(var i,o,c=e[0],r=e[1],l=e[2],_=0,u=[];_<c.length;_++)o=c[_],s[o]&&u.push(s[o][0]),s[o]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);d&&d(e);while(u.length)u.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,c=1;c<a.length;c++){var r=a[c];0!==s[r]&&(i=!1)}i&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},s={app:0},n=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/general_api/static/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=r;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"028e":function(t,e,a){"use strict";var i=a("2fd2"),s=a.n(i);s.a},"034f":function(t,e,a){"use strict";var i=a("04f5"),s=a.n(i);s.a},"04f5":function(t,e,a){},"16d5":function(t,e,a){},1982:function(t,e,a){"use strict";var i=a("4729"),s=a.n(i);s.a},"1a2c":function(t,e,a){},"1d3d":function(t,e,a){},"1f73":function(t,e,a){},2191:function(t,e,a){"use strict";var i=a("16d5"),s=a.n(i);s.a},"25cd":function(t,e,a){"use strict";var i=a("9db0"),s=a.n(i);s.a},"26d7":function(t,e,a){"use strict";var i=a("6124"),s=a.n(i);s.a},"2cc3":function(t,e,a){"use strict";var i=a("fd03"),s=a.n(i);s.a},"2fd2":function(t,e,a){},"340e":function(t,e,a){},3410:function(t,e,a){},"387b":function(t,e,a){},4116:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bottom-tab"},[a("a",{staticClass:"store",attrs:{href:"javascript:void(0)","data-status":"store"===t.active?"active":""},on:{click:t.store}},[a("div",{staticClass:"icon"})]),a("a",{staticClass:"movie",attrs:{href:"javascript:void(0)","data-status":"movie"===t.active?"active":""},on:{click:t.movie}},[a("div",{staticClass:"icon"})]),a("a",{staticClass:"cinema",attrs:{href:"javascript:void(0)","data-status":"cinema"===t.active?"active":""},on:{click:t.cinema}},[a("div",{staticClass:"icon"})]),a("a",{staticClass:"mine",attrs:{href:"javascript:void(0)","data-status":"mine"===t.active?"active":""},on:{click:t.mine}},[a("div",{staticClass:"icon"})])])},s=[],n=(a("cadf"),a("551c"),a("a78e")),o=a.n(n),c={props:{active:{type:String,default:""}},methods:{movie:function(){this.$router.push({name:"index",params:{mid:"2"}})},store:function(){this.$router.push({name:"storeList"})},cinema:function(){this.$router.push({name:"cinemaList",params:{mid:"2"}})},mine:function(){var t=o.a.get("_lac_k_");if(t)this.$router.push({name:"personalCenter"});else{var e=o.a.get("_lac_ap_");e?this.$router.push({name:"login",params:{apid:e}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}}}},r=c,l=(a("a13f"),a("2877")),d=Object(l["a"])(r,i,s,!1,null,"21601724",null);e["a"]=d.exports},4196:function(t,e,a){"use strict";var i=a("cda1"),s=a.n(i);s.a},4244:function(t,e,a){},"456dc":function(t,e,a){"use strict";var i=a("8145"),s=a.n(i);s.a},4729:function(t,e,a){},"51b8":function(t,e,a){"use strict";var i=a("c70f"),s=a.n(i);s.a},"51bf":function(t,e,a){},"526c":function(t,e,a){"use strict";var i=a("51bf"),s=a.n(i);s.a},"56d7":function(t,e,a){"use strict";a.r(e);var i={};a.r(i),a.d(i,"totalPrice",function(){return Ui});var s={};a.r(s),a.d(s,"getGroupList",function(){return is}),a.d(s,"getGoodsList",function(){return ss}),a.d(s,"ListenCart",function(){return ns}),a.d(s,"AddToCart",function(){return os}),a.d(s,"ReleaseToCart",function(){return cs}),a.d(s,"ClearCart",function(){return rs}),a.d(s,"ToggleComboShow",function(){return ls}),a.d(s,"initFirCatId",function(){return ds}),a.d(s,"getLogo",function(){return _s});a("456d"),a("ac6a"),a("cadf"),a("551c");var n=a("8bbf"),o=a.n(n),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],l=(a("034f"),a("2877")),d={},_=Object(l["a"])(d,c,r,!1,null,null,null),u=_.exports,m=a("6389"),p=a.n(m),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%",height:"100%"}},[a("div",{staticClass:"swiper-gb",staticStyle:{height:"1rem"}},[a("swiper",{ref:"indexSwiper",staticClass:"banner-box",attrs:{options:t.swiperOption}},[a("swiper-slide",{staticClass:"banner-slide",staticStyle:{transform:"scale(1)",padding:"0"}},[a("div")])],1),a("div",{staticClass:"city-box"},[a("div",{staticClass:"city-name",on:{click:t.godo_cinemas}},[t._v("\n\t\t\t\t"+t._s(""==t.cinemanm?"...":t.cinemanm)+"\n\t\t\t\t")]),t._m(0)])],1),a("div",{staticClass:"movie-box"},[a("div",{staticClass:"hotsShowing"},[a("div",{staticClass:"hotsShowing-top"},[t._m(1),a("div",{staticClass:"hotsShowing-top-r"},[a("div",{staticClass:"hotsShowing-top-r-num"},[t._v("共"+t._s(t.MovieNum)+"部")]),a("span",{staticClass:"show-icon show"})])]),a("div",{staticClass:"hotsShowing-bottom",staticStyle:{position:"relative"}},[a("div",{ref:"movieWrapper",staticClass:"wrapper",staticStyle:{height:"100%",position:"absolute",left:"0",top:"0"}},[a("ul",{style:t.movieListWidth},t._l(t.MovieList,function(e,i){return a("li",[a("img",{attrs:{src:null==e.img?"http://pe1s.static.pdr365.com/default_movie_pic.jpg":e.img},on:{click:function(a){t.videoDetails(e.properties.id,i)}}}),a("p",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(e.name))]),a("div",{on:{click:function(a){t.godo_buy(e.properties.id,i)}}},[t._v("购票")])])}))])])]),a("div",{staticClass:"hotsShowing",staticStyle:{"padding-bottom":"50px"}},[t._m(2),a("div",{staticClass:"hotsShowing-bottom",staticStyle:{position:"relative"}},[a("div",{ref:"comingWrapper",staticClass:"wrapper",staticStyle:{height:"100%",position:"absolute",left:"0",top:"0"}},[a("ul",{style:t.comingListWidth},t._l(t.ComeList,function(e,i){return a("li",[a("img",{attrs:{src:null==e.img?"http://pe1s.static.pdr365.com/default_movie_pic.jpg":e.img},on:{click:function(a){t.GoIngvideoDetails(e.id,i)}}}),a("p",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[t._v(t._s(e.nm))]),a("span",[t._v(t._s(e.rt))])])}))])])])]),a("tabBottom",{attrs:{active:"movie"}}),t.forbid?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd",staticStyle:{"font-size":".3rem",padding:".6rem 20px .28rem","min-height":"24px",color:"#333333"}},[t._v("监测到离您最近的影城")]),a("div",{staticClass:"input-box",staticStyle:{"font-size":".3rem","margin-bottom":".3rem"}},[t._v("\n\t            好时光影城\n\t            ")]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:t.godo_cinema}},[t._v("切换")]),a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.forbid=!1}}},[t._v("确定")])])])]):t._e(),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(3)]):t._e()],1)},h=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"am-list-arrow"},[a("span",{staticClass:"am-icon arrow vertical"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hotsShowing-top-l"},[a("div",{staticClass:"hotsShowing-top-l-main"}),a("div",{staticClass:"hotsShowing-top-l-title"},[t._v("热映")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hotsShowing-top"},[a("div",{staticClass:"hotsShowing-top-l"},[a("div",{staticClass:"hotsShowing-top-l-main"}),a("div",{staticClass:"hotsShowing-top-l-title"},[t._v("即将上映")])]),a("div",{staticClass:"hotsShowing-top-r"},[a("span",{staticClass:"show-icon show"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],g=a("c7cb"),f=g["a"],C=(a("d44d"),Object(l["a"])(f,v,h,!1,null,null,null)),w=C.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"details-bg"}),a("div",{staticClass:"video-details-content-box"},[a("div",{staticClass:"video-details-content-bj"},[a("img",{attrs:{src:null==t.MovieD.pic_entry?"http://pe1s.static.pdr365.com/default_movie_pic.jpg":t.MovieD.pic_entry}})]),a("div",{staticClass:"video-details-content"},[a("div",{staticClass:"video-details-content-img"},[a("img",{attrs:{src:null==t.MovieD.pic_entry?"http://pe1s.static.pdr365.com/default_movie_pic.jpg":t.MovieD.pic_entry}})]),a("div",{staticClass:"video-details-content-right"},[a("div",{staticClass:"video-details-content-right-title"},[a("p",[t._v(t._s(t.MovieD.film_name))]),a("div",[t._v(t._s(t.MovieD.film_dimensional))])]),a("p",{staticClass:"video-details-content-right-title-en"},[t._v(t._s(t.MovieD.film_name))]),a("p",{staticClass:"video-details-content-right-type"},[t._v(t._s(t.MovieD.film_type))]),a("p",{staticClass:"video-details-content-right-country"},[t._v(t._s(t.MovieD.film_region)+"|"+t._s(t.MovieD.time_diff)+"分钟")]),a("p",{staticClass:"video-details-content-right-title-time"},[t._v(t._s(t.MovieD.release_date)+" 上映")]),a("div",{staticClass:"video-details-content-right-collect",staticStyle:{"text-align":"right","padding-right":"1rem"}},[t._v(t._s(t.MovieD.film_score)+"\n\t\t\t\t\t")])])])]),a("div",{staticClass:"video-synopsis"},[a("div",{staticClass:"video-synopsis-top"},[a("p",{staticClass:"video-synopsis-title"},[t._v("简介")]),a("div",{staticClass:"video-synopsis-character"},[a("span",{class:t.synopsis,on:{click:t.go_none}},[t._v(t._s(t.MovieD.film_content))]),a("a",{class:t.showBtn,on:{click:t.go_block}},[t._v("展开")])])]),a("div",{staticClass:"video-synopsis-bottom"},[a("p",{staticClass:"video-synopsis-actor"},[t._v("演员")]),a("div",{staticClass:"video-synopsis-actor-img",staticStyle:{height:"2rem",position:"relative"}},[a("div",{ref:"actorWrapper",staticClass:"wrapper",staticStyle:{position:"absolute",left:"0",top:"0",height:"100%"}},[a("ul",{style:t.actorListWidth},t._l(t.MovieD.celebritys,function(e){return a("li",[a("img",{attrs:{src:e.title_img}}),a("span",[t._v(t._s(e.cele_name))])])}))])])])]),a("div",{staticClass:"stage-photo-box"},[a("div",{staticClass:"stage-photo"},[a("p",{staticClass:"stage-photo-title"},[t._v("剧照")]),a("div",{staticClass:"stage-photo-list",staticStyle:{position:"relative"}},[a("div",{ref:"stageScroll",staticClass:"wrapper",staticStyle:{position:"absolute",left:"0",top:"0",height:"100%"}},[a("ul",{style:t.stagePhotoWidth},t._l(t.MovieD.pictures,function(t){return a("li",[a("img",{attrs:{src:t.pic_url}})])}))])])])]),a("div",{staticClass:"gopay-box"},[a("div",{staticClass:"gopay",on:{click:t.go_cinema}},[t._v("立即购买")])]),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e()])},y=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],k=a("a78e"),x=a.n(k),S=a("1fba"),D={data:function(){return{loading:!0,synopsis:"synopsis-none",showBtn:"showBtn",mid:"",MovieD:"",index:"",actorListWidth:"",stagePhotoWidth:""}},beforeRouteEnter:function(t,e,a){document.title="影片详情",a()},created:function(){this.mid=this.$route.params.mid,this.index=this.$route.params.index,this.MovieDeatil()},methods:{MovieDeatil:function(){var t=this,e="/general_api/api/MovieDetails?movie_id="+t.mid+"&ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){0==e.code&&(t.MovieD=e.data,t.actorListWidth="width: ".concat(1.34*e.data.celebritys.length,"rem"),t.stagePhotoWidth="width: ".concat(1.88*e.data.pictures.length,"rem"),t.$nextTick(function(){t.actorScroll=new S["a"](t.$refs.actorWrapper,{click:!0,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1}),t.stageScroll=new S["a"](t.$refs.stageScroll,{click:!0,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1})})),t.loading=!1,console.log(e)})},back:function(){router.go(-1)},go_block:function(){var t=this;t.synopsis="synopsis-block",t.showBtn="noneBtn"},go_none:function(){var t=this;t.synopsis="synopsis-none",t.showBtn="showBtn"},go_cinema:function(){var t=x.a.get("cinemaId");this.$router.push({name:"schedule",params:{cinemaId:t,mid:this.mid,index:this.index}})}}},T=D,E=(a("526c"),Object(l["a"])(T,b,y,!1,null,null,null)),j=E.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"details-bg"}),a("div",{staticClass:"cinema-city"},[a("div",{staticClass:"c-city-box"},[a("router-link",{staticClass:"dy-list-content",attrs:{to:"/cityList"}},[a("div",{staticClass:"c-city-name",staticStyle:{color:"#a9a9a9"}},[t._v("\n\t\t\t\t"+t._s(t.city_name)+"\n\t\t\t\t")]),a("div",{staticClass:"c-am-list-arrow"},[a("span",{staticClass:"c-am-icon arrow vertical"})])])],1)]),a("div",{staticClass:"cinema-box"},[a("ul",{staticClass:"cinema-ul"},t._l(t.cinemaList,function(e){return a("li",{staticClass:"cinema-li",on:{click:function(a){t.godo_choose(e.cinema_id,e.id,e.store_name,e.city,e.zone,e.address)}}},[a("div",{staticClass:"cinema-li-top"},[a("p",{staticClass:"cinema-li-nm"},[t._v(t._s(e.store_name))]),t._m(0,!0)]),a("p",{staticClass:"cinema-li-info"},[t._v(t._s(e.city)+t._s(e.zone)+t._s(e.address))]),a("div",{staticClass:"cinema-li-distance"},[t._v("200m")])])}))]),a("tabBottom",{attrs:{active:"cinema"}}),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(1)]):t._e()],1)},I=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"cinema-li-price"},[t._v("29.8"),a("span",[t._v("元起")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],L=(a("6b54"),a("a481"),a("c5f6"),a("4116")),P={data:function(){return{loading:!0,cinemaList:"",city_name:""}},beforeRouteEnter:function(t,e,a){document.title="门店",a()},created:function(){this.GetStore()},methods:{GetStore:function(){var t=this,e=this,a=x.a.get("city_no");if(void 0==a){var i="/general_api/api/cityList?ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(a){if("0"==a.code&&a.data&&a.data.length>0){var i=Number(a.data[0].city_no),s="/general_api/api/StoreList?city_no="+i+"&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(t){e.loading=!1,0==t.code&&t.data&&t.data.length>0&&(e.cinemaList=t.data)});var n=x.a.get("city_name");t.decodeUnicodeNm(n)}else e.loading=!1})}else{i="/general_api/api/StoreList?city_no="+a+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(t){e.loading=!1,0==t.code&&t.data&&t.data.length>0&&(e.cinemaList=t.data)});var s=x.a.get("city_name");this.decodeUnicodeNm(s)}},decodeUnicodeNm:function(t){var e=this;t=t.replace(/\\/g,"%");var a=unescape(t);e.city_name=void 0==a?"":a},back:function(){this.$router.go(-1)},godo_choose:function(t,e,a,i,s,n){document.cookie="cinemaId="+t+";path=/",document.cookie="s_id="+e+";path=/";var o=i;s&&(o+=s),n&&(o+=n),this.encodeUnicodeAdd(o),this.encodeUnicodeName(a),this.$router.push({name:"index",params:{}})},encodeUnicodeAdd:function(t){for(var e=[],a=0;a<t.length;a++)e[a]=("00"+t.charCodeAt(a).toString(16)).slice(-4);x.a.set("storeAdd","\\u"+e.join("\\u"))},encodeUnicodeName:function(t){for(var e=[],a=0;a<t.length;a++)e[a]=("00"+t.charCodeAt(a).toString(16)).slice(-4);x.a.set("storeName","\\u"+e.join("\\u"))},godo_index:function(){this.$router.push({name:"index"})},godo_mine:function(){location.href="/general_api/tcss/index#/personalCenter"},godo_goods:function(){location.href="/general_api/tcss/index#/storeList"}},components:{tabBottom:L["a"]}},M=P,R=(a("5722"),Object(l["a"])(M,O,I,!1,null,null,null)),G=R.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"details-bg"}),a("div",{staticClass:"cinema-city"},[a("div",{staticClass:"c-city-box"},[a("router-link",{attrs:{to:"/cityList"}},[a("div",{staticClass:"c-city-name"},[t._v("\n\t\t\t\t北京市\n\t\t\t\t")]),a("div",{staticClass:"c-am-list-arrow"},[a("span",{staticClass:"c-am-icon arrow vertical"})])])],1)]),a("div",{staticClass:"cinema-box"},[a("ul",{staticClass:"cinema-ul"},[a("li",{staticClass:"cinema-li",on:{click:t.godo_choose}},[t._m(0),a("p",{staticClass:"cinema-li-info"},[t._v("北京市朝阳区望京soho北京市朝阳区望京soho")]),a("div",{staticClass:"cinema-li-distance"},[t._v("200m")])]),t._m(1),t._m(2)])]),a("div",{staticClass:"bottom-tab"},[a("a",{staticClass:"movie",attrs:{href:"javascript:void(0)"},on:{click:t.godo_index}},[a("div",{staticClass:"icon"})]),a("a",{staticClass:"store",attrs:{href:"javascript:void(0)"},on:{click:t.godo_goods}},[a("div",{staticClass:"icon"})]),t._m(3),a("a",{staticClass:"mine",attrs:{href:"javascript:void(0)"},on:{click:t.godo_mine}},[a("div",{staticClass:"icon"})])])])},A=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cinema-li-top"},[a("p",{staticClass:"cinema-li-nm"},[t._v("奥莱环球影城")]),a("p",{staticClass:"cinema-li-price"},[t._v("29.8"),a("span",[t._v("元起")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"cinema-li"},[a("div",{staticClass:"cinema-li-top"},[a("p",{staticClass:"cinema-li-nm"},[t._v("奥莱环球影城")]),a("p",{staticClass:"cinema-li-price"},[t._v("29.8"),a("span",[t._v("元起")])])]),a("p",{staticClass:"cinema-li-info"},[t._v("北京市朝阳区望京soho北京市朝阳区望京soho")]),a("div",{staticClass:"cinema-li-distance"},[t._v("200m")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"cinema-li"},[a("div",{staticClass:"cinema-li-top"},[a("p",{staticClass:"cinema-li-nm"},[t._v("奥莱环球影城")]),a("p",{staticClass:"cinema-li-price"},[t._v("29.8"),a("span",[t._v("元起")])])]),a("p",{staticClass:"cinema-li-info"},[t._v("北京市朝阳区望京soho北京市朝阳区望京soho")]),a("div",{staticClass:"cinema-li-distance"},[t._v("200m")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"cinema",attrs:{href:"javascript:void(0)","data-status":"active"}},[a("div",{staticClass:"icon"})])}],B={data:function(){return{loading:!0,synopsis:"synopsis-none",showBtn:"showBtn"}},beforeRouteEnter:function(t,e,a){document.title="影院",a()},created:function(){},methods:{back:function(){router.go(-1)},godo_choose:function(){this.$router.push({name:"index"})},godo_goods:function(){location.href="/general_api/tcss/index#/storeList"},godo_index:function(){this.$router.push({name:"index"})},godo_mine:function(){location.href="/general_api/tcss/index#/personalCenter"}}},W=B,U=(a("b2ec"),Object(l["a"])(W,N,A,!1,null,null,null)),z=U.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"login-top"},[a("div",{staticClass:"login-top-logo",staticStyle:{position:"relative"}},[a("img",{directives:[{name:"show",rawName:"v-show",value:t.logo,expression:"logo"}],staticStyle:{position:"absolute",top:"0",display:"block",width:"100%",height:"100%"},attrs:{src:t.logo.domain+"/img_server/"+t.logo.logo}})]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.logo,expression:"logo"}],staticClass:"login-top-title"},[t._v(t._s(t.logo.proj_name))])]),a("div",{staticClass:"login-mid"},[a("form",{staticClass:"form-wrapper",attrs:{autocomplete:"off",method:"POST",id:"login-formWrapper"}},[a("div",{staticClass:"login-mid-form"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.UserPhone,expression:"UserPhone"}],staticClass:"text-input",attrs:{type:"tel",name:"username",maxlength:"60",placeholder:"请输入手机号",value:"",id:"mobile"},domProps:{value:t.UserPhone},on:{input:function(e){e.target.composing||(t.UserPhone=e.target.value)}}})]),a("div",{staticClass:"login-mid-form login-mid-form-code"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ValidateCode,expression:"ValidateCode"}],staticClass:"text-input-code",staticStyle:{"margin-left":"0"},attrs:{type:"tel",id:"img_validate_code",name:"verifycode",value:"",placeholder:"请输入验证码",autocomplete:"off",maxlength:"6"},domProps:{value:t.ValidateCode},on:{input:function(e){e.target.composing||(t.ValidateCode=e.target.value)}}}),a("Button",{staticStyle:{float:"right",display:"inline-block","margin-top":".3rem",border:"none","font-size":"0.28rem"},on:{click:t.godo_code}},[t._v(t._s(t.time))])],1),a("div",{staticClass:"login-box"},[a("div",{staticClass:"login",on:{click:t.godo_login}},[t._v("登录")])])])]),t._m(0),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v(t._s(t.loading))])])]):t._e(),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e()])},q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"login-hint"},[t._v("点击登录，即代表已阅读并同意"),a("span",[t._v("《好时光影院相关条例》")])])}],F=a("c93e"),V=a("5880"),H=a.n(V),J={data:function(){return{loading:"",login:!1,tip_msg:"",UserPhone:"",ValidateCode:"",time:"获取验证码",num:"",apid:"",logo_img:""}},beforeRouteEnter:function(t,e,a){document.title="用户登录",a()},created:function(){this.apid=this.$route.params.apid},computed:Object(F["a"])({},Object(V["mapState"])(["logo"])),methods:{back:function(){router.go(-1)},showTip:function(t,e){var a=this;a.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},e))},showlogin:function(t,e){var a=this;a.loading=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.loading=""},e))},godo_code:function(){var t=this,e=t.UserPhone,a=/^[1][3,4,5,7,8,9][0-9]{9}$/;if(a.test(e)){t.ValidateCode="",t.showlogin("正在发送验证码",1e3);var i="/general_api/api/MessageCode?p="+e+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){e.available?(t.loading=!1,t.num=6e4,t.daojishi(t.num)):(t.loading=!1,t.showTip(e.messages[0]))})}else t.showTip("请输入正确的手机号")},daojishi:function(t){var e=this;if(0!=e.num){var a=t/1e3;e.time=a+" S",e.num=t,setTimeout(function(){t-=1e3,e.daojishi(t)},1e3)}else{var i="发送验证码";e.time=i}},godo_login:function(){var t=this,e=this,a=e.UserPhone,i=e.ValidateCode,s=x.a.get("_lac_ap_"),n="/general_api/api/Login?p="+a+"&code="+i+"&apid="+s+"&ts="+Date.parse(new Date),o=weui.loading("加载中");fetch(n).then(function(t){return t.json()}).then(function(a){o.hide(),a.available?(x.a.set("_lac_k_",a.data),t.$router.go(-1),e.showlogin("登录成功，正在跳转回之前页面",1e3)):e.showTip(a.messages[0])}),e.login=!1}}},Y=J,X=(a("66c0"),Object(l["a"])(Y,K,q,!1,null,null,null)),Z=X.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"details-bg"}),a("div"),a("div",{staticClass:"my-coupons-box"},[t.Coupons.length>0?a("div",{staticClass:"my-coupons"},t._l(t.Coupons,function(e,i){return a("div",{staticClass:"my-coupons-list stamp02"},[a("div",{staticClass:"my-coupons-list-left"},["1000"==e.coupon_type?a("p",{staticClass:"my-coupons-list-left-num"},[t._v("\n            ¥\n            "),a("span",[t._v(t._s(e.rule_value/100))])]):"3000"==e.coupon_type?a("p",{staticClass:"my-coupons-list-left-num"},[a("span",[t._v(t._s(t._f("toSlice")(e.rule_value))+"折")])]):"2000"==e.coupon_type?a("p",{staticClass:"my-coupons-list-left-num",staticStyle:{margin:"auto","line-height":"2.2rem"}},[a("span",{staticStyle:{"font-size":".4rem"}},[t._v("兑换券")])]):t._e(),a("p",{staticClass:"my-coupons-list-left-type"},[t._v(t._s("1000"==e.coupon_type?"代金券":"3000"==e.coupon_type?"折扣券":""))])]),a("div",{staticClass:"my-coupons-list-mid"},[a("p",{staticClass:"my-coupons-list-mid-title"},[t._v(t._s(e.batch_title))]),"2000"==e.coupon_type?a("p",{staticClass:"my-coupons-list-mid-info"},[a("span",[t._v("仅限到店使用")])]):a("p",{staticClass:"my-coupons-list-mid-info"},t._l(e.rule,function(e){return a("span",[t._v(t._s(e))])})),a("p",{staticClass:"my-coupons-list-mid-info"},[t._v("有效期："+t._s(t.timelist[i]))]),a("p",{staticClass:"my-coupons-list-mid-info"},[t._v("\n            券码：\n            "),a("span",[t._v(t._s(e.code))])])]),a("div",{staticStyle:{width:"2.12rem",height:"100%",position:"absolute",right:"0",display:"flex","flex-direction":"column","justify-content":"center"}},[2e3!=e.coupon_type?a("div",{staticClass:"my-coupons-list-pay-button",on:{click:t.go_use}},[t._v("使用")]):t._e(),a("div",{staticClass:"my-coupons-list-pay-button",on:{click:function(a){t.addToWeChatCard(e.id)}}},[t._v("加入卡包")])])])})):a("div",{staticClass:"my-coupons"},[t._m(0)])]),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(1)]):t._e()])},tt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"NoCoupons"},[a("img",{attrs:{src:"http://pe1s.static.pdr365.com/Nocoupons.png"}}),a("p",[t._v("您还没有优惠券呢～")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],et={data:function(){return{loading:!0,Coupons:"",timelist:[]}},beforeRouteEnter:function(t,e,a){document.title="我的优惠券",a()},created:function(){this.wxinit(),this.GetCoupons()},methods:{go_use:function(){this.$router.push({name:"index",params:{}})},back:function(){router.go(-1)},GetCoupons:function(){var t=this,e=this,a=x.a.get("_lac_k_"),i="/general_api/api/auth/GetAccountCoupns?token="+a+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(a){if("0"==a.code){e.loading=!1,e.Coupons=a.list;for(var i=[],s=0;s<a.list.length;s++){var n=a.list[s].validate_end,o=new Date(n),c=o.getFullYear(),r=o.getMonth()+1,l=o.getDate(),d=c+"-"+r+"-"+l;i.push(d)}e.timelist=i}else{e.loading=!1;var _=x.a.get("_lac_ap_"),u=x.a.get("_lac_k_");_?u||t.$router.push({name:"login",params:{apid:_}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}})},wxinit:function(){var t="cu=/general_api/tcss/index",e="/general_api/h5/wx/jsticket/?"+t;fetch(e).then(function(t){return t.json()}).then(function(t){"0000"==t.ret_code&&(console.log("-------jsticket res"),console.log(t),wx.config({debug:!1,appId:t.data.appid,timestamp:t.data.timestamp,nonceStr:t.data.noncestr,signature:t.data.sign_str,jsApiList:["startRecord","translateVoice","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","translateVoice","getNetworkType","onMenuShareTimeline","onMenuShareAppMessage","getLocation","openLocation","addCard"]}))})},addToWeChatCard:function(t){var e=x.a.get("_lac_k_"),a="/general_api/h5/wx/card/create_cb?code_id="+t+"&token="+e+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(t){"0000"===t.ret_code?wx.ready(function(){var e={cardId:t.data.cardId,cardExt:'{"code":"'+t.data.cardExt.code+'","openid":"'+t.data.cardExt.openid+'","nonce_str":"'+t.data.cardExt.nonce_str+'","timestamp":"'+t.data.cardExt.timestamp+'","signature":"'+t.data.cardExt.signature+'"}'};wx.addCard({cardList:[e],success:function(t){t.cardList;console.log("======success======"),console.log(t)},fail:function(t){console.log("========fail======="),console.log(t)},cancel:function(t){console.log("=========cancel========"),console.log(t)}})}):console.log("添加到卡包失败")})}}},at=et,it=(a("4196"),Object(l["a"])(at,Q,tt,!1,null,null,null)),st=it.exports,nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"details-bg"}),a("div",{staticClass:"mine-top-box"},[a("div",{staticClass:"mine-top"},[a("div",{staticClass:"mine-top-img"},[a("img",{staticStyle:{border:".04rem solid #f2f2f2"},attrs:{src:""==t.account.head||null==t.account.head?"http://pe1s.static.pdr365.com/touxiang.png":t.account.head}})]),a("div",{staticClass:"mine-top-nm"},[a("p",[t._v(t._s(""==t.account.nickname||null==t.account.nickname?"默认昵称":t.account.nickname))])]),a("div",{staticClass:"mine-top-material",on:{click:t.godo_modified}},[t._v("资料")])]),a("div",{staticClass:"mine-top-menu"},[a("ul",{staticClass:"mine-top-menu-ul"},[a("li",{staticClass:"mine-top-menu-list",staticStyle:{width:"50%"},on:{click:t.godo_myCards}},[a("p",{staticClass:"mine-top-menu-list-num"},[t._v(t._s(t.balance))]),a("p",{staticClass:"mine-top-menu-list-nm"},[t._v("余额")])]),a("li",{staticClass:"mine-top-menu-list",staticStyle:{display:"none"},on:{click:t.godo_myIntegral}},[a("p",{staticClass:"mine-top-menu-list-num"},[t._v(t._s(t.Intergral))]),a("p",{staticClass:"mine-top-menu-list-nm"},[t._v("积分")])]),a("li",{staticClass:"mine-top-menu-list",staticStyle:{width:"50%"},on:{click:t.godo_coupons}},[a("p",{staticClass:"mine-top-menu-list-num"},[t._v(t._s(t.Coupons))]),a("p",{staticClass:"mine-top-menu-list-nm"},[t._v("优惠券")])])])])]),a("div",{staticClass:"mine-mid-menu"},[a("div",{staticClass:"mine-mid-menu-top"},[a("div",{staticClass:"mine-mid-menu-top-list",on:{click:t.godo_myCards}},[a("img",{staticStyle:{height:".4rem","margin-top":".25rem"},attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/card_icon.png"}}),a("p",[t._v("会员卡")]),t._m(0)]),a("div",{staticClass:"mine-mid-menu-top-list",on:{click:t.godo_myTicket}},[a("img",{staticStyle:{width:"0.37rem",height:"0.4rem","margin-top":".25rem"},attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/order_icon.png"}}),a("p",[t._v("订单中心")]),t._m(1)])])]),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(2)]):t._e(),"scan"!==t.tabShow?a("tabBottom",{attrs:{active:"mine"}}):t._e()],1)},ot=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bm-list-arrow"},[a("span",{staticClass:"bm-icon arrow vertical"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bm-list-arrow"},[a("span",{staticClass:"bm-icon arrow vertical"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],ct={data:function(){return{loading:!0,account:"",balance:0,Coupons:0,Intergral:0,tabShow:""}},beforeRouteEnter:function(t,e,a){document.title="个人中心",a()},created:function(){this.GetAccount()},mounted:function(){this.tabShow=this.$route.params.st},methods:{GetAccount:function(){var t=this,e=this,a=x.a.get("_lac_k_"),i="/general_api/api/auth/GetAccount?token="+a+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(i){if(console.log(i),console.log("token="+a),i.available)e.account=i.data,t.GetAccountCard(),t.GetCoupons();else{var s=x.a.get("_lac_ap_");s?a||t.$router.push({name:"login",params:{apid:s}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}e.loading=!1})},GetAccountCard:function(){var t=this,e=x.a.get("_lac_k_"),a="/general_api/api/auth/GetAccountCard?token="+e+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){e.available&&e.obj[0].balance&&(t.balance=e.obj[0].balance/100,t.Intergral=e.obj[0].point),t.loading=!1})},GetCoupons:function(){var t=this,e=x.a.get("_lac_k_"),a="/general_api/api/auth/GetAccountCoupns?token="+e+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){console.log(e),"0"==e.code&&(t.loading=!1,null!=e.list&&(t.Coupons=e.list.length))})},back:function(){router.go(-1)},godo_coupons:function(){location.href="/general_api/tcss/index#/myCoupons"},godo_myTicket:function(){location.href="/general_api/tcss/index#/myTicket"},godo_myCards:function(){location.href="/general_api/tcss/index#/myCards"},godo_myIntegral:function(){this.$router.push({name:"myIntegral"})},godo_cinemas:function(){this.$router.push({name:"cinemaList",params:{mid:"2"}})},godo_goods:function(){location.href="/general_api/tcss/index#/storeList"},godo_index:function(){this.$router.push({name:"index"})},godo_modified:function(){this.$router.push({name:"modifiedData"})}},components:{tabBottom:L["a"]}},rt=ct,lt=(a("028e"),Object(l["a"])(rt,nt,ot,!1,null,null,null)),dt=lt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"details-bg"}),a("div",{staticClass:"weui-tab"},[a("div",{staticClass:"weui-navbar"},t._l(t.tabList,function(e,i){return a("div",{key:i,staticClass:"weui-navbar__item",class:t.active===i?"weui-bar__item_on":"",on:{click:function(e){t.active=i}}},[t._v(t._s(e))])})),a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.active,expression:"active === 0"}],staticClass:"weui-tab__panel",staticStyle:{"padding-top":"50px","padding-bottom":"50px"}},[a("div",{staticClass:"my-ticket-box"},t._l(t.TicketList,function(e){return a("div",{staticClass:"cardWrap",on:{click:function(a){t.godo_code(e.order_no)}}},[a("div",{staticClass:"card cardtop"},[a("p",[t._v(t._s(t.logo.proj_name))]),"2000"==e.order_status||"2900"==e.order_status||"2901"==e.order_status?a("img",{staticClass:"cardtop-flag",attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/t_no_get.png"}}):a("img",{staticClass:"cardtop-flag",attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/t_done.png"}})]),a("div",{staticClass:"card cardbot"},[a("div",{staticClass:"cardbot-top"},[t._m(0,!0),a("div",{staticClass:"cardbot-mid"},[a("p",{staticClass:"cardbot-mid-title"},[t._v(t._s(e.film_name)),a("span",[t._v(t._s(e.seats.length)+"张")])]),a("p",{staticClass:"cardbot-mid-time"},[t._v("开场时间："+t._s(e.plan_date)+" "+t._s(e.plan_time))]),a("p",{staticClass:"cardbot-mid-time"},[t._v(t._s(e.hall_name)+" "),t._l(e.seats,function(e){return a("span",[t._v(" "+t._s(e.seat_sr)+"排"+t._s(e.seat_sc)+"座 ")])})],2)])])])])}))]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active === 1"}],staticClass:"weui-tab__panel",staticStyle:{"padding-top":"50px","padding-bottom":"50px"}},[a("div",{staticClass:"my-ticket-box"},t._l(t.OrderList,function(e,i){return"0000"!=e.oss&&"9000"!=e.oss?a("div",{staticClass:"cardWrap",on:{click:function(a){t.godo_goodscode(e.order_no,i)}}},[a("div",{staticClass:"card cardtop"},[a("p",[t._v(t._s(t.logo.proj_name))]),"1000"==e.oss?a("img",{staticClass:"cardtop-flag",attrs:{src:"http://pe1s.static.pdr365.com/dailingqu.png"}}):t._e(),"1010"==e.oss?a("img",{staticClass:"cardtop-flag",attrs:{src:"http://pe1s.static.pdr365.com/dailingqu.png"}}):t._e(),"1020"==e.oss?a("img",{staticClass:"cardtop-flag",attrs:{src:"http://pe1s.static.pdr365.com/dailingqu.png"}}):t._e(),"2000"==e.oss?a("img",{staticClass:"cardtop-flag",attrs:{src:"http://pe1s.static.pdr365.com/dailingqu.png"}}):t._e(),"3000"==e.oss?a("img",{staticClass:"cardtop-flag",attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/t_done.png"}}):t._e()]),a("div",{staticClass:"card cardbot"},t._l(e.items,function(e,s){return a("div",{staticClass:"cardbot-bot"},[a("div",{staticClass:"cardbot-img",attrs:{"data-img":e.pic_url}},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"http://pe1s.static.pdr365.com/"+e.pic_url}})]),a("div",{staticClass:"cardbot-mid"},[a("p",{staticClass:"cardbot-mid-title",staticStyle:{"margin-top":".4rem"}},[t._v(t._s(e.goods_name))]),a("p",{staticClass:"cardbot-mid-time",staticStyle:{"margin-top":".25rem"}},[t._v(t._s(e.remark))]),a("p",{staticClass:"cardbot-mid-time",staticStyle:{"margin-top":".25rem"}},[t._v("数量："+t._s(e.buy_num))]),a("p",{staticClass:"cardbot-mid-time",staticStyle:{"margin-top":".25rem"}},[t._v("下单时间："+t._s(t.timelist[i]))])])])}))]):t._e()}))])]),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(1)]):t._e()])},ut=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cardbot-img"},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"http://pe1d.static.pdr365.com/FhodjILxWCZtSVkdtxJuEnhpCDk6"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],mt={data:function(){return{loading:!0,OrderList:"",tip_msg:"",account:"",TicketList:"",apid:"",timelist:[],active:0,tabList:["影票","商品"]}},beforeRouteEnter:function(t,e,a){document.title="我的订单",a()},created:function(){this.GetAccount()},computed:Object(F["a"])({},Object(V["mapState"])(["logo"])),methods:{GetCode:function(){var t=x.a.get("_lac_ated_");t||(location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime())},showTip:function(t,e){var a=this;a.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},e))},GetAccount:function(){var t=this,e=this,a=x.a.get("_lac_k_"),i="/general_api/api/auth/GetAccount?token="+a+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(a){a.available?(e.account=a.data,e.MyOrder(a.data.ap_id),e.apid=a.data.ap_id,e.MyTiketOrder(a.data.ap_id)):0==a.available&&"user_no_login"==a.messages[0]&&t.GetCode()})},MyOrder:function(t){var e=this,a=x.a.get("_lac_k_"),i="/general_api/api/OrderList?apid="+t+"&ds=&token="+a+"&oss=1&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(t){if(console.log(t),t){e.loading=!1,e.OrderList=t;for(var a=[],i=0;i<t.length;i++){var s=t[i].a_time,n=new Date(s),o=n.getFullYear(),c=n.getMonth()+1,r=n.getDate(),l=o+"-"+c+"-"+r;a.push(l)}console.log(a),e.timelist=a}else e.loading=!1}).catch(function(t){e.loading=!1,e.OrderList=null})},MyTiketOrder:function(t){var e=this,a=x.a.get("_lac_k_"),i="/general_api/api/GetTicketList?apid="+t+"&token="+a+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(t){e.loading=!1,0==t.code&&(e.TicketList=t.data)}).catch(function(t){e.loading=!1})},godo_code:function(t){this.$router.push({name:"votingCode",params:{on:t}})},godo_goodscode:function(t,e){console.log("11"),this.$router.push({name:"GoodsCode",params:{on:t,index:e,apid:this.apid}})}}},pt=mt,vt=(a("60b6"),Object(l["a"])(pt,_t,ut,!1,null,null,null)),ht=vt.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"details-bg"}),a("div",{staticClass:"my-ticket-box"},[a("div",{staticClass:"my-cardWrap"},[a("div",{staticClass:"my-card my-cardtop my-module-1"},[a("img",{staticClass:"my-module-1-img",attrs:{src:"http://pe1s.static.pdr365.com/default_movie_pic.jpg"}}),a("div",{staticClass:"my-module-1-right"},[a("p",{staticClass:"my-module-1-r-nm"},[t._v(t._s(t.movieDetails.film_name))]),a("p",{staticClass:"my-module-1-r-cinema"},[a("span",[t._v("影城")]),t._v("\n\t\t\t\t\t\t"+t._s(t.movieDetails.store_name)+"\n\t\t\t\t\t")]),a("p",{staticClass:"my-module-1-r-time"},[a("span",[t._v("时间")]),t._v("\n\t\t\t\t\t\t"+t._s(t.movieDetails.plan_date)+" "+t._s(t.movieDetails.plan_time)+" \n\t\t\t\t\t")]),t._m(0),a("p",{staticClass:"my-module-1-r-seats-list"},[a("span",{staticClass:"my-module-1-r-seats-list-hall"},[t._v(t._s(t.movieDetails.hall_name))]),t._l(t.movieDetails.seats,function(e){return a("span",{staticClass:"my-module-1-r-seats-list-seat"},[t._v(t._s(e.seat_sr)+"排"+t._s(e.seat_sc)+"座")])})],2),a("p")])]),a("div",{staticClass:"my-card my-cardbot my-module-2"},[a("p",{staticClass:"my-module-2-num"},[t._v(t._s(t.ticket_num)+"张电影票")]),a("p",{staticClass:"my-module-2-hint"},[t._v("在取票机扫码或输入取票码取电影票")]),a("img",{staticClass:"my-module-2-codeimg",attrs:{src:"https://tool.kd128.com/qrcode?text="+t.movieDetails.ticket.ticket_flag_1+t.movieDetails.ticket.ticket_flag_2}}),a("p",{staticClass:"my-module-2-code"},[t._v("\n\t\t    \t\t\t序列号：\n\t\t    \t\t\t"),a("span",[t._v(t._s(t.movieDetails.ticket.ticket_flag_1))]),t._v("\n\t\t    \t\t\t验证码：\n\t\t    \t\t\t"),a("span",[t._v(t._s(t.movieDetails.ticket.ticket_flag_2))])])]),a("div",{staticClass:"my-card my-cardbot3 my-module-3"},[a("p",{staticClass:"my-module-3-nm"},[t._v(t._s(t.movieDetails.store_name))])]),a("div",{staticClass:"my-card my-cardbot4 my-module-4"},[a("p",{staticClass:"my-module-4-nm"},[t._v("实付金额"),a("span",[t._v(t._s(t.movieDetails.pay_amount/100)+"元")])]),a("p",{staticClass:"my-module-4-info"},[t._v("订单号"),a("span",[t._v(t._s(t.movieDetails.order_no))])])]),t._m(1)])])])},ft=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"my-module-1-r-seats"},[a("span",[t._v("座位号")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-card my-cardbot5 my-module-5"},[a("p",{staticClass:"my-module-5-title"},[t._v("观影须知")]),a("p",{staticClass:"my-module-5-clause"},[t._v("1、请提前到达影院现场，找到自助取票机，打印纸质电影票，完成取票。")]),a("p",{staticClass:"my-module-5-clause"},[t._v("2、如现场自助取票机无法打印电影票，请联系影院工作人员处理。")]),a("p",{staticClass:"my-module-5-clause"},[t._v("3、凭打印好的纸质电影票，检票入场观影。")])])}],Ct={data:function(){return{loading:!0,on:"",movieDetails:"",ticket_num:""}},beforeRouteEnter:function(t,e,a){document.title="订单详情页",a()},created:function(){this.on=this.$route.params.on,this.GetOrderDetails()},methods:{back:function(){router.go(-1)},GetOrderDetails:function(){var t=this,e="/general_api/api/GetTicketOrderDetails?order_no="+t.on+"&ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){0==e.code&&(t.movieDetails=e.data,t.ticket_num=e.data.seats.length,t.loading=!1)})}}},wt=Ct,bt=(a("7b65"),Object(l["a"])(wt,gt,ft,!1,null,null,null)),yt=bt.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{overflow:"hidden",width:"100%",height:"100%"}},[a("div",{staticClass:"details-bg",staticStyle:{background:"#fff"}}),t._l(t.CardData,function(e,i){return null!=t.CardData?a("div",{staticClass:"ed-myCards-box"},[0==i?a("div",[a("div",{staticClass:"ed-myCards",staticStyle:{background:"#efeff4"},on:{click:t.godo_cardDetails}},[a("div",{staticClass:"ed-myCards-top-box"},[a("div",{staticClass:"ed-myCards-top"},[a("div",{staticClass:"ed-myCards-top-logo"},[a("img",{attrs:{src:t.logo.domain+"/img_server/"+t.logo.logo}}),a("p",[t._v(t._s(e.rule.title))])]),a("p",{staticClass:"ed-myCards-top-num"},[t._v(t._s(e.mc_num))]),a("div",{staticClass:"ed-myCards-top-hint"},[t._m(0,!0),a("img",{staticClass:"ed-myCards-top-hint-code",attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/qrcode_icon.png"},on:{click:function(a){a.stopPropagation(),t.godo_cardCode(e.card_code)}}})])])])]),a("div",{staticClass:"ed-myCards-bot-box"},[a("div",{staticClass:"ed-myCards-bot"},[a("p",{staticClass:"ed-myCards-bot-balance"},[t._v("余额")]),a("p",{staticClass:"ed-myCards-bot-balance-num"},[t._v(t._s(e.balance/100)+"元")]),a("div",{staticClass:"ed-myCards-integral-box"},[a("p",{staticClass:"ed-myCards-bot-integral-grade"},[t._v("会员等级"),a("span",[t._v(t._s(e.levelname))])]),a("p",{staticClass:"ed-myCards-bot-integral",staticStyle:{display:"none"}},[t._v("积分"),a("span",[t._v(t._s(e.point))])])]),a("div",{staticClass:"ed-myCards-but"},[a("div",{staticClass:"ed-myCards-recharge",on:{click:function(a){t.godo_recharge(e.mc_num)}}},[t._v("充值")])])])])]):t._e()]):t._e()}),null==t.CardData?a("div",{staticClass:"myCards"},[a("div",[t._m(1),a("div",{staticClass:"myCards-bot"},[a("div",{staticClass:"myCards-bot-go",on:{click:t.goBindCard}},[t._v("已有会员卡,立即绑定")]),a("div",{staticClass:"myCards-bot-go",on:{click:t.godo_paycard}},[t._v("立即开通")])])])]):t._e(),t.forbid?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd",staticStyle:{"font-size":".36rem",padding:".6rem 20px .28rem","min-height":"24px"}},[t._v("充值会员")]),t._m(2),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:function(e){t.forbid=!1}}},[t._v("取消")]),a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"}},[t._v("确认")])])])]):t._e(),t.img_tip?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog1"}},[a("div",{staticClass:"weui-mask",on:{click:function(e){t.img_tip=!1}}}),a("div",{staticClass:"weui-dialog",staticStyle:{"border-radius":"0.2rem"}},[a("div",{staticClass:"code-bot"},[a("div",{staticClass:"code-img-box"},[a("img",{staticClass:"weui-img",staticStyle:{"margin-top":".5rem",width:"70%",display:"inline-block"},attrs:{src:"https://tool.kd128.com/qrcode?text="+t.Codesrc,alt:""}})]),a("p",{staticClass:"code-p"},[t._v("扫描二维码进行会员卡支付")]),a("div",{staticClass:"code-true",on:{click:function(e){t.img_tip=!1}}},[t._v("确定")])])])]):t._e(),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(3)]):t._e()],2)},xt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("img",{staticClass:"ed-myCards-top-hint-img",attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/info_icon.png"}}),a("p",[t._v("不可退换")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"myCards-top-box"},[a("div",{staticClass:"myCards-top"},[a("p",{staticClass:"myCards-top-hint-top"},[t._v("还未开通会员卡")]),a("p",{staticClass:"myCards-top-hint"},[t._v("开通后购票可享受优惠价")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-box"},[a("input",{staticClass:"moeny-input",attrs:{type:"number",name:"aa",id:"a",placeholder:"请输入充值金额",value:"请输入充值金额"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("正在加载")])])}],St={data:function(){return{loading:!0,synopsis:"synopsis-none",showBtn:"showBtn",forbid:!1,img_tip:!1,CardData:"",Codesrc:""}},computed:Object(F["a"])({},Object(V["mapState"])(["logo"])),beforeRouteEnter:function(t,e,a){document.title="会员卡",a()},created:function(){this.GetAccountCard()},methods:{godo_cardCode:function(t){var e=this;e.Codesrc=t,e.img_tip=!0},GetAccountCard:function(){var t=this,e=this,a=x.a.get("_lac_k_"),i="/general_api/api/auth/GetAccountCard?token="+a+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(a){if(console.log(a),!a.available){var i=x.a.get("_lac_ap_"),s=x.a.get("_lac_k_");i?s||t.$router.push({name:"login",params:{apid:i}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}e.CardData=a.obj,e.loading=!1})},back:function(){router.go(-1)},godo_paycard:function(){location.href="/general_api/tcss/index/?#/purchasingCard/purchasing"},godo_bindcard:function(){this.$router.push({name:"bindCard"})},godo_cardDetails:function(){this.$router.push({name:"cardDetails"})},godo_recharge:function(t){document.cookie="CardNum="+t,location.href="/general_api/tcss/index/?#/purchasingCard/recharge"},goBindCard:function(){this.$router.push({name:"bindCard"})}}},Dt=St,Tt=(a("db08"),Object(l["a"])(Dt,kt,xt,!1,null,null,null)),Et=Tt.exports,jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",["purchasing"==t.CardNm||"Scanpurchasing"==t.CardNm?a("div",[t._m(0),a("div",{staticClass:"purchasingcard-mid"},[a("ul",{staticClass:"purchasingcard-mid-ul"},t._l(t.RechargeData,function(e,i){return-1!=t.RechargeData?a("li",{class:t.HId==e.id?"purchasingcard-mid-li-true":"purchasingcard-mid-li",on:{click:function(a){t.godo_choose(e.id,i,e.getpay)}}},[a("p",{class:t.HId==e.id?"purchasingcard-mid-li-grade-true":"purchasingcard-mid-li-grade",staticStyle:{height:".35rem","line-height":".35rem"}},[t._v(t._s(e.h_name))]),a("p",{class:t.HId==e.id?"purchasingcard-mid-li-introduce-true":"purchasingcard-mid-li-introduce"},[t._v(t._s(e.cr_type_desc))]),a("p",{class:t.HId==e.id?"purchasingcard-mid-li-price-true":"purchasingcard-mid-li-price",staticStyle:{"margin-top":".1rem"}},[t._v("¥"+t._s(e.getpay/100))]),t.HId==e.id?a("img",{staticClass:"purchasingcard-mid-li-true-img",attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/dot_icon.png"}}):t._e()]):t._e()}))]),a("div",{staticClass:"PurchasingCard-box"},[a("div",{staticClass:"PurchasingCard",on:{click:t.SshowNum}},[a("span",{staticClass:"PurchasingTitle"},[t._v("设置支付密码")]),a("span",{staticClass:"PurchasingHint"},[t._v("密码用于消费操作时，验证您的身份")]),""!=t.pwd?a("span",{staticClass:"shezhi"},[t._v("已设置")]):t._e(),a("div",{staticClass:"vertical2"})])]),t._m(1),t._m(2),a("div",{staticClass:"purchase-box"},[a("div",{staticClass:"purchase",on:{click:t.godo_purchasing}},[t._v("立即开通")])]),t.one?a("div",{staticClass:"purchasing-num-box",staticStyle:{"text-align":"center"}},[a("div",{staticClass:"purchasing-num-bgc",on:{click:function(e){t.one=!1}}}),a("div",{staticClass:"purchasing-num"},[a("div",{staticClass:"purchasing-num-top"},[a("img",{staticStyle:{float:"left",display:"inline-block",width:".4rem","margin-left":".2rem","margin-top":".15rem"},attrs:{src:"http://pe1s.static.pdr365.com/chahao.png"},on:{click:function(e){t.one=!1}}}),a("p",[t._v("设置会员卡支付密码")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.Ticket_one,expression:"Ticket_one"}],staticClass:"purchasing-num-input",attrs:{type:"num",placeholder:"请输入6位数字密码",readonly:"readonly",maxlength:"6",clearable:""},domProps:{value:t.Ticket_one},on:{input:function(e){e.target.composing||(t.Ticket_one=e.target.value)}}}),a("p",{staticClass:"purchasing-num-p"},[t._v("支付密码用于支付操作时，验证您的身份")]),a("div",{staticClass:"keyboard",staticStyle:{background:"#fff"},on:{click:function(e){return e.stopPropagation(),t.TicketKeyPress(e)}}},[t._m(3),t._m(4),t._m(5),t._m(6)])])]):t._e(),t.two?a("div",{staticClass:"purchasing-num-box",staticStyle:{"text-align":"center"}},[a("div",{staticClass:"purchasing-num-bgc",on:{click:function(e){t.two=!1}}}),a("div",{staticClass:"purchasing-num"},[a("div",{staticClass:"purchasing-num-top"},[a("img",{staticStyle:{float:"left",display:"inline-block",width:".4rem","margin-left":".2rem","margin-top":".15rem"},attrs:{src:"http://pe1s.static.pdr365.com/chahao.png"},on:{click:function(e){t.two=!1}}}),a("p",[t._v("确认会员卡支付密码")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.Ticket_two,expression:"Ticket_two"}],staticClass:"purchasing-num-input",attrs:{type:"num",placeholder:"请输入6位数字密码",readonly:"readonly",maxlength:"6",clearable:""},domProps:{value:t.Ticket_two},on:{input:function(e){e.target.composing||(t.Ticket_two=e.target.value)}}}),a("p",{staticClass:"purchasing-num-p"},[t._v("请在此输入您的支付密码")]),a("div",{staticClass:"keyboard",staticStyle:{background:"#fff"},on:{click:function(e){return e.stopPropagation(),t.TicketTwo(e)}}},[t._m(7),t._m(8),t._m(9),t._m(10)])])]):t._e()]):t._e(),"recharge"==t.CardNm?a("div",[t._m(11),a("div",{staticClass:"purchasingcard-mid"},[a("ul",{staticClass:"purchasingcard-mid-ul"},t._l(t.RechargeData,function(e,i){return-1!=t.RechargeData?a("li",{class:t.HId==e.id?"purchasingcard-mid-li-true":"purchasingcard-mid-li",attrs:{"data-index":i},on:{click:function(a){t.godo_choose(e.id,i,e.getpay)}}},[a("p",{class:t.HId==e.id?"purchasingcard-mid-li-price-true":"purchasingcard-mid-li-price",attrs:{"data-index":i}},[t._v("¥"+t._s(e.getpay/100))]),a("p",{class:t.HId==e.id?"purchasingcard-mid-li-introduce-true":"purchasingcard-mid-li-introduce",attrs:{"data-index":i}},[t._v(t._s(e.cr_type_desc))]),t.HId==e.id?a("img",{staticClass:"purchasingcard-mid-li-true-img",attrs:{"data-index":i,src:"http://pe1s.static.pdr365.com/tencent/icon/dot_icon.png"}}):t._e()]):t._e()}))]),t._m(12),t._m(13),a("div",{staticClass:"purchase-box"},[a("div",{staticClass:"purchase",on:{click:t.godo_recharge}},[t._v("立即充值")])])]):t._e(),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(14)]):t._e()])},Ot=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchasingcard-top"},[a("p",{staticClass:"purchasingcard-top-title"},[t._v("选择等级")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchasingcard-bot",staticStyle:{display:"none"}},[a("div",{staticClass:"purchasingcard-bot-title"},[t._v("\n\t\t\t\t\t选择赠品\n\t\t\t\t")]),a("div",{staticClass:"gift-box"},[a("div",{staticClass:"content"},[a("div",{staticClass:"head"},[t._v("选项一")]),a("p",{staticClass:"title"},[t._v("充值¥1000")]),a("p",{staticClass:"info"},[a("span",{staticClass:"status"},[t._v("赠")]),t._v("宠物精美礼包")]),a("p",{staticClass:"info"},[a("span",{staticClass:"status"},[t._v("赠")]),t._v("洗澡代金券1张+SPA代金券1张")]),a("p",{staticClass:"info"},[a("span",{staticClass:"status"},[t._v("赠")]),t._v("充值1000元送100元")]),a("i",{staticClass:"icon weui-icon-success weui-icon_msg",staticStyle:{"font-size":".4rem","margin-right":".3rem"}})])]),a("div",{staticClass:"gift-box"},[a("div",{staticClass:"content"},[a("div",{staticClass:"head"},[t._v("选项二")]),a("p",{staticClass:"title"},[t._v("充值¥1000")]),a("p",{staticClass:"info"},[a("span",{staticClass:"status"},[t._v("赠")]),t._v("宠物精美礼包")]),a("p",{staticClass:"info"},[a("span",{staticClass:"status"},[t._v("赠")]),t._v("洗澡代金券1张+SPA代金券1张")]),a("p",{staticClass:"info"},[a("span",{staticClass:"status"},[t._v("赠")]),t._v("充值1000元送100元")]),a("i",{staticClass:"icon weui-icon-circle weui-icon_msg",staticStyle:{"font-size":".4rem","margin-right":".3rem"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchasingcard-bot"},[a("div",{staticClass:"purchasingcard-bot-title"},[t._v("\n\t\t\t\t\t支付方式\n\t\t\t\t")]),a("div",{staticClass:"purchasingcard-bot-pay"},[a("div",[a("img",{attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/wechat_pay_icon.png"}}),a("p",[t._v("微信支付")])]),a("i",{staticClass:"weui-icon-success weui-icon_msg",staticStyle:{"font-size":".4rem","margin-right":".3rem"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-row"},[a("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"1"}},[t._v("1")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"2"}},[t._v("2")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"3"}},[t._v("3")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-row"},[a("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"4"}},[t._v("4")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"5"}},[t._v("5")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"6"}},[t._v("6")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-row"},[a("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"7"}},[t._v("7")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"8"}},[t._v("8")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"9"}},[t._v("9")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-row"},[a("div",{staticClass:"numInput key-cell",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"D"}},[t._v("删除")]),a("div",{staticClass:"numInput key-cell",attrs:{"data-num":"0"}},[t._v("0")]),a("div",{staticClass:"numInput key-confirm",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"S"}},[t._v("确认")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-row"},[a("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"1"}},[t._v("1")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"2"}},[t._v("2")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"3"}},[t._v("3")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-row"},[a("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"4"}},[t._v("4")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"5"}},[t._v("5")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"6"}},[t._v("6")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-row"},[a("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"7"}},[t._v("7")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"8"}},[t._v("8")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"9"}},[t._v("9")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-row"},[a("div",{staticClass:"numInput key-cell",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"D"}},[t._v("删除")]),a("div",{staticClass:"numInput key-cell",attrs:{"data-num":"0"}},[t._v("0")]),a("div",{staticClass:"numInput key-confirm",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"S"}},[t._v("确认")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchasingcard-top"},[a("p",{staticClass:"purchasingcard-top-title"},[t._v("选择充值金额")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchasingcard-bot",staticStyle:{display:"none"}},[a("div",{staticClass:"purchasingcard-bot-title"},[t._v("\n\t\t\t\t\t选择赠品\n\t\t\t\t")]),a("div",{staticClass:"gift-box"},[a("div",{staticClass:"content"},[a("div",{staticClass:"head"},[t._v("选项一")]),a("p",{staticClass:"title"},[t._v("充值¥1000")]),a("p",{staticClass:"info"},[a("span",{staticClass:"status"},[t._v("赠")]),t._v("宠物精美礼包")]),a("p",{staticClass:"info"},[a("span",{staticClass:"status"},[t._v("赠")]),t._v("洗澡代金券1张+SPA代金券1张")]),a("p",{staticClass:"info"},[a("span",{staticClass:"status"},[t._v("赠")]),t._v("充值1000元送100元")]),a("i",{staticClass:"icon weui-icon-success weui-icon_msg",staticStyle:{"font-size":".4rem","margin-right":".3rem"}})])]),a("div",{staticClass:"gift-box"},[a("div",{staticClass:"content"},[a("div",{staticClass:"head"},[t._v("选项二")]),a("p",{staticClass:"title"},[t._v("充值¥1000")]),a("p",{staticClass:"info"},[a("span",{staticClass:"status"},[t._v("赠")]),t._v("宠物精美礼包")]),a("p",{staticClass:"info"},[a("span",{staticClass:"status"},[t._v("赠")]),t._v("洗澡代金券1张+SPA代金券1张")]),a("p",{staticClass:"info"},[a("span",{staticClass:"status"},[t._v("赠")]),t._v("充值1000元送100元")]),a("i",{staticClass:"icon weui-icon-circle weui-icon_msg",staticStyle:{"font-size":".4rem","margin-right":".3rem"}})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchasingcard-bot"},[a("div",{staticClass:"purchasingcard-bot-title"},[t._v("\n\t\t\t\t\t支付方式\n\t\t\t\t")]),a("div",{staticClass:"purchasingcard-bot-pay"},[a("div",[a("img",{attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/wechat_pay_icon.png"}}),a("p",[t._v("微信支付")])]),a("i",{staticClass:"weui-icon-success weui-icon_msg",staticStyle:{"font-size":".4rem","margin-right":".3rem"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],It={data:function(){return{loading:!0,tip_msg:"",synopsis:"synopsis-none",showBtn:"showBtn",RechargeData:"",id:"",HId:"",Num:"",Ticket_one:"",Ticket_two:"",pwd:"",S:"",one:!1,two:!1,other:"",CardNm:"",CardNum:"",sid:"",getpay:0}},beforeRouteEnter:function(t,e,a){document.title="会员卡",a()},created:function(){this.Num=x.a.get("CardNum"),this.CardNm=this.$route.params.CardNm,this.sid=x.a.get("s_id"),this.GradeList()},methods:{SshowNum:function(){this.one=!0},showTip:function(t,e){var a=this;a.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},e))},GradeList:function(){var t=this,e=this,a=x.a.get("_lac_k_"),i="/general_api/api/CardGradeList?ts="+Date.parse(new Date)+"&sid="+this.sid+"&token="+a;fetch(i).then(function(t){return t.json()}).then(function(a){a.available?(e.RechargeData=a.obj,e.HId=a.obj[0].id,e.id=a.obj[0].id):t.showTip("暂不支持会员卡申领，欢迎您到门店办理~",2e3),e.loading=!1})},godo_choose:function(t,e,a){for(var i=this,s=i.RechargeData,n=0;n<s.length;n++)n==e&&(i.HId=s[e].id);i.id=t,this.getpay=Number(a)/100},godo_purchasing:function(){var t=this,e=t.pwd,a=t.HId;if(""!=e){t.loading=!0;var i=x.a.get("_lac_k_"),s="/general_api/api/auth/createCardRechargeOrder?token="+i+"&mc_pwd="+e+"&h_id="+a+"&sid="+this.sid+"&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(e){if(console.log(e),e.available){t.loading=!1;var a=x.a.get("_lac_k_"),i="/general_api/api/auth/GetWxObj?ct=201101&tnum="+e.obj.data.tnum+"&token="+a+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){-1==e.code?t.showTip(e.text):0==e.code?(t.other=e.other,"001001"==e.paycode?t.$router.push({name:"kaikaSuccess"}):t.onBridgeReady()):0==e.available&&"user_no_login"==e.messages[0]&&t.showTip("用户未登录")})}else 0==e.available&&"user_no_login"==e.messages[0]?(t.loading=!1,t.showTip("用户未登录")):(t.loading=!1,t.showTip(e.messages[0]))})}else this.showTip("请设置6位数的密码~",1e3)},onBridgeReady:function(){var t=this,e=t.other;t.loading=!1;var a=t.CardNm;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:"MD5",paySign:e.paySign},function(e){"get_brand_wcpay_request:ok"==e.err_msg?"Scanpurchasing"==a?t.$router.push({name:"kaikaSuccess"}):t.$router.go(-1):"get_brand_wcpay_request:cancel"==e.err_msg?alert("您取消了付款"):"get_brand_wcpay_request:fail"==e.err_msg&&alert("支付失败")})},TicketKeyPress:function(t){var e=t.target.dataset.num;if(-1==e)return!1;switch(String(e)){case".":this.TicketDecimalPoint();break;case"D":this.TicketDeleteKey();break;case"C":this.TicketClearKey();break;case"S":this.TicketConfirmKey();break;default:this.TicketNumberKey(e);break}},TicketDecimalPoint:function(){if(this.Ticket_one.indexOf(".")>-1)return!1;this.Ticket_one.length?this.Ticket_one=this.Ticket_one+".":this.Ticket_one="0."},TicketDeleteKey:function(){var t=this.Ticket_one;if(!t.length)return!1;this.Ticket_one=t.substring(0,t.length-1)},TicketClearKey:function(){this.Ticket_one=""},TicketConfirmKey:function(){var t=this.Ticket_one;if(!t.length)return this.showTip("您目前未输入~",1e3),!1;6==t.length?(this.pwd=t,this.one=!1,this.two=!0):this.showTip("请设置6位数的密码~",1e3)},TicketNumberKey:function(t){var e=this.Ticket_one;if(e.length<6){if(e.indexOf(".")>-1&&e.substring(e.indexOf(".")+1).length<2&&(this.Ticket_one=e+t),!(e.indexOf(".")>-1))if(0==t&&0==e.length)this.Ticket_one="0.";else{if(e.length&&0===Number(e.charAt(0)))return;this.Ticket_one=e+t}}else this.showTip("最多只能设置6位数的密码~",1e3)},TicketTwo:function(t){var e=t.target.dataset.num;if(-1==e)return!1;switch(String(e)){case".":this.aTicketDecimalPoint();break;case"D":this.aTicketDeleteKey();break;case"C":this.aTicketClearKey();break;case"S":this.aTicketConfirmKey();break;default:this.aTicketNumberKey(e);break}},aTicketDecimalPoint:function(){if(this.Ticket_two.indexOf(".")>-1)return!1;this.Ticket_two.length?this.Ticket_two=this.Ticket_two+".":this.Ticket_two="0."},aTicketDeleteKey:function(){var t=this.Ticket_two;if(!t.length)return!1;this.Ticket_two=t.substring(0,t.length-1)},aTicketClearKey:function(){this.Ticket_two=""},aTicketConfirmKey:function(){var t=this.Ticket_two;if(!t.length)return this.showTip("您目前未输入~",1e3),!1;if(6==t.length){if(this.pwd!=t)return void this.showTip("两次输入的密码不一致~",1e3);this.pwd=t,this.two=!1,this.one=!1}else this.showTip("请设置6位数的密码~",1e3)},aTicketNumberKey:function(t){var e=this.Ticket_two;if(e.length<6){if(e.indexOf(".")>-1&&e.substring(e.indexOf(".")+1).length<2&&(this.Ticket_two=e+t),!(e.indexOf(".")>-1))if(0==t&&0==e.length)this.Ticket_two="0.";else{if(e.length&&0===Number(e.charAt(0)))return;this.Ticket_two=e+t}}else this.showTip("最多只能设置6位数的密码~",1e3)},godo_recharge:function(){var t=this,e=t.Num,a=t.id;t.loading=!0;var i="/general_api/api/RechargeCard?mc_num="+e+"&h_id="+a+"&sid="+this.sid+"&getpay="+this.getpay+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){if(e.available){t.loading=!1;var a=x.a.get("_lac_k_"),i="/general_api/api/auth/GetWxObj?ct=201101&tnum="+e.obj.data.tnum+"&token="+a+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){console.log(e),-1==e.code?t.showTip(e.text):0==e.code?(t.other=e.other,t.onBridgeReady()):0==e.available&&"user_no_login"==e.messages[0]&&t.showTip("用户未登录")})}else t.loading=!1,t.showTip(e.messages[0])})}}},Lt=It,$t=(a("cd9f"),Object(l["a"])(Lt,jt,Ot,!1,null,"1acaf0f8",null)),Pt=$t.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"details-bg"}),a("div",{staticClass:"bindCard-box"},[a("form",[a("div",{staticClass:"bindCard-top"},[a("label",{staticClass:"kahao"},[t._v("门店/影城")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.card_store,expression:"card_store"}],staticClass:"kahao_d",staticStyle:{width:"60%","margin-left":".5rem"},attrs:{id:"select"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.card_store=e.target.multiple?a:a[0]}}},t._l(t.cinemaList,function(e,i){return a("option",{key:i,domProps:{value:e.id}},[t._v(t._s(e.store_name))])}))]),a("div",{staticClass:"bindCard-bot"},[a("label",{staticClass:"kahao"},[t._v("卡号")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.card_num,expression:"card_num"}],staticClass:"bindCard-bot-input",attrs:{id:"Kpassword",type:"text",name:"Kpassword",placeholder:"请填写会员卡号"},domProps:{value:t.card_num},on:{input:function(e){e.target.composing||(t.card_num=e.target.value)}}})]),a("div",{staticClass:"bindCard-bot"},[a("label",{staticClass:"kahao"},[t._v("密码")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.card_pwd,expression:"card_pwd"}],staticClass:"bindCard-bot-input",attrs:{id:"Kpassword",type:"text",name:"Kpassword",placeholder:"请填写正确的密码"},domProps:{value:t.card_pwd},on:{input:function(e){e.target.composing||(t.card_pwd=e.target.value)}}})])])]),a("div",{staticClass:"bindCard-bind"},[a("div",{on:{click:t.do_bind}},[a("p",{staticClass:"bind-bd"},[t._v("绑定")])])])])},Rt=[],Gt=a("a322"),Nt={data:function(){return{loading:!0,synopsis:"synopsis-none",showBtn:"showBtn",card_num:"",card_pwd:"",card_store:"",cinemaList:[]}},beforeRouteEnter:function(t,e,a){document.title="绑定会员卡",a()},created:function(){this.getStoreList()},methods:Object(Gt["a"])({back:function(){router.go(-1)},godo_paycard:function(){location.href="/general_api/tcss/index#/purchasingCard/purchasing"},do_bind:function(){var t=this,e=x.a.get("_lac_k_"),a=this.card_num,i=this.card_pwd,s=this.card_store;if(a&&i){var n=weui.loading("加载中"),o="/general_api/api/auth/bind_my_card?token="+e+"&mc_num="+a+"&mc_pwd="+i+"&s_id="+s+"&"+(new Date).getTime();fetch(o).then(function(t){return t.json()}).then(function(e){n.hide(),e.available?weui.dialog({content:"会员卡绑定成功",buttons:[{label:"确定",type:"primary",onClick:function(){t.$router.go(-1)}}]}):weui.dialog({content:e.messages[0],buttons:[{label:"确定",type:"primary",onClick:function(){}}]})})}else weui.dialog({content:"请输入会员卡号和密码",buttons:[{label:"确定",type:"primary",onClick:function(){}}]})},getStoreList:function(){var t=this,e=x.a.get("city_no");if(void 0==e){var a="/general_api/api/cityList?ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){if("0"==e.code&&e.data&&e.data.length>0){var a=Number(e.data[0].city_no),i="/general_api/api/StoreList?city_no="+a+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){0==e.code&&e.data&&e.data.length>0&&(t.cinemaList=e.data)})}})}else{var i="/general_api/api/StoreList?city_no="+e+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){0==e.code&&e.data&&e.data.length>0&&(t.cinemaList=e.data)})}}},"back",function(){this.$router.go(-1)})},At=Nt,Bt=(a("96a6"),Object(l["a"])(At,Mt,Rt,!1,null,null,null)),Wt=Bt.exports,Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"ed-myCards"},[a("div",{staticClass:"ed-myCards-top-box"},[a("div",{staticClass:"ed-myCards-top"},[a("div",{staticClass:"ed-myCards-top-logo"},[a("img",{attrs:{src:t.logo.domain+"/img_server/"+t.logo.logo}}),a("p",[t._v(t._s(t.CardDetails.mcname))])]),a("p",{staticClass:"ed-myCards-top-num"},[t._v(t._s(t.CardDetails.mc_num))])])])]),a("div",{staticClass:"cardInfo-box"},[a("div",{staticClass:"cardInfo",staticStyle:{"text-align":"left","word-break":"break-all"}},[t._v("\n\t\t\t"+t._s(t.CardDetails.content)+"\n\t\t\t"),a("p",{staticClass:"cardInfo-title"},[t._v("有效日期")]),a("p",{staticClass:"cardInfo-info"},[t._v("*"+t._s(t.CardDetails.validate_period))])])]),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e()])},zt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("正在加载")])])}],Kt={data:function(){return{loading:!0,CardDetails:""}},beforeRouteEnter:function(t,e,a){document.title="会员卡详情",a()},created:function(){this.GetAccountCard()},methods:{back:function(){router.go(-1)},GetAccountCard:function(){var t=this,e=this,a=x.a.get("_lac_k_"),i="/general_api/api/auth/GetAccountCard?token="+a+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(a){if(a.available)e.CardDetails=a.obj[0],e.loading=!1;else{var i=x.a.get("_lac_ap_");i?t.$router.push({name:"login",params:{apid:i}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}})}}},qt=Kt,Ft=(a("456dc"),Object(l["a"])(qt,Ut,zt,!1,null,null,null)),Vt=Ft.exports,Ht=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Jt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"details-bg"}),a("div",{staticClass:"my-coupons"},[a("div",{staticClass:"NoCoupons"},[a("img",{attrs:{src:"http://pe1s.static.pdr365.com/Nointegrl.png"}}),a("p",[t._v("您还没有积分呢～")])])])])}],Yt={data:function(){return{loading:!0}},beforeRouteEnter:function(t,e,a){document.title="我的积分",a()},created:function(){},methods:{back:function(){router.go(-1)},godo_integral:function(){this.$router.push({name:"integrationRule"})}}},Xt=Yt,Zt=(a("7054"),Object(l["a"])(Xt,Ht,Jt,!1,null,null,null)),Qt=Zt.exports,te=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ee=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",{staticClass:"integrationRule-title"},[t._v("积分规则详细介绍")])])}],ae={data:function(){return{loading:!0}},beforeRouteEnter:function(t,e,a){document.title="积分规则",a()},created:function(){},methods:{back:function(){router.go(-1)}}},ie=ae,se=(a("8ce5"),Object(l["a"])(ie,te,ee,!1,null,null,null)),ne=se.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"details-bg"}),a("div",{staticClass:"cityList-top"},[a("p",[t._v("当前城市："),a("span",[t._v(t._s(t.city_name))])])]),a("div",{staticClass:"cityList-bot"},[a("ul",t._l(t.city,function(e){return a("li",{attrs:{"data-no":e.city_no},on:{click:function(a){t.go_index(e.city_name,e.city_no)}}},[t._v("\n\t\t\t\t"+t._s(e.city_name)+"\n\t\t\t\t")])}))]),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e()])},ce=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],re={data:function(){return{loading:!0,city:"",city_name:""}},beforeRouteEnter:function(t,e,a){document.title="切换城市",a()},created:function(){this.city_nm=x.a.get("goodsOrderNo"),this.cityList()},methods:{back:function(){router.go(-1)},cityList:function(){var t=this;console.log("11");var e="/general_api/api/cityList?ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){"0"==e.code&&(t.city=e.data,t.loading=!1)});var a=x.a.get("city_name");this.city_name=a},go_index:function(t,e){x.a.set("city_no",e),x.a.set("city_name",t),this.$router.push({name:"cinemaList",params:{mid:"2"}})},decodeUnicodeNm:function(t){t=t.replace(/\\/g,"%");var e=unescape(t);this.city_name=void 0==e?"":e},encodeUnicodeCityNM:function(t){for(var e=[],a=0;a<t.length;a++)e[a]=("00"+t.charCodeAt(a).toString(16)).slice(-4);x.a.set("city_name",e.join("\\u"))}}},le=re,de=(a("df27"),Object(l["a"])(le,oe,ce,!1,null,null,null)),_e=de.exports,ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{background:"#EFEEF4"}},[a("div",{staticClass:"cinema-header-wrapper"},[a("div",{staticClass:"cinema-header-info"},[a("p",{staticClass:"cinema-name"},[a("span",[t._v(t._s(t.storeName))])]),a("p",{staticClass:"cinema-header-address"},[t._v(t._s(t.storeAdd))])]),a("div",{staticClass:"map-icon",staticStyle:{"text-align":"center"},on:{click:t.goMap}},[a("img",{staticStyle:{width:".4rem",display:"inline-block"},attrs:{src:"http://pe1s.static.pdr365.com/location_icon.png"}}),a("p",{staticStyle:{color:"#a9a9a9"}},[t._v("地图")])])]),a("div",{staticClass:"swiper-bg"},[a("swiper",{ref:"mySwiper",staticClass:"swiper",staticStyle:{"margin-top":".25rem"},attrs:{options:t.swiperOption}},t._l(t.movie_list,function(t,e){return a("swiper-slide",{key:e,attrs:{"data-index":e}},[a("input",{attrs:{type:"hidden"},domProps:{value:t.id}}),a("img",{staticStyle:{display:"block",width:"100%",height:"100%","border-radius":".1rem"},attrs:{src:""==t.img||null==t.img?"http://pe1s.static.pdr365.com/default_movie_pic.jpg":t.img}})])})),a("div",{staticClass:"choose-movie-name-wrapper"},[a("p",{staticClass:"choose-movie-name"},[a("span",[t._v(t._s(t.properties.film_name))]),t.current_movie.film_score?a("span",{staticClass:"current-movie-score"},[t._v(t._s(t.properties.film_score))]):t._e()])]),a("div",{staticClass:"actor-list-wrapper"},[a("p",[a("span",[t._v(t._s(t.properties.time_diff)+"分钟")]),t._v(" | "),a("span",[t._v(t._s(t.properties.film_type))]),t._v(" | "),a("span",t._l(t.actorList,function(e,i){return i<3?a("span",[t._v(" "+t._s(e.cele_name)+" ")]):t._e()}))])])],1),a("div",{ref:"dateListWrapper",staticClass:"wrapper"},[a("ul",{staticStyle:{position:"absolute",left:"0",top:"0",height:"100%","white-space":"nowrap","z-index":"2"}},t._l(t.date_list,function(e,i){return a("li",{key:i,class:t.date_index===i?"choose-current-date":"",staticStyle:{display:"inline-block","line-height":".91rem",width:"1.87rem",height:"100%","text-align":"center","font-size":".26rem",color:"#828282",padding:"0 .25rem","box-sizing":"border-box"},on:{click:function(e){t.clickDate(i)}}},[t._v(t._s(e.date))])}))]),a("div",{staticClass:"choose-movie-plan-wrapper",staticStyle:{"padding-bottom":"50px"}},[a("ul",t._l(t.current_plan_list,function(e){return a("li",{key:e.planId,attrs:{"data-planid":e.planId,"data-hallId":e.hallId}},[a("div",{staticClass:"choose-item-wrapper"},[a("div",{staticClass:"choose-time-logo"},[1===e.time_flag?a("img",{attrs:{src:"http://pe1s.static.pdr365.com/sun.png"}}):t._e(),2===e.time_flag?a("img",{attrs:{src:"http://pe1s.static.pdr365.com/moon.png"}}):t._e()]),a("div",{staticClass:"choose-time"},[a("p",[t._v(t._s(e.startClock))]),a("p",{staticStyle:{"font-size":".2rem"}},[t._v(t._s(e.endClock)+" 散场")])]),a("div",{staticClass:"choose-hall"},[a("p",[t._v(t._s(e.language))]),a("p",[t._v(t._s(e.hall))])]),a("div",{staticClass:"choose-price"},[a("p",[t._v("¥"+t._s(e.current_price/100))]),a("p",[a("s",[t._v("¥"+t._s(e.standard_price/100))])])])]),a("div",{staticClass:"choose-btn-wrapper",on:{click:function(a){t.godo_seats(e.planId,e.lastUpdateTime,e.hallId,e.planDate)}}},[a("div",{staticClass:"choose-btn"},[t._v("购票")])])])}))]),a("tabBottom",{attrs:{active:"cinema"}}),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e()],1)},me=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],pe=a("6f51"),ve=pe["a"],he=(a("a000"),Object(l["a"])(ve,ue,me,!1,null,null,null)),ge=he.exports,fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"dy-info"},[t.move_data.movieInfo?a("div",{staticClass:"dy-info-name"},[t._v(t._s(t.move_data.movieInfo[0].movieName))]):t._e(),t.move_data.movieInfo?a("div",{staticClass:"dy-info-time"},[t._v(t._s(t.move_data.startTime)+" "+t._s(t.move_data.movieInfo[0].movieLanguage)+t._s(t.move_data.movieInfo[0].movieDimensional))]):t._e()]),a("section",{staticClass:"hidden",staticStyle:{display:"block"},attrs:{id:"seats"}},[a("div",{class:t.standard,attrs:{"data-user":""}},[a("div",{staticClass:"screen-center-name"},[a("div",{staticClass:"tixing"}),a("p",[t._v(t._s(t.move_data.hallName))])]),a("div",{attrs:{id:"wrapper"}},[a("div",{attrs:{id:"scroller"}},[a("div",{staticClass:"item"},[t._m(0),t._l(t.seat_data.rows,function(e,i){return a("p",{attrs:{id:"seat_scroll"}},[t._l(e.seats,function(e,i){return[0==e.seatState||1==e.seatState||2==e.seatState||6==e.seatState||8==e.seatState?a("a",{staticClass:"seat disabled",attrs:{href:"javascript:"}}):4==e.seatState?a("a",{staticClass:"seat active",attrs:{href:"javascript:",name:e.seatRow+"-"+e.seatCol,love:e.loveseats,sid:e.cineSeatId,row:e.seatRow,col:e.seatCol},on:{click:function(a){t.seatnum(e.cineSeatId,e.seatRow,e.seatCol,e.graphCol,e.loveseats)}}}):a("span",{staticClass:"seat"})]})],2)})],2)]),a("div",{staticClass:"side"},[a("ol",{attrs:{id:"float-row"}},[a("li",{staticClass:"cs"}),t._l(t.seat_data.rows,function(e,i){return a("li",[t._v("\n                                "+t._s(e.row)+"\n                            ")])}),a("li",{staticClass:"cs"})],2)])]),t._m(1)])]),a("div",{staticClass:"side-box"},t._l(t.select_seat,function(e){return a("div",{staticClass:"side-box-list"},[t._v(t._s(e.row)+"排"+t._s(e.col)+"座")])})),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),a("div",{staticClass:"dy-card-item"},[a("div",{staticClass:"dy-btn"},[t.select_seat.length?a("button",{staticClass:"dy-button",attrs:{id:"J_confirm",type:"submit"},on:{click:t.makeorder}},[t._v("确认选座")]):t._e(),t.select_seat.length?t._e():a("button",{staticClass:"dy-button",staticStyle:{border:"1px solid #9ad499",background:"#9de59c"},attrs:{id:"J_confirm",type:"submit"}},[t._v("请先选座")])])]),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(2)]):t._e(),t.hint?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v(t._s(t.loginhint))])])]):t._e(),t.city_tip?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog1"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v("当前场次您有"+t._s(t.order_obj.buy_num)+"个座位的未支付订单")]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:t.gopay}},[t._v("立即支付")]),a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:t.nopay}},[t._v("我要重选")])])])]):t._e()])},Ce=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c-tips"},[a("span",[t._v("银幕中央")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tips cf"},[a("ul",{staticClass:"seat-intro",staticStyle:{width:"100%"}},[a("li",[a("a",{staticClass:"seat active",attrs:{href:"javascript:;"}}),t._v("可选")]),a("li",[a("a",{staticClass:"seat disabled",attrs:{href:"javascript:;"}}),t._v("已售")]),a("li",[a("a",{staticClass:"seat selected",attrs:{href:"javascript:;"}}),t._v("已选")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("正在加载")])])}],we=(a("28a5"),{data:function(){var t;return t={loading:!0,tip_msg:!1,city_tip:!1,hint:!1,max:4,show_body:"none",standard:"main main-small main-big",seat_data:{},select_seat_meta:{},select_seat:"",order_obj:{},move_data:{},apid:"",codesrc:""},Object(Gt["a"])(t,"hint",""),Object(Gt["a"])(t,"apid",""),Object(Gt["a"])(t,"loginhint",""),Object(Gt["a"])(t,"identifying_code","发送验证码"),Object(Gt["a"])(t,"num",""),Object(Gt["a"])(t,"rowsLength",""),Object(Gt["a"])(t,"positionLeft","0"),Object(Gt["a"])(t,"zoom",""),Object(Gt["a"])(t,"loadScroll",null),Object(Gt["a"])(t,"tip_msg",""),Object(Gt["a"])(t,"cinemaId",""),Object(Gt["a"])(t,"plan_date",""),Object(Gt["a"])(t,"hallId",""),Object(Gt["a"])(t,"lastUpdateTime",""),Object(Gt["a"])(t,"planId",""),Object(Gt["a"])(t,"myScroll",""),Object(Gt["a"])(t,"code",""),t},beforeRouteEnter:function(t,e,a){document.title="在线选座",a()},created:function(){this.planId=this.$route.params.planId,this.lastUpdateTime=this.$route.params.lastUpdateTime,this.hallId=this.$route.params.hallId,this.cinemaId=this.$route.params.cinemaId,this.plan_date=this.$route.params.plan_date,this.fetchSeatData(this.plan_date,this.planId,this.lastUpdateTime,this.hallId,this.cinemaId)},mounted:function(){this.seatScroll()},beforeDestroy:function(){this.loadScroll&&clearInterval(this.loadScroll)},methods:{seatScroll:function(){var t=new IScroll("#wrapper",{scrollX:!0,scrollY:!0,preventDefault:!1,zoom:!0,zoomMax:1.5,zoomMin:1,bounce:!0,mouseWheel:!0,wheelAction:"zoom"});this.myScroll=t},back:function(){router.go(-1)},fetchSeatData:function(t,e,a,i,s){var n=this,o=this,c=x.a.get("_lac_ap_"),r="/general_api/api/GetSeats?plan_date="+t+"&plan_id="+e+"&last_update_time="+a+"&hall_id="+i+"&cinema_id="+s+"&ap_id="+c+"&"+Date.parse(new Date);fetch(r).then(function(t){return t.json()}).then(function(t){o.loading=!1,o.show_body="";var e=t.data.recent_order;0==t.code&&(o.move_data=t.data.plan,console.log(o.move_data),o.seat_data=t.data.seat,o.rowsLength=t.data.seat.rows.length),t.data.seat.rows.length>11&&(o.standard="main main-small"),e&&(n.city_tip=!0,n.order_obj=e);var a=setInterval(function(){if($("#wrapper")[0]){var t=$("#scroller").width(),e=$(window).width();$("#wrapper").animate({scrollLeft:(t-e)/2+22}),o.loadScroll=setInterval(function(){if($("#scroller").css("transform")){var t=$("#scroller").css("transform").split(","),e=parseFloat(t[5]),a="translateY("+e+"px) scale("+t[3]+")";$(".side").css("transform",a)}$(".side").css("left",$("#wrapper").scrollLeft())},1e3/60),clearInterval(a)}},300)})},gopay:function(){this.order_obj;var t=x.a.get("ticket_trdnum");location.href="/general_api/tcss/index/?#/confirmOrder/"+t},nopay:function(){var t=this,e=this.order_obj,a=x.a.get("_lac_k_"),i="/general_api/api/auth/release_seat_order?order_no="+e.order_no+"&token="+a+"&"+(new Date).getTime();this.loading=!0,this.city_tip=!1,fetch(i).then(function(t){return t.json()}).then(function(e){console.log(e),t.loading=!1,t.loading=!1,t.city_tip=!1,t.planId=t.$route.params.planId,t.lastUpdateTime=t.$route.params.lastUpdateTime,t.hallId=t.$route.params.hallId,t.cinemaId=t.$route.params.cinemaId,t.plan_date=t.$route.params.plan_date,t.fetchSeatData(t.plan_date,t.planId,t.lastUpdateTime,t.hallId,t.cinemaId)})},showTip:function(t,e){var a=this;a.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},e))},seatnum:function(t,e,a,i,s){var n=this,o=e+"-"+a;if(n.seats=o,n.select_seat_meta[o])if($("a[name="+o+"]").removeClass("selected").addClass("active"),s){var c=$("a[love="+s+"]");c.each(function(){$(this).removeClass("selected").addClass("active");var t=$(this).attr("name");delete n.select_seat_meta[t]})}else delete n.select_seat_meta[o];else{if(n.select_seat.length+1>n.max)return void n.showTip("最多只能购买4个座位",1300);if($("a[name="+o+"]").removeClass("active").addClass("selected"),s){var r=$("a[love="+s+"]");r.each(function(){$(this).removeClass("active").addClass("selected");var t=$(this).attr("name");n.select_seat_meta[t]={sid:$(this).attr("sid"),row:$(this).attr("row"),col:$(this).attr("col")}})}else n.select_seat_meta[o]={sid:t,row:e,col:a}}var l=[];for(var d in n.select_seat_meta)l.push(n.select_seat_meta[d]);n.select_seat=l;l.length;var _=$("#seat_scroll .selected");_.offset()&&(n.rowsLength>11?(this.myScroll.zoom(1.5,_.offset().left,_.offset().top),this.myScroll.scrollToElement("#seat_scroll .selected",1200,!0,!0)):(this.myScroll.zoom(1.2,_.offset().left,_.offset().top),this.myScroll.scrollToElement("#seat_scroll .selected",1200,!0,!0)))},makeorder:function(){var t=this,e=x.a.get("_lac_k_"),a=(x.a.get("_lac_ated_"),x.a.get("_lac_op_"),x.a.get("_lac_ap_"));e?t.GoPayTicket():this.$router.push({name:"login",params:{apid:a}})},GoPayTicket:function(){var t=this;if(t.loading=!0,!t.select_seat.length)return t.showTip("请选择您要购买的座位",1300),void(t.loading=!1);for(var e="",a="",i=0,s=t.select_seat.length;i<s;i++)a&&(a+=","),a+=t.select_seat[i].sid,e=e+t.select_seat[i].row+"排"+t.select_seat[i].col+"座 ";var n=x.a.get("_lac_k_"),o="/general_api/api/auth/CreateSeatsOrder?plan_id="+t.planId+"&last_update_time="+t.lastUpdateTime+"&hall_id="+t.hallId+"&cinema_id="+t.cinemaId+"&seat_ids="+a+"&plan_date="+t.plan_date+"&token="+n+"&ts="+Date.parse(new Date);fetch(o).then(function(t){return t.json()}).then(function(e){if(t.loading=!1,0==e.code)document.cookie="orderNo="+e.data[1].order_no+";path=/",x.a.set("ticket_trdnum",e.data[0]),location.href="/general_api/tcss/index/?#/confirmOrder/"+e.data[0];else{if(0==e.available&&"user_no_login"==e.messages[0])return void(location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime());t.showTip("座位锁定失败",1300),t.seat_data={},t.select_seat_meta=[],t.select_seat=[],t.fetchSeatData(t.plan_date,t.planId,t.lastUpdateTime,t.hallId,t.cinemaId)}})}}}),be=we,ye=(a("51b8"),Object(l["a"])(be,fe,Ce,!1,null,null,null)),ke=ye.exports,xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{background:"#EFEFF4"}},[a("div",{staticClass:"order-card-box"},[a("div",{staticClass:"order-card-con-bg"},[a("div",{staticClass:"order-card-con"},[a("div",{staticClass:"order-card-title"},[a("p",[a("span",{staticClass:"card-title-name"},[t._v(t._s(t.movieDetails.film_name)+" "),a("b",{staticClass:"card-title-sore"},[t._v(t._s(t.movieDetails.ticket_sum)+"张")])]),a("span",{staticClass:"card-title-right",staticStyle:{width:"1.6rem"}},[t._v("付款剩余时间")])])]),a("div",{staticClass:"card-title-right-time"},[t._v(t._s(t.msg))]),a("div",{staticClass:"order-card-time"},[a("p",[t._v(t._s(t.movieDetails.plan_date)+" "+t._s(t.movieDetails.plan_time))])]),a("div",{staticClass:"order-card-address"},[a("p",[t._v(t._s(t.movieDetails.store_name))])]),a("div",{staticClass:"order-card-seat"},[a("p",[t._v(t._s(t.movieDetails.hall_name)+" "),t._l(t.movieDetails.seats,function(e){return a("span",[t._v(" "+t._s(e.seat_sr)+"排"+t._s(e.seat_sc)+"座 ")])})],2)]),a("div",{staticClass:"dashed"}),t._m(0)])])]),a("section",{staticClass:"myweui-cells weui-cells",staticStyle:{"margin-top":".3rem"}},[a("a",{staticClass:"weui-cell myweui-cell cell-height-88 weui-cell_access",attrs:{href:"javascript:;"},on:{click:t.goCoupons}},[t._m(1),t.o_c?a("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":".3rem"}},[t._v(t._s(t.o_c.batch_title))]):a("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":".3rem"}},[t._v("点击选择")])]),a("div",{staticClass:"weui-cell myweui-cell cell-height-88"},[t._m(2),a("div",{staticClass:"weui-cell__ft",staticStyle:{color:"#00c203","font-size":".3rem"}},[t._v(t._s(t.movieDetails.total_amount/100)+"元")])])]),"-1"==t.CardData||null==t.CardData?a("section",{staticClass:"vip-card"},[a("div",{staticClass:"weui-cells myweui-cells",staticStyle:{"margin-top":".3rem"},on:{click:t.GoKaika}},[a("a",{staticClass:"weui-cell myweui-cell vip-cell weui-cell_access",attrs:{href:"javascript:;"}},[a("div",{staticClass:"weui-cell__bd"},[a("div"),a("p",{staticClass:"vip-cell-title",staticStyle:{"font-size":".3rem"}},[t._v(t._s(t.logo.proj_name)+"会员卡")]),t._m(3)]),a("div",{staticClass:"weui-cell__ft"})])])]):a("section",{staticClass:"myweui-cells weui-cells_checkbox",staticStyle:{"margin-top":".3rem"}},[t.CardData?a("label",{staticClass:"weui-cell myweui-cell cell-height-88 weui-check__label",staticStyle:{background:"#fff"},attrs:{for:"x11"},on:{click:function(e){e.preventDefault(),t.changePrice("101001")}}},[a("div",{staticClass:"weui-cell__bd"},[a("p",[t._v("会员余额支付（余额："+t._s(t.CardData[0].balance/100)+"元）")])]),a("div",{staticClass:"weui-cell__ft"},[a("input",{staticClass:"weui-check",attrs:{type:"radio",name:"radio1",id:"x11"},domProps:{checked:"101001"===t.pay_methods}}),a("span",{staticClass:"weui-icon-checked",staticStyle:{transform:"scale(.8)"}})])]):t._e(),a("label",{staticClass:"weui-cell myweui-cell cell-height-88 weui-check__label",staticStyle:{background:"#fff"},attrs:{for:"x12"},on:{click:function(e){e.preventDefault(),t.changePrice("201101")}}},[t._m(4),a("div",{staticClass:"weui-cell__ft"},[a("input",{staticClass:"weui-check",attrs:{type:"radio",name:"radio1",id:"x12"},domProps:{checked:"201101"===t.pay_methods}}),a("span",{staticClass:"weui-icon-checked",staticStyle:{transform:"scale(.8)"}})])])]),a("div",{staticClass:"myweui-panel weui-panel weui-panel_access",staticStyle:{"padding-bottom":"2.5rem"}},[a("div",{staticClass:"weui-panel__hd",staticStyle:{color:"#000"}},[t._v("购票须知")]),a("div",{staticClass:"weui-panel__bd"},[a("div",{staticClass:"weui-media-box weui-media-box_text"},[a("p",{staticClass:"weui-media-box__desc myweui-media-box__desc"},[t._v("\n                    1、由于设备故障等不可抗力因素，存在少量场次取消的情况，会进行退票退款"),a("br"),t._v(" \n                    2、由于影院系统不稳定等因素，存在出票失败的情况，会进行退款"),a("br"),t._v(" \n                    3、取票码不再通过短信发送，可在“钱包-卡券”或“我的-电影票”中查看"),a("br"),t._v(" \n                    4、下单即代表你同意"),a("a",{staticStyle:{color:"#00c203"},attrs:{href:"javascript:void(0);"}},[t._v("《"+t._s(t.logo.proj_name)+"用户服务协议》")]),a("br"),t._v(" \n                    5、订单编号"+t._s(t.movieDetails.order_no)+"\n                ")])])])]),a("div",{staticClass:"confirm-btn-container",staticStyle:{position:"fixed",bottom:"0"}},[a("div",{staticClass:"btn-container"},[a("div",{staticClass:"confirm-btn-total-price",on:{click:t.isShow}},[a("p",[a("span",[t._v("合计:")]),a("span",{staticStyle:{color:"#00c203"}},[t._v(t._s(t.movieDetails.pay_amount/100)+"元")]),a("span",{staticClass:"iconfont icon-triangle-up",class:t.trangle?"trangle-down":"trangle-up",staticStyle:{"font-size":".26rem",color:"#BCBEC1"}})])]),a("div",{staticClass:"confirm-btn"},[a("a",{staticClass:"weui-btn weui-btn_primary",staticStyle:{"font-size":"0.34rem",color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.GoPay}},[t._v("确认支付")])])]),a("div",{staticClass:"order-details-card",staticStyle:{display:"none"}},[a("div",{staticClass:"order-details-card-title"},[a("p",[t._v("结算明细")]),a("div",{staticClass:"cancel-card-show",on:{click:t.isShow}},[t._v("取消")])]),a("div",{staticClass:"order-details-card-con"},[t._m(5),a("div",{staticClass:"card-con-item"},[a("p",{staticClass:"color-a9"},[a("span",[t._v("原价票")]),a("span",[t._v(t._s(t.movieDetails.total_amount/t.movieDetails.ticket_sum/100)+"元 X "+t._s(t.movieDetails.ticket_sum))])]),t.offer_show?a("p",{staticClass:"color-a9"},[a("span",[t._v("优惠券")]),a("span",[t._v("减："+t._s(t.offer_amount)+"元")])]):t._e()])])])]),a("div",{staticClass:"weui-mask",staticStyle:{display:"none","z-index":"98"},attrs:{id:"iosMask"},on:{click:t.isShow}}),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(6)]):t._e(),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask",staticStyle:{"z-index":"100"}}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.Pwd_tip?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog1"}},[a("div",{staticClass:"weui-mask",staticStyle:{"z-index":"100"}}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v("请输入会员卡密码")]),a("div",{staticClass:"weui-dialog__bd nified"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.Pwd,expression:"Pwd"}],staticStyle:{border:"1px solid #ccc",width:"70%",height:".6rem","margin-bottom":".3rem"},attrs:{type:"password",name:""},domProps:{value:t.Pwd},on:{input:function(e){e.target.composing||(t.Pwd=e.target.value)}}})]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:t.PwdTip}},[t._v("取消")]),a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:t.setPwd}},[t._v("确定")])])])]):t._e()])},Se=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"order-card-status"},[a("div",{staticClass:"t-cancel"},[a("i",{staticClass:"iconfont icon-cancel"}),a("span",[t._v("不可退票")])]),a("div",{staticClass:"t-change"},[a("i",{staticClass:"iconfont icon-cancel"}),a("span",[t._v("不可改签")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__bd"},[a("p",{staticStyle:{"font-size":".3rem",color:"#2c3e50"}},[t._v("优惠券")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__bd"},[a("p",{staticStyle:{"font-size":".3rem"}},[t._v("票价总计")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"vip-cell-con"},[t._v("开卡影票最低"),a("span",[t._v("25元起")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__bd"},[a("p",[t._v("微信支付")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-con-title"},[a("span",[t._v("电影票")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],De={data:function(){return{loading:!0,Pwd_tip:!1,on:"",movieDetails:"",CardData:"",trangle:!1,isFixed:!1,msg:"15:00",tnum:"",other:"",tip_msg:"",Pwd:"",order_no:"",o_c:"",offer_amount:"",offer_show:!1,pay_methods:"101001"}},beforeRouteEnter:function(t,e,a){document.title="确认订单",a()},created:function(){var t=sessionStorage.getItem("o_c");t&&(this.o_c=JSON.parse(t))},computed:Object(F["a"])({},Object(V["mapState"])(["logo"])),mounted:function(){this.on=x.a.get("orderNo"),this.tnum=this.$route.params.tnum,this.GetAccountCard(),this.GetOrderDetails(),this.countTime("900")},methods:{showTip:function(t,e){var a=this;a.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},e))},PwdTip:function(){var t=this;t.Pwd_tip=!1},GoPay:function(){var t=this,e=t.tnum;t.loading=!0;var a=x.a.get("_lac_k_");if("-1"==t.CardData||null==t.CardData){var i=t.o_c.id||"",s="/general_api/api/auth/GetWxObj?ct=201101&token="+a+"&tnum="+e+"&coupon_id="+i+"&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(e){console.log(e),-1==e.code?(t.loading=!1,t.showTip(e.text)):0==e.code?(t.loading=!1,t.other=e.other,t.onBridgeReady()):0==e.available&&"user_no_login"==e.messages[0]&&t.showTip("用户未登录")})}else if(document.getElementById("x12").checked){var n=t.o_c.id||"";s="/general_api/api/auth/GetWxObj?ct=201101&token="+a+"&coupon_id="+n+"&tnum="+e+"&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(e){console.log(e),-1==e.code?(t.loading=!1,t.showTip(e.text)):0==e.code?(t.loading=!1,t.other=e.other,t.onBridgeReady()):0==e.available&&"user_no_login"==e.messages[0]&&t.showTip("用户未登录")})}else t.loading=!1,t.Pwd_tip=!0},setPwd:function(){var t=this,e=x.a.get("_lac_k_"),a=t.tnum,i=t.o_c.id||"",s="/general_api/api/auth/GetWxObj?ct=101001&token="+e+"&coupon_id="+i+"&tnum="+a+"&pwd="+t.Pwd+"&unicode="+t.CardData[0].mc_num+"&ts="+Date.parse(new Date);t.loading=!0,t.Pwd_tip=!1,fetch(s).then(function(t){return t.json()}).then(function(e){t.loading=!1,"-1"==e.code?(t.showTip(e.text),t.Pwd_tip=!1,t.Pwd=""):"0"==e.code&&"交易成功"==e.text?(t.loading=!1,t.Pwd_tip=!1,t.showTip("支付成功"),t.Pwd="",setTimeout(function(){t.$router.push({name:"votingCode",params:{on:t.on}})},100)):"0"==e.code&&"-1"==e.other[0].code?(t.loading=!1,t.Pwd_tip=!1,t.showTip(e.other[0].err_code_desc),t.Pwd=""):e.available||(t.Pwd_tip=!1,t.Pwd="","user_no_login"==e.messages[0]?t.showTip("用户未登录"):"trade_status_invalid"==e.messages[0]?t.showTip("请勿重复支付"):t.showTip(e.messages[1]||e.messages[0]))})},onBridgeReady:function(){var t=this.other;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:"MD5",paySign:t.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg?location.href="/general_api/tcss/index#/myTicket":"get_brand_wcpay_request:cancel"==t.err_msg?alert("您取消了付款"):"get_brand_wcpay_request:fail"==t.err_msg&&alert("支付失败")})},GoKaika:function(){location.href="/general_api/tcss/index/?#/purchasingCard/purchasing"},countTime:function(t){var e=this;t=Number(t);if(t>=0){var a=Math.floor(t/60),i=Math.floor(t%60),s=a+":"+i;e.msg=s,setTimeout(function(){t-=1,e.countTime(t)},1e3)}else e.msg="00:00"},GetAccountCard:function(){var t=this,e=this,a=x.a.get("_lac_k_"),i="/general_api/api/auth/GetAccountCard?token="+a+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(a){e.CardData=a.obj,a.obj&&t.changePrice("101001"),e.loading=!1})},GetOrderDetails:function(){var t=this,e=this,a=this.o_c.id||"",i="/general_api/api/GetTicketOrderDetails?order_no="+e.on+"&coupon_id="+a+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(a){0==a.code&&(e.movieDetails=a.data,e.order_no=a.data.order_no,e.loading=!1,null===a.pref_coupon?sessionStorage.removeItem("o_c"):""===a.pref_coupon?(weui.topTips("当前优惠券无法使用",5e3),sessionStorage.removeItem("o_c"),t.o_c=""):(e.offer_amount=a.pref_coupon.prep_amount/100,e.offer_show=!0))})},isShow:function(){this.trangle=!this.trangle;var t=$("#iosMask"),e=$(".order-details-card");this.trangle?(t.fadeIn(200),e.slideDown(400)):(t.fadeOut(200),e.slideUp(400))},goCoupons:function(){var t=this.order_no,e=this.tnum;this.$router.push({name:"couponsForOrder",params:{order_no:t,tnum:e}})},changePrice:function(t){var e=this;this.loading=!0,this.pay_methods=t;var a="101001"===t?this.CardData[0].card_code:"",i=this.o_c.id?this.o_c.id+","+this.o_c.crapp:"",s=x.a.get("_lac_k_"),n="/general_api/api/auth/change_price?tnum="+this.tnum+"&order_no="+this.on+"&ct="+t+"&unicode="+a+"&coupons="+i+"&token="+s+"&ts="+Date.parse(new Date);fetch(n).then(function(t){return t.json()}).then(function(t){e.loading=!1,console.log(t),0==t.code?e.movieDetails=t.data:weui.topTips(t.msg,5e3)}).catch(function(t){e.loading=!1})}}},Te=De,Ee=(a("f9e9"),Object(l["a"])(Te,xe,Se,!1,null,null,null)),je=Ee.exports,Oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%",height:"100%","padding-bottom":"120px"}},[a("div",{staticClass:"goods"},[a("div",{ref:"menuWrapper",staticClass:"menu-wrapper",staticStyle:{overflow:"auto"}},[a("ul",t._l(t.groupList,function(e,i){return a("li",{key:i,class:i===t.menuCurIndex?"menu-selected":"",on:{click:function(a){t.menuClick(i,e.id,a)}}},[a("p",[t._v(t._s(e.cat_name_cn))])])}))]),a("div",{ref:"goodsWrapper",staticClass:"goods-wrapper",staticStyle:{overflow:"auto"}},[t.groupList.length>0?a("div",{staticClass:"goods-wrapper-title"},[t._v(t._s(t.groupList[t.menuCurIndex].cat_name_cn))]):t._e(),a("ul",t._l(t.goodsList,function(e,i){return a("li",{key:i},[a("div",{staticClass:"goods-item-box"},[a("div",{staticClass:"goods-img"},[null==e[0].stock||"0"==e[0].stock?a("span",{staticStyle:{padding:"2px 4px",background:"#CC6666",position:"absolute",color:"#fff","z-index":"1"}},[t._v("售罄")]):t._e(),a("img",{attrs:{src:"http://pe1s.static.pdr365.com/null"!==e[0].sku_img?e[0].sku_img:"",alt:""},on:{click:function(a){t.goDetails(e)}}})]),a("div",{staticClass:"goods-item"},[a("div",{staticClass:"goods-item-title"},[a("span",[t._v(t._s(e[1].goods_name))])]),t._l(e[0].skus,function(e,i,s){return a("div",{key:s,staticClass:"goods-item-sku"},[a("span",[t._v(t._s(i)+":")]),a("span",[t._v(t._s(e))])])}),a("div",{staticClass:"goods-item-price"},[a("span",[t._v("¥"+t._s(e[1].goods_price/100))])])],2),a("div",{staticClass:"goods-control"},[a("cartControl",{attrs:{foods:e,stock:e[0].stock}})],1)])])})),t.goodsList.length>0?a("div",{staticClass:"bottom-tip"},[t._v("已经是最底了哦～")]):t._e()]),a("comboCart",{directives:[{name:"show",rawName:"v-show",value:t.comboShow,expression:"comboShow"}],attrs:{combo:t.comboData}}),a("shopCart",{directives:[{name:"show",rawName:"v-show",value:!t.comboShow,expression:"!comboShow"}],attrs:{cartList:t.cartList,bottom:t.bottom},on:{"create-order":t.createOrder}})],1),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e(),a("tabBottom",{attrs:{active:"store"}})],1)},Ie=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],Le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.stock?a("div",{staticClass:"cart"},[a("transition",{attrs:{name:"fadeRotate"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.foods[0].count>0,expression:"foods[0].count>0"}],staticClass:"cart-reduce",on:{click:function(e){t.reduce()}}},[a("i",{staticClass:"iconfont icon-jianhao",staticStyle:{"font-size":"22px"}})])]),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.foods[0].count>0,expression:"foods[0].count>0"}],staticClass:"cart-count",staticStyle:{"font-size":"0.32rem"}},[t._v("\n            "+t._s(t.foods[0].count)+"\n        ")])]),a("div",{staticClass:"cart-add",on:{click:function(e){t.add(e)}}},[a("i",{staticClass:"iconfont icon-jiahao2",staticStyle:{"font-size":"22px"}})]),a("div",{staticClass:"ball-container"},t._l(t.balls,function(e,i){return a("transition",{attrs:{name:"drop"},on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"ball.show"}],staticClass:"ball"},[a("div",{staticClass:"inner inner-hook"})])])}))],1):a("div",{staticClass:"cart"},[t._m(0)])},$e=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cart-add"},[a("i",{staticClass:"iconfont icon-jiahao2",staticStyle:{"font-size":"22px",color:"#ccc"}})])}],Pe={name:"cartControl",props:{foods:{},stock:""},data:function(){return{count:0,balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[]}},methods:Object(F["a"])({},Object(V["mapActions"])(["AddToCart","ReleaseToCart","ListenCart"]),{reduce:function(){this.foods[0].count>0?(this.foods[0].count--,this.count--):(this.foods[0].count=0,this.count=0),this.ReleaseToCart({data:this.foods}),this.$emit("reduce")},add:function(t){this.foods[0].count++,this.count++,this.AddToCart({data:this.foods}),this.drop(t.target),this.$emit("add")},drop:function(t){for(var e=0,a=this.balls.length;e<a;e++){var i=this.balls[e];if(!i.show)return i.show=!0,i.el=t,void this.dropBalls.push(i)}},beforeEnter:function(t){var e=this.balls.length;while(e--){var a=this.balls[e];if(a.show){var i=a.el.getBoundingClientRect(),s=i.left-32,n=-(window.innerHeight-i.top-22);t.style.display="",t.style.webkitTransform="translate3d(0,".concat(n,"px,0)"),t.style.transform="translate3d(0,".concat(n,"px,0)");var o=t.querySelector(".inner-hook");o.style.webkitTransform="translate3d(".concat(s,"px,0,0)"),o.style.transform="translate3d(".concat(s,"px,0,0)")}}},enter:function(t){t.offsetHeight,this.$nextTick(function(){t.style.webkitTransform="translate3d(0,0,0)",t.style.transform="translate3d(0,0,0)";var e=t.querySelector(".inner-hook");e.style.webkitTransform="translate3d(0,0,0)",e.style.transform="translate3d(0,0,0)"})},afterEnter:function(t){var e=this.dropBalls.shift();e&&(e.show=!1,t.style.display="none")}}),watch:{count:function(){this.ListenCart()}}},Me=Pe,Re=(a("722f"),Object(l["a"])(Me,Le,$e,!1,null,null,null)),Ge=Re.exports,Ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"shopCart",style:t.bottom},[a("div",{staticClass:"content"},[a("div",{staticClass:"content-left",on:{click:t.listToggle}},[a("div",{staticClass:"logo-wrapper"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount,expression:"totalCount"}],staticClass:"badge"},[t._v("\n                        "+t._s(t.totalCount)+"\n                    ")]),a("div",{staticClass:"logo",class:{active:t.totalPrice}},[a("i",{staticClass:"iconfont icon-ai66"})])]),a("div",{staticClass:"price",class:{active:t.totalPrice}},[t._v("\n                    ￥"+t._s(t._f("toFixed")(t.totalPrice))+"\n                ")])]),a("div",{staticClass:"content-right",class:{enough:t.totalPrice},on:{click:t.createOrder}},[t._v(" 去结算 ")])]),a("transition",{attrs:{name:"transHeight"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[a("div",{staticClass:"list-header"},[a("p",{staticClass:"title"},[t._v("购物车")]),a("span",{staticClass:"empty",on:{click:t.setEmpty}},[a("i",{staticClass:"iconfont icon-lajitong",staticStyle:{"font-size":"12px"}}),t._v("\n                        清空购物车\n                    ")])]),a("div",{ref:"foodlist",staticClass:"list-content"},[a("ul",t._l(t.cartList,function(e){return a("li",{staticClass:"food"},[a("div",{staticClass:"name"},[a("p",[t._v(t._s(e[1].goods_name))]),a("div",{staticStyle:{display:"flex"}},t._l(e[0].skus,function(e,i,s){return a("p",{key:s,staticStyle:{"font-size":"12px",color:"#ccc"}},[a("span",[t._v(t._s(i)+":")]),a("span",[t._v(t._s(e))])])}))]),a("div",{staticClass:"price"},[a("span",[t._v("￥"+t._s(t._f("toFixed")(Number(e[1].goods_price)/100*Number(e[0].count))))])]),a("div",{staticClass:"cartcontrol-wrapper"},[a("cartControl",{attrs:{foods:e,stock:!0}})],1)])}))])])])],1),a("transition",{attrs:{name:"fade-backdrop"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showBackdrop,expression:"showBackdrop"}],staticClass:"backdrop",on:{click:t.hideBackdrop}})])],1)},Ae=[],Be={name:"shopCart",props:{cartList:{type:Array,default:[]},bottom:{type:String,default:"bottom:0"}},data:function(){return{listShow:!1}},mounted:function(){},computed:{showBackdrop:function(){return!(!this.listShow||!this.totalPrice)||(this.listShow=!1,!1)},totalCount:function(){var t=0;return this.cartList.forEach(function(e){t+=e[0].count}),t},totalPrice:function(){var t=0;return this.cartList.forEach(function(e){e[0].count&&(t+=Number(e[1].goods_price)/100*Number(e[0].count))}),t}},methods:{_initScroll:function(){this.foodlistScroll=new S["a"](this.$refs.foodlist,{click:!0})},hideBackdrop:function(){this.listShow=!1},listToggle:function(){var t=this;this.cartList.length&&(this.listShow=!this.listShow,this.listShow&&this.$nextTick(function(){t.foodlistScroll?t.foodlistScroll.refresh():t._initScroll()}))},createOrder:function(){this.totalPrice&&this.$emit("create-order")},setEmpty:function(){this.$store.dispatch("ClearCart")}},components:{cartControl:Ge}},We=Be,Ue=(a("93b5"),Object(l["a"])(We,Ne,Ae,!1,null,"c20fb25a",null)),ze=Ue.exports,Ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}]},[a("div",{staticClass:"comboCart"},[t._m(0),t.combo.length>0?a("transition",{attrs:{name:"transHeight"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"combocart-list"},[a("div",{staticClass:"food-info food-item"},[a("div",{staticClass:"food-info-head"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:t.combo[0].sku_img}})]),a("div",[a("p",{staticClass:"name"},[t._v(t._s(t.combo[1].goods_name))]),a("p",{staticClass:"price"},[t._v(t._s(t.combo[1].goods_price/100)+"元")])])])]),a("div",{staticClass:"food-sku food-item"},[a("div",{staticClass:"title"},[t._v("商品规格")]),a("ul",t._l(t.combo[0].skus,function(e,i,s){return a("li",{key:s,class:s===t.skuIndex?"active":"",on:{click:function(e){t.skuIndex=s}}},[t._v(t._s(e))])}))]),a("div",{staticClass:"food-sku food-item"},[a("div",{staticClass:"title"},[t._v("特殊要求")]),a("ul",t._l(t.remark_list,function(e,i){return a("li",{key:i,class:i===t.remarkIndex?"active":"",on:{click:function(e){t.remarkIndex=i}}},[t._v(t._s(e))])}))])])]):t._e()],1),a("transition",{attrs:{name:"fade-backdrop"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"backdrop",on:{click:t.hideBackdrop}})])],1)},qe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"add-to-cart"},[t._v(" 加入购物车 ")])])}],Fe={name:"comboCart",props:{combo:{type:Array,default:[]}},data:function(){return{skuIndex:0,remarkIndex:0,remark_list:["标准糖","少糖","多糖","去冰","少冰","##"]}},computed:{listShow:function(){return this.$store.state.comboShow},totalCount:function(){var t=0;return this.cartList.forEach(function(e){t+=e[0].count}),t},totalPrice:function(){var t=0;return this.cartList.forEach(function(e){e[0].count&&(t+=Number(e[1].goods_price)/100*Number(e[0].count))}),t}},methods:{hideBackdrop:function(){this.$store.dispatch("ToggleComboShow")}},components:{cartControl:Ge}},Ve=Fe,He=(a("5db3"),Object(l["a"])(Ve,Ke,qe,!1,null,"c97ef802",null)),Je=He.exports,Ye={data:function(){return{tableNum:"",loading:!1,tip_msg:"",choose:!1,GoPay:!1,StoreList:"",menuCurIndex:0,comboData:[],sid:"",bottom:"bottom:50px",has_sid:!1}},beforeRouteEnter:function(t,e,a){document.title="商品",a()},computed:Object(F["a"])({},Object(V["mapState"])(["groupList","goodsList","firCatId","cartList","comboShow","logo"])),created:function(){var t=this.$route.params.sid;t?(this.sid=t,x.a.set("s_id",t)):this.sid=x.a.get("s_id"),this.CheckLogin()},mounted:function(){this.cityList()},methods:Object(F["a"])({},Object(V["mapActions"])(["getGoodsList","getGroupList","ToggleComboShow","initFirCatId"]),{_initScroll:function(){},menuClick:function(t,e,a){this.menuCurIndex=t;var i={};i.id=e,i.sid=this.sid,console.log(i),this.getGoodsList(i)},CheckLogin:function(){var t=x.a.get("_lac_ap_");t||(location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime())},goCombo:function(t){this.comboData=t,this.ToggleComboShow()},showTip:function(t,e){var a=this;a.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},e))},createOrder:function(){var t=this,e=x.a.get("_lac_k_");x.a.get("_lac_ated_"),x.a.get("_lac_op_");if(e)t.GoGoodsPay();else{var a=x.a.get("_lac_ap_");a?this.$router.push({name:"login",params:{apid:a}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}},cityList:function(){var t=this,e=x.a.get("city_no");if(e)this.sid?(this.initFirCatId(),this.getGroupList("storeList")):this.GetStore(e);else{var a=this,i="/general_api/api/cityList?ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){console.log(e),"0"==e.code&&e.data&&e.data.length>0&&(x.a.set("city_no",e.data[0].city_no),a.city_name=e.data[0].city_name,a.city_no=Number(e.data[0].city_no),t.GetStore(Number(e.data[0].city_no)),x.a.set("city_name",a.city_name)),a.loading=!1})}},GoGoodsPay:function(){var t=this,e="";t.loading=!0,this.cartList.forEach(function(t,a){var i="";i+=t[1].gt+","+t[1].id+","+t[0].id+",",e+=i.slice(0,i.length-1)+","+t[0].count+",;"});var a=e.slice(0,e.length-1),i=x.a.get("_lac_k_"),s=t.sid,n="/general_api/api/auth/createOrder?dss=190&tbn=&gs="+a+"&sid="+s+"&token="+i+"&ts="+Date.parse(new Date);fetch(n).then(function(t){return t.json()}).then(function(e){if(console.log(e),e.available){t.loading=!1;var a=e.data[0],i=e.data[1];document.cookie="goodsOrderNo="+i[0].order_no+";path=/",document.cookie="goosdOrderTnum="+a.tnum+";path=/",location.href="/general_api/tcss/index/?#/ConfirmGoodsOrder/tcssGoods"}else t.loading=!1,location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()})},getCookie:function(t){for(var e=document.cookie,a=e.split("; "),i=0;i<a.length;i++){var s=a[i].split("=");if(s[0]==t)return s[1]}return""},godo_my:function(){his.$router.push({name:"personalCenter"})},GetStore:function(t){var e=this,a="/general_api/api/StoreList?city_no="+t+"&"+(new Date).getTime();fetch(a).then(function(t){return t.json()}).then(function(t){if(0==t.code&&t.data&&t.data.length>0){var a=0;t.data[0].cinema_id&&(a=t.data[0].cinema_id),e.cinemaId=a,e.cinemanm=t.data[0].store_name,e.sid=t.data[0].s_id,console.log("set cinemaId default cookie======"+e.cinemaId),x.a.set("cinemaId",e.cinemaId),x.a.set("s_id",t.data[0].store_basic);var i=t.data[0].city+t.data[0].zone+t.data[0].address;e.encodeUnicodeAdd(i),e.encodeUnicodeName(t.data[0].physics_name),e.getGroupList("storeList").then(function(a){console.log("debug promise: sid >>>>> "+t.data[0].store_basic);var i={};i.id=e.firCatId,i.sid=t.data[0].store_basic,e.getGoodsList(i)})}e.loading=!1})},encodeUnicodeAdd:function(t){for(var e=[],a=0;a<t.length;a++)e[a]=("00"+t.charCodeAt(a).toString(16)).slice(-4);x.a.set("storeAdd","\\u"+e.join("\\u"))},encodeUnicodeName:function(t){for(var e=[],a=0;a<t.length;a++)e[a]=("00"+t.charCodeAt(a).toString(16)).slice(-4);x.a.set("storeName","\\u"+e.join("\\u"))},haun_cards:function(t){this.sid=t},goDetails:function(t){this.$router.push({name:"goodsDetails",params:{gid:t[1].id,skuid:t[0].id}})}}),watch:{firCatId:function(){if(console.log("watch_"+this.firCatId+",this.sid="+this.sid),-1!==this.firCatId&&this.sid){var t={};t.id=this.firCatId,t.sid=this.sid,this.getGoodsList(t)}}},components:{cartControl:Ge,shopCart:ze,comboCart:Je,tabBottom:L["a"]}},Xe=Ye,Ze=(a("b877"),Object(l["a"])(Xe,Oe,Ie,!1,null,null,null)),Qe=Ze.exports,ta=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{background:"#EFEFF4",width:"100%",height:"100%"}},[a("div",{staticClass:"store-weui-panel weui-panel weui-panel_access",staticStyle:{"margin-bottom":"2.8rem"}},[a("div",{staticClass:"weui-panel__bd"},[t._l(t.orderDetails,function(e){return a("div",{staticClass:"weui-media-box weui-media-box_appmsg"},[a("div",{staticClass:"weui-media-box__hd"},[a("img",{staticClass:"weui-media-box__thumb",attrs:{src:"http://pe1s.static.pdr365.com/"+e.pic_url,alt:""}})]),a("div",{staticClass:"weui-media-box__bd"},[a("div",{staticClass:"select-goods-info"},[a("div",{staticClass:"select-goods-info-title"},[t._v(t._s(e.goods_name))]),a("div",{staticClass:"select-goods-info-vol"},[t._v(t._s(e.goods_name))]),a("div",{staticClass:"select-goods-info-price"},[a("span",[t._v(t._s(e.pay_amount/100)+"元")])])])]),a("div",{staticClass:"store-goods-cal"},[a("p",[t._v("已售"+t._s(e.id))]),a("div",{staticClass:"select-goods-cal-item"},[t._v("\n                        *"+t._s(e.buy_num)+"\n                        ")])])])}),t._m(0)],2)]),a("section",{staticClass:"myweui-cells weui-cells"},[t._m(1),a("div",{staticClass:"weui-cell myweui-cell cell-height-88"},[t._m(2),a("div",{staticClass:"weui-cell__ft",staticStyle:{color:"#00c203"}},[t._v(t._s(t.data.pay_amount/100)+"元")])])]),"-1"==t.CardData?a("section",{staticClass:"vip-card",staticStyle:{"padding-bottom":"2.8rem"}},[a("div",{staticClass:"weui-cells myweui-cells",on:{click:t.GoKaika}},[t._m(3)])]):t._e(),a("div",{staticClass:"confirm-btn-container",staticStyle:{position:"fixed",bottom:"0","margin-top":"0"}},[a("div",{staticClass:"btn-container"},[a("div",{staticClass:"confirm-btn-total-price"},[a("p",[a("span",[t._v("合计:")]),a("span",{staticStyle:{color:"#00c203"}},[t._v(t._s(t.data.pay_amount/100)+"元")])])]),a("div",{staticClass:"confirm-btn"},[a("a",{staticClass:"weui-btn weui-btn_primary",staticStyle:{"font-size":"0.34rem",color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.godo_goodOrder}},[t._v("确认支付")])])])]),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(4)]):t._e()])},ea=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-media-box weui-media-box_text"},[a("div",{staticClass:"weui-media-box__desc",staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticClass:"store-order-slogan"},[a("i",{staticClass:"iconfont icon-duigou"}),a("span",[t._v("随时退、过期退")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"weui-cell myweui-cell cell-height-88 weui-cell_access",staticStyle:{color:"#2c3e50"},attrs:{href:"javascript:;"}},[a("div",{staticClass:"weui-cell__bd"},[a("p",[t._v("优惠券")])]),a("div",{staticClass:"weui-cell__ft"},[t._v("无可用")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__bd"},[a("p",[t._v("小计")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"weui-cell myweui-cell vip-cell weui-cell_access",attrs:{href:"javascript:;"}},[a("div",{staticClass:"weui-cell__bd"},[a("div"),a("p",{staticClass:"vip-cell-title",staticStyle:{color:"#2c3e50"}},[t._v("影院会员卡")]),a("p",{staticClass:"vip-cell-con"},[t._v("开卡卖品最低"),a("span",[t._v("25元起")])])]),a("div",{staticClass:"weui-cell__ft"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],aa={data:function(){return{tnum:"",tableNum:"",on:"",data:"",orderDetails:"",other:"",tip_msg:"",loading:!0,CardData:""}},beforeRouteEnter:function(t,e,a){document.title="订单结算",a()},mounted:function(){this.tnum=this.$route.params.tnum,this.on=x.a.get("goodsOrderNo"),this.godo_Order(),this.GetAccountCard()},methods:{showTip:function(t,e){var a=this;a.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},e))},godo_Order:function(){var t=this,e=x.a.get("_lac_k_"),a="/general_api/api/auth/ScanOrderDetais?token="+e+"&on="+this.on+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){e.available?(t.data=e.data,t.orderDetails=e.data.items,t.loading=!1):0==e.available&&"user_no_login"==e.messages[0]&&t.showTip("用户未登录")})},GetAccountCard:function(){var t=this;console.log("11");var e="/general_api/api/GetAccountCard?ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){t.CardData=e.obj,t.loading=!1})},godo_goodOrder:function(){var t=this;console.log("11"),t.loading=!0;var e=x.a.get("_lac_k_"),a="/general_api/api/auth/GetWxObj?ct=201101&tnum="+t.tnum+"&token="+e+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){console.log(e),-1==e.code?(t.loading=!1,t.showTip(e.text)):0==e.code?(t.loading=!1,t.other=e.other,t.onBridgeReady()):0==e.available&&"user_no_login"==e.messages[0]&&t.showTip("用户未登录")})},onBridgeReady:function(){var t=this.other;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:"MD5",paySign:t.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg||("get_brand_wcpay_request:cancel"==t.err_msg?alert("您取消了付款"):"get_brand_wcpay_request:fail"==t.err_msg&&alert("支付失败"))})},GoKaika:function(){location.href="/general_api/tcss/index#/purchasingCard/purchasing"}}},ia=aa,sa=(a("26d7"),Object(l["a"])(ia,ta,ea,!1,null,null,null)),na=sa.exports,oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"purchasingcard-mid"},[a("ul",{staticClass:"purchasingcard-mid-ul"},t._l(t.RechargeData,function(e,i){return-1!=t.RechargeData?a("li",{class:t.HId==e.id?"purchasingcard-mid-li-true":"purchasingcard-mid-li",attrs:{"data-index":i},on:{click:function(a){t.godo_choose(e.id,i)}}},[a("p",{class:t.HId==e.id?"purchasingcard-mid-li-price-true":"purchasingcard-mid-li-price",attrs:{"data-index":i}},[t._v("¥"+t._s(e.getpay/100))]),a("p",{class:t.HId==e.id?"purchasingcard-mid-li-introduce-true":"purchasingcard-mid-li-introduce",attrs:{"data-index":i}},[t._v(t._s(e.cr_type_desc))]),t.HId==e.id?a("img",{staticClass:"purchasingcard-mid-li-true-img",attrs:{"data-index":i,src:"http://pe1s.static.pdr365.com/tencent/icon/dot_icon.png"}}):t._e()]):t._e()}))]),t._m(1),a("div",{staticClass:"purchase-box"},[a("div",{staticClass:"purchase",on:{click:t.godo_recharge}},[t._v("立即充值")])]),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(2)]):t._e()])},ca=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchasingcard-top"},[a("p",{staticClass:"purchasingcard-top-title"},[t._v("选择充值金额")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchasingcard-bot"},[a("div",{staticClass:"purchasingcard-bot-title"},[t._v("\n\t\t\t\t支付方式\n\t\t\t")]),a("div",{staticClass:"purchasingcard-bot-pay"},[a("div",[a("img",{attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/wechat_pay_icon.png"}}),a("p",[t._v("微信支付")])]),a("i",{staticClass:"weui-icon-success weui-icon_msg",staticStyle:{"font-size":".4rem","margin-right":".3rem"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],ra={data:function(){return{loading:!1,tip_msg:"",RechargeData:"",id:"",HId:"",Num:"",other:"",sid:""}},beforeRouteEnter:function(t,e,a){document.title="充值会员",a()},created:function(){this.GradeList(),this.Num=this.$route.params.CardNm,this.sid=x.a.get("s_id")},methods:{back:function(){router.go(-1)},showTip:function(t,e){var a=this;a.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},e))},GradeList:function(){var t=this;t.loading=!0;var e=x.a.get("_lac_k_"),a="/general_api/api/CardGradeList?ts="+Date.parse(new Date)+"&token="+e;fetch(a).then(function(t){return t.json()}).then(function(e){t.loading=!1,t.RechargeData=e.obj,t.HId=e.obj[0].id,t.id=e.obj[0].id})},godo_choose:function(t,e){for(var a=this,i=a.RechargeData,s=0;s<i.length;s++)s==e&&(a.HId=i[e].id);a.id=t},godo_recharge:function(){var t=this,e=t.Num,a=t.id;t.loading=!0;var i="/general_api/api/RechargeCard?mc_num="+e+"&h_id="+a+"&sid="+this.sid+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){if(e.available){var a=x.a.get("_lac_k_"),i="/general_api/api/auth/GetWxObj?ct=201101&tnum="+e.obj.data.tnum+"&token="+a+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){console.log(e),-1==e.code?t.showTip(e.text):0==e.code?(t.other=e.other,t.onBridgeReady()):0==e.available&&"user_no_login"==e.messages[0]&&t.showTip("用户未登录")})}else t.loading=!1,t.showTip(e.messages[0])})},onBridgeReady:function(){this.loading=!1;var t=this.other;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:"MD5",paySign:t.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg?location.href="/general_api/tcss/index#/myCards":"get_brand_wcpay_request:cancel"==t.err_msg?this.showTip("您取消了付款"):"get_brand_wcpay_request:fail"==t.err_msg&&this.showTip("支付失败")})}}},la=ra,da=(a("e912"),Object(l["a"])(la,oa,ca,!1,null,"e90b148c",null)),_a=da.exports,ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%",height:"100%","padding-bottom":"60px"}},[a("div",{staticClass:"scan-top"},[a("img",{staticClass:"scan-logo",attrs:{src:"http://pe1s.static.pdr365.com/timg.jpeg"}}),a("div",{staticClass:"scan-content"},[a("select",{staticClass:"scan-content-nm",staticStyle:{background:"#000",border:"none","-webkit-appearance":"none","-moz-appearance":"none","-ms-appearance":"none",appearance:"none"},attrs:{id:"select"},on:{change:t.select_store}},t._l(t.StoreList,function(e){return a("option",{domProps:{value:e.id,selected:t.sid==e.id}},[t._v(t._s(e.store_name))])})),a("p",{staticClass:"scan-content-num"},[t._v("当前桌号："+t._s(t.tableNum))])]),a("div",{staticClass:"scan-personal-center"},[a("p",{on:{click:t.godo_my}},[t._v("个人中心")]),a("div")])]),a("div",{staticClass:"goods"},[a("div",{ref:"menuWrapper",staticClass:"menu-wrapper",staticStyle:{overflow:"auto"}},[a("ul",t._l(t.groupList,function(e,i){return a("li",{key:i,class:i===t.menuCurIndex?"menu-selected":"",on:{click:function(a){t.menuClick(i,e.id,a)}}},[a("p",[t._v(t._s(e.cat_name_cn))])])}))]),a("div",{ref:"goodsWrapper",staticClass:"goods-wrapper",staticStyle:{overflow:"auto"}},[t.groupList.length>0?a("div",{staticClass:"goods-wrapper-title"},[t._v(t._s(t.groupList[t.menuCurIndex].cat_name_cn))]):t._e(),a("ul",[0===t.goodsList.length?a("div",{staticStyle:{"margin-top":"20px","font-size":"20px",width:"100%","text-align":"center"}}):t._e(),t._l(t.goodsList,function(e,i){return a("li",{key:i},[a("div",{staticClass:"goods-item-box"},[a("div",{staticClass:"goods-img"},[null==e[0].stock||"0"==e[0].stock?a("span",{staticStyle:{padding:"2px 4px",background:"#CC6666",position:"absolute",color:"#fff","z-index":"1"}},[t._v("售罄")]):t._e(),a("img",{attrs:{src:"http://pe1s.static.pdr365.com/null"!==e[0].sku_img?e[0].sku_img:"",alt:""}})]),a("div",{staticClass:"goods-item"},[a("div",{staticClass:"goods-item-title"},[a("span",[t._v(t._s(e[1].goods_name))])]),t._l(e[0].skus,function(e,i,s){return a("div",{key:s,staticClass:"goods-item-sku"},[a("span",[t._v(t._s(i)+":")]),a("span",[t._v(t._s(e))])])}),a("div",{staticClass:"goods-item-price"},[a("span",[t._v("¥"+t._s(e[1].goods_price/100))])])],2),a("div",{staticClass:"goods-control"},[a("cartControl",{attrs:{foods:e,stock:e[0].stock}})],1)])])})],2),t.goodsList.length>0?a("div",{staticClass:"bottom-tip"},[t._v("已经是最底了哦～")]):t._e()]),a("comboCart",{directives:[{name:"show",rawName:"v-show",value:t.comboShow,expression:"comboShow"}],attrs:{combo:t.comboData}}),a("shopCart",{directives:[{name:"show",rawName:"v-show",value:!t.comboShow,expression:"!comboShow"}],attrs:{cartList:t.cartList,bottom:t.bottom},on:{"create-order":t.createOrder}})],1),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e()])},ma=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],pa={data:function(){return{tableNum:"",loading:!1,tip_msg:"",choose:!1,GoPay:!1,StoreList:"",menuCurIndex:0,comboData:[],sid:"",bottom:"bottom:0"}},beforeRouteEnter:function(t,e,a){document.title="点餐",a()},computed:Object(F["a"])({},Object(V["mapState"])(["groupList","goodsList","firCatId","cartList","comboShow"])),created:function(){var t=this.$route.params.sid;t?(this.sid=t,x.a.set("s_id",t)):this.sid=x.a.get("s_id"),this.tableNum=this.$route.params.tableNum,document.cookie="tableNum="+this.$route.params.tableNum+";path=/"},mounted:function(){this.GetStoreList()},methods:Object(F["a"])({},Object(V["mapActions"])(["getGoodsList","getGroupList","ToggleComboShow","initFirCatId"]),{_initScroll:function(){},CheckLogin:function(){var t=x.a.get("_lac_ap_");if(t)this.initFirCatId(),this.getGroupList("ScavengingPointMea");else{var e="/general_api/tcss/index#/ScavengingPointMea/"+this.tableNum+"/"+this.sid;e=encodeURIComponent(encodeURIComponent(e)),location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()+"&bu="+e}},menuClick:function(t,e,a){this.menuCurIndex=t;var i={};i.id=e,i.sid=this.sid,console.log(i),this.getGoodsList(i)},goCombo:function(t){this.comboData=t,this.ToggleComboShow()},showTip:function(t,e){var a=this;a.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},e))},createOrder:function(){var t=this,e=x.a.get("_lac_k_");x.a.get("_lac_ated_"),x.a.get("_lac_op_");if(e)t.GoGoodsPay();else{var a=x.a.get("_lac_ap_");a?this.$router.push({name:"login",params:{apid:a}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}},GoGoodsPay:function(){var t=this,e="";t.loading=!0,this.cartList.forEach(function(t,a){var i="";i+=t[1].gt+","+t[1].id+","+t[0].id+",",e+=i.slice(0,i.length-1)+","+t[0].count+",;"});var a=e.slice(0,e.length-1),i=x.a.get("_lac_k_"),s=t.sid;console.log(s+"=cinemaId"),console.log("gs======"+a);var n="/general_api/api/auth/createOrder?dss=150&tbn="+t.tableNum+"&gs="+a+"&sid="+s+"&token="+i+"&ts="+Date.parse(new Date);fetch(n).then(function(t){return t.json()}).then(function(e){if(console.log(e),e.available){t.loading=!1;var a=e.data[0],i=e.data[1];document.cookie="goodsOrderNo="+i[0].order_no+";path=/",document.cookie="goosdOrderTnum="+a.tnum+";path=/",location.href="/general_api/tcss/index/?#/ConfirmGoodsOrder/ScanGoods"}else t.loading=!1})},getCookie:function(t){for(var e=document.cookie,a=e.split("; "),i=0;i<a.length;i++){var s=a[i].split("=");if(s[0]==t)return s[1]}return""},godo_my:function(){var t=x.a.get("_lac_k_");if(t)this.$router.push({name:"personalCenter",params:{st:"scan"}});else{var e=x.a.get("_lac_ap_");e?this.$router.push({name:"login",params:{apid:e}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}},GetStoreList:function(){var t=this,e="/general_api/api/scanStoreList?ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){t.CheckLogin(),e?(t.StoreList=e,t.sid||(t.sid=e[0].id)):t.showTip("获取门店失败")})},select_store:function(t){this.sid=t.target.value;var e={};e.id=this.firCatId,e.sid=this.sid,x.a.set("s_id",e.sid),this.getGoodsList(e)}}),watch:{firCatId:function(){if(console.log("scan order foods="+this.firCatId),-1!==this.firCatId){var t={};t.id=this.firCatId,t.sid=this.sid,this.getGoodsList(t)}}},components:{cartControl:Ge,shopCart:ze,comboCart:Je}},va=pa,ha=(a("7dfb"),Object(l["a"])(va,ua,ma,!1,null,null,null)),ga=ha.exports,fa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{background:"#EFEFF4",width:"100%",height:"100%"}},[a("div",{staticClass:"bg"}),"ScanGoods"==t.ScanGoods?a("div",{staticStyle:{"padding-bottom":"2.8rem"}},[a("div",{staticClass:"confirmGoodsO-top"},[t._v("当前桌号 "),a("span",[t._v(t._s(t.tableNum))])]),a("div",{staticClass:"store-weui-panel weui-panel weui-panel_access",staticStyle:{width:"100%","margin-top":".2rem"}},[a("div",{staticClass:"weui-panel__bd",staticStyle:{"margin-bottom":".2rem"}},[a("p",{staticClass:"alreadyGoods"},[t._v("已点餐品")]),t._l(t.orderDetails,function(e){return a("div",{staticClass:"weui-media weui-media-box_appmsg",staticStyle:{"margin-left":".3rem",padding:".3rem .3rem .3rem 0"}},[a("div",{staticClass:"weui-media-box__hd",staticStyle:{width:"1rem",height:"1rem"}},[a("img",{staticClass:"weui-media-box__thumb",attrs:{src:"http://pe1s.static.pdr365.com/"+e.pic_url,alt:""}})]),a("div",{staticClass:"weui-media-box__bd",staticStyle:{"text-align":"left"}},[a("div",{staticClass:"select-goods-info"},[a("div",{staticClass:"select-goods-info-title",staticStyle:{"font-size":".28rem","font-weight":"bold"}},[t._v(t._s(e.goods_name))]),a("div",{staticClass:"select-goods-info-vol",staticStyle:{"font-size":".2rem",color:"#8D9398"}},[t._v(t._s(e.goods_name))]),a("div",{staticClass:"select-goods-info-price",staticStyle:{"margin-top":".1rem"}},[a("span",{staticStyle:{"font-size":".24rem",color:"#FF6231","font-weight":"bold"}},[t._v("x "+t._s(e.buy_num))])])])]),a("div",{staticClass:"store-goods-cal"},[a("p",{staticStyle:{"font-size":".28rem",color:"#000","font-weight":"bold"}},[t._v("¥"+t._s(e.unit_amount/100))])])])}),a("p",{staticClass:"xiaoji"},[t._v("总价 "),a("span",[t._v(" ¥"+t._s(t.data.total_amount/100))])])],2)]),a("div",{staticClass:"remark-box"},[a("span",[t._v("备注")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.o_rem,expression:"o_rem"}],attrs:{type:"text",placeholder:"口味、偏好等要求"},domProps:{value:t.o_rem},on:{input:function(e){e.target.composing||(t.o_rem=e.target.value)}}})]),a("section",{staticClass:"myweui-cells weui-cells"},[a("a",{staticClass:"weui-cell myweui-cell cell-height-88 weui-cell_access",staticStyle:{color:"#2c3e50"},attrs:{href:"javascript:;"},on:{click:t.goCoupons}},[t._m(0),t.o_c_1000?a("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":".3rem"}},[t._v(t._s(t.o_c_1000.batch_title))]):a("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":".3rem"}},[t._v("点击选择")])])]),t.CardData?a("section",{staticClass:"myweui-cells weui-cells_checkbox",staticStyle:{"margin-top":".3rem"}},[t.CardData?a("label",{staticClass:"weui-cell myweui-cell cell-height-88 weui-check__label",staticStyle:{background:"#fff"},attrs:{for:"x10"},on:{click:function(e){e.preventDefault(),t.changePrice("101001")}}},[a("div",{staticClass:"weui-cell__bd"},[a("p",{staticStyle:{"font-size":"15px"}},[t._v("会员余额支付（余额："+t._s(t.CardData[0].balance/100)+"元）")])]),a("div",{staticClass:"weui-cell__ft"},[a("input",{staticClass:"weui-check",attrs:{type:"radio",name:"radio1",id:"x10"},domProps:{checked:"101001"===t.pay_methods}}),a("span",{staticClass:"weui-icon-checked",staticStyle:{transform:"scale(.8)"}})])]):t._e(),a("label",{staticClass:"weui-cell myweui-cell cell-height-88 weui-check__label",staticStyle:{background:"#fff"},attrs:{for:"x20"},on:{click:function(e){e.preventDefault(),t.changePrice("201101")}}},[t._m(2),a("div",{staticClass:"weui-cell__ft"},[a("input",{staticClass:"weui-check",attrs:{type:"radio",name:"radio1",id:"x20"},domProps:{checked:"201101"===t.pay_methods}}),a("span",{staticClass:"weui-icon-checked",staticStyle:{transform:"scale(.8)"}})])])]):a("section",{staticClass:"vip-card"},[a("div",{staticClass:"weui-cells myweui-cells",on:{click:t.GoKaika}},[a("a",{staticClass:"weui-cell myweui-cell vip-cell weui-cell_access",attrs:{href:"javascript:;"}},[a("div",{staticClass:"weui-cell__bd"},[a("div"),a("p",{staticClass:"vip-cell-title",staticStyle:{color:"#2c3e50"}},[t._v(t._s(t.logo.proj_name)+"会员卡")]),t._m(1)]),a("div",{staticClass:"weui-cell__ft"})])])]),a("div",{staticClass:"make-order-container clear",staticStyle:{bottom:"0px","border-top":"1px solid #e5e9ec"}},[a("div",{staticClass:"make-order-left"},[t._m(3),a("div",{staticClass:"make-order-total-price",staticStyle:{"font-size":".4rem","font-weight":"bold",color:"#000","margin-left":".2rem"}},[t._v("¥ "+t._s(t.data.pay_amount/100))])]),a("div",{staticClass:"make-order-btn",staticStyle:{"font-size":".28rem","font-weight":"bold"},on:{click:t.godo_ScangoodOrder}},[t._v("确认并支付")])])]):t._e(),"tcssGoods"==t.ScanGoods?a("div",{staticStyle:{"padding-bottom":"2.8rem"}},[a("div",{staticClass:"store-weui-panel weui-panel weui-panel_access"},[a("div",{staticClass:"weui-panel__bd"},[t._l(t.orderDetails,function(e){return a("div",{staticClass:"weui-media-box weui-media-box_appmsg"},[a("div",{staticClass:"weui-media-box__hd"},[a("img",{staticClass:"weui-media-box__thumb",attrs:{src:"http://pe1s.static.pdr365.com/"+e.pic_url,alt:""}})]),a("div",{staticClass:"weui-media-box__bd"},[a("div",{staticClass:"select-goods-info"},[a("div",{staticClass:"select-goods-info-title"},[t._v(t._s(e.goods_name))]),a("div",{staticClass:"select-goods-info-vol"},[t._v(t._s(e.goods_name))]),a("div",{staticClass:"select-goods-info-price"},[a("span",[t._v(t._s(e.pay_amount/100)+"元")])])])]),a("div",{staticClass:"store-goods-cal"},[a("p",[t._v("已售"+t._s(e.id))]),a("div",{staticClass:"select-goods-cal-item"},[t._v("\n                            *"+t._s(e.buy_num)+"\n                            ")])])])}),t._m(4)],2)]),a("section",{staticClass:"myweui-cells weui-cells"},[a("a",{staticClass:"weui-cell myweui-cell cell-height-88 weui-cell_access",staticStyle:{color:"#2c3e50"},attrs:{href:"javascript:;"},on:{click:t.goCoupons}},[t._m(5),t.o_c_1000?a("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":".3rem"}},[t._v(t._s(t.o_c_1000.batch_title))]):a("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":".3rem"}},[t._v("点击选择")])]),a("div",{staticClass:"weui-cell myweui-cell cell-height-88"},[t._m(6),a("div",{staticClass:"weui-cell__ft",staticStyle:{color:"#00c203"}},[t._v(t._s(t.data.total_amount/100)+"元")])])]),t.CardData?t._e():a("section",{staticClass:"vip-card"},[a("div",{staticClass:"weui-cells myweui-cells",on:{click:t.GoKaika}},[a("a",{staticClass:"weui-cell myweui-cell vip-cell weui-cell_access",attrs:{href:"javascript:;"}},[a("div",{staticClass:"weui-cell__bd"},[a("div"),a("p",{staticClass:"vip-cell-title",staticStyle:{color:"#2c3e50"}},[t._v(t._s(t.logo.proj_name)+"会员卡")]),t._m(7)]),a("div",{staticClass:"weui-cell__ft"})])])]),a("section",{staticClass:"myweui-cells weui-cells_checkbox",staticStyle:{"margin-top":".3rem"}},[t.CardData?a("label",{staticClass:"weui-cell myweui-cell cell-height-88 weui-check__label",staticStyle:{background:"#fff"},attrs:{for:"x10"},on:{click:function(e){e.preventDefault(),t.changePrice("101001")}}},[a("div",{staticClass:"weui-cell__bd"},[a("p",{staticStyle:{"font-size":"15px"}},[t._v("会员余额支付（余额："+t._s(t.CardData[0].balance/100)+"元）")])]),a("div",{staticClass:"weui-cell__ft"},[a("input",{staticClass:"weui-check",attrs:{type:"radio",name:"radio1",id:"x10"},domProps:{checked:"101001"===t.pay_methods}}),a("span",{staticClass:"weui-icon-checked",staticStyle:{transform:"scale(.8)"}})])]):t._e(),a("label",{staticClass:"weui-cell myweui-cell cell-height-88 weui-check__label",staticStyle:{background:"#fff"},attrs:{for:"x20"},on:{click:function(e){e.preventDefault(),t.changePrice("201101")}}},[t._m(8),a("div",{staticClass:"weui-cell__ft"},[a("input",{staticClass:"weui-check",attrs:{type:"radio",name:"radio1",id:"x20"},domProps:{checked:"201101"===t.pay_methods}}),a("span",{staticClass:"weui-icon-checked",staticStyle:{transform:"scale(.8)"}})])])]),a("div",{staticClass:"confirm-btn-container",staticStyle:{position:"fixed",bottom:"0","margin-top":"0","z-index":"98"}},[a("div",{staticClass:"btn-container"},[a("div",{staticClass:"confirm-btn-total-price",on:{click:t.isShow}},[a("p",[a("span",[t._v("合计:")]),a("span",{staticStyle:{color:"#00c203"}},[t._v(t._s(t.data.pay_amount/100)+"元")]),a("span",{staticClass:"iconfont icon-triangle-up",class:t.trangle?"trangle-down":"trangle-up",staticStyle:{"font-size":".26rem",color:"#BCBEC1"}})])]),a("div",{staticClass:"confirm-btn"},[a("a",{staticClass:"weui-btn weui-btn_primary",staticStyle:{"font-size":"0.34rem",color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.godo_goodOrder}},[t._v("确认支付")])])]),a("div",{staticClass:"order-details-card",staticStyle:{display:"none"}},[a("div",{staticClass:"order-details-card-title"},[a("p",[t._v("结算明细")]),a("div",{staticClass:"cancel-card-show",on:{click:t.isShow}},[t._v("取消")])]),a("div",{staticClass:"order-details-card-con"},[t._m(9),a("div",{staticClass:"card-con-item"},[t._l(t.data.items,function(e,i){return a("p",{key:i,staticClass:"color-a9"},[a("span",[t._v(t._s(e.goods_name))]),a("span",[t._v(t._s(e.unit_amount/100)+"元 X "+t._s(e.buy_num))])])}),t.offer_show?a("p",{staticClass:"color-a9"},[a("span",[t._v("优惠券")]),a("span",[t._v("减："+t._s(t.offer_amount)+"元")])]):t._e()],2)])])])]):t._e(),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask",staticStyle:{"z-index":"100"}}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),a("div",{staticClass:"weui-mask",staticStyle:{display:"none","z-index":"88"},attrs:{id:"iosMask"},on:{click:t.isShow}}),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(10)]):t._e(),t.Pwd_tip?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog1"}},[a("div",{staticClass:"weui-mask",staticStyle:{"z-index":"100"}}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v("请输入会员卡密码")]),a("div",{staticClass:"weui-dialog__bd nified"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.Pwd,expression:"Pwd"}],staticStyle:{border:"1px solid #ccc",width:"70%",height:".6rem","margin-bottom":".3rem"},attrs:{type:"password",name:""},domProps:{value:t.Pwd},on:{input:function(e){e.target.composing||(t.Pwd=e.target.value)}}})]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:t.PwdTip}},[t._v("取消")]),a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:t.setPwd}},[t._v("确定")])])])]):t._e()])},Ca=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__bd"},[a("p",[t._v("优惠券")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"vip-cell-con"},[t._v("开卡卖品最低"),a("span",[t._v("25元起")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__bd"},[a("p",{staticStyle:{"font-size":"15px"}},[t._v("微信支付")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative",width:"0.96rem",height:"0.5rem","text-align":"center"}},[a("i",{staticClass:"iconfont icon-ai66",staticStyle:{"font-size":".5rem",color:"#00c203","line-height":".96rem"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-media-box weui-media-box_text"},[a("div",{staticClass:"weui-media-box__desc",staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticClass:"store-order-slogan"},[a("i",{staticClass:"iconfont icon-duigou"}),a("span",[t._v("随时退、过期退")])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__bd"},[a("p",[t._v("优惠券")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__bd"},[a("p",[t._v("总价")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"vip-cell-con"},[t._v("开卡卖品最低"),a("span",[t._v("25元起")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__bd"},[a("p",{staticStyle:{"font-size":"15px"}},[t._v("微信支付")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-con-title"},[a("span",[t._v("商品")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],wa={data:function(){return{Pwd_tip:!1,tnum:"",tableNum:"",on:"",data:"",orderDetails:"",other:"",tip_msg:"",loading:!0,CardData:"",Pwd:"",ScanGoods:"",order_no:"",o_c_1000:"",offer_amount:"",trangle:!1,offer_show:!1,o_rem:"",pay_methods:"101001"}},beforeRouteEnter:function(t,e,a){document.title="订单结算",a()},computed:Object(F["a"])({},Object(V["mapState"])(["logo"])),created:function(){var t=sessionStorage.getItem("o_c_1000");t&&(this.o_c_1000=JSON.parse(t))},mounted:function(){this.ScanGoods=this.$route.params.Goods,this.on=x.a.get("goodsOrderNo"),this.tnum=x.a.get("goosdOrderTnum"),this.tableNum=x.a.get("tableNum"),this.godo_Order(),this.GetAccountCard()},methods:Object(F["a"])({},Object(V["mapActions"])(["ClearCart"]),{showTip:function(t,e){var a=this;a.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},e))},godo_Order:function(){var t=this,e=this,a=x.a.get("_lac_k_"),i=e.o_c_1000.id||"",s="/general_api/api/auth/ScanOrderDetais?token="+a+"&on="+this.on+"&coupon_id="+i+"&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(a){a.available?(e.loading=!1,e.data=a.data,e.order_no=a.data.order_no,e.orderDetails=a.data.items,null===a.pref_coupon?sessionStorage.removeItem("o_c_1000"):""===a.pref_coupon?(weui.topTips("当前优惠券无法使用",5e3),sessionStorage.removeItem("o_c_1000"),t.o_c_1000=""):(e.offer_amount=a.pref_coupon.prep_amount/100,e.offer_show=!0)):0==a.available&&"user_no_login"==a.messages[0]?(e.loading=!1,e.showTip("用户未登录")):(e.showTip(a.messages[0]),e.loading=!1)})},GetAccountCard:function(){var t=this,e=this,a=x.a.get("_lac_k_"),i="/general_api/api/auth/GetAccountCard?token="+a+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(a){a.available&&(e.CardData=a.obj,a.obj&&t.changePrice("101001")),e.loading=!1})},PwdTip:function(){var t=this;t.Pwd_tip=!1},godo_ScangoodOrder:function(){var t=this,e=this;e.loading=!0;var a=e.tnum,i=x.a.get("_lac_k_");if("-1"!=e.CardData&&e.CardData)if(document.getElementById("x20").checked){var s=e.o_c_1000.id||"",n=e.o_rem;n||(n=""),n=encodeURIComponent(encodeURIComponent(n));r="/general_api/api/auth/GetWxObj?ct=201101&token="+i+"&o_rem="+n+"&coupon_id="+s+"&tnum="+a+"&ts="+Date.parse(new Date);fetch(r).then(function(t){return t.json()}).then(function(t){console.log(t),-1==t.code?(e.loading=!1,e.showTip(t.text)):0==t.code?(e.loading=!1,e.other=t.other,e.onBridgeReady()):0==t.available&&"user_no_login"==t.messages[0]&&e.showTip("用户未登录")})}else e.loading=!1,e.Pwd_tip=!0;else{var o=e.o_c_1000.id||"",c=e.o_rem;c||(c=""),c=encodeURIComponent(encodeURIComponent(c));var r="/general_api/api/auth/GetWxObj?ct=201101&tnum="+a+"&coupon_id="+o+"&token="+i+"&o_rem="+c+"&ts="+Date.parse(new Date);fetch(r).then(function(t){return t.json()}).then(function(a){console.log(a),-1==a.code?(e.loading=!1,e.showTip(a.text)):0==a.code?(e.loading=!1,e.other=a.other,e.onBridgeReady(),t.ClearCart()):0==a.available&&"user_no_login"==a.messages[0]&&(e.loading=!1,e.showTip("用户未登录"))})}},setPwd:function(){var t=this,e=x.a.get("_lac_k_"),a=t.tnum,i=t.o_c_1000.id||"",s=t.o_rem;s||(s=""),s=encodeURIComponent(encodeURIComponent(s));var n="/general_api/api/auth/GetWxObj?ct=101001&token="+e+"&o_rem="+s+"&coupon_id="+i+"&tnum="+a+"&pwd="+t.Pwd+"&unicode="+t.CardData[0].mc_num+"&ts="+Date.parse(new Date);t.loading=!0,t.Pwd_tip=!1,fetch(n).then(function(t){return t.json()}).then(function(e){t.loading=!1,"-1"==e.code?(t.loading=!1,t.Pwd_tip=!1,t.showTip(e.text),t.Pwd=""):"0"==e.code?(t.loading=!1,t.Pwd_tip=!1,t.showTip("支付成功"),t.Pwd="",setTimeout(function(){"tcssGoods"==t.ScanGoods?location.href="/general_api/tcss/index#/myTicket":location.href="/general_api/tcss/index#/ScanGoodsOrder/"+t.on+"/"+t.tableNum},100)):0==e.available&&"user_no_login"==e.messages[0]?(t.Pwd_tip=!1,t.Pwd="",t.showTip("用户未登录")):0==e.available&&"trade_status_invalid"==e.messages[0]&&(t.Pwd_tip=!1,t.Pwd="",t.showTip("请勿重复支付"))})},godo_goodOrder:function(){var t=this,e=this;e.loading=!0;var a=e.tnum,i=x.a.get("_lac_k_");if("-1"!=e.CardData&&e.CardData)if(document.getElementById("x20").checked){var s=e.o_c_1000.id||"";o="/general_api/api/auth/GetWxObj?ct=201101&token="+i+"&tnum="+a+"&coupon_id="+s+"&ts="+Date.parse(new Date);fetch(o).then(function(t){return t.json()}).then(function(t){console.log(t),-1==t.code?(e.loading=!1,e.showTip(t.text)):0==t.code?(e.loading=!1,e.other=t.other,e.onBridgeReady()):0==t.available&&"user_no_login"==t.messages[0]&&e.showTip("用户未登录")})}else e.loading=!1,e.Pwd_tip=!0;else{var n=e.o_c_1000.id||"",o="/general_api/api/auth/GetWxObj?ct=201101&tnum="+a+"&coupon_id="+n+"&token="+i+"&ts="+Date.parse(new Date);fetch(o).then(function(t){return t.json()}).then(function(a){console.log(a),-1==a.code?(e.loading=!1,e.showTip(a.text)):0==a.code?(e.loading=!1,e.other=a.other,e.onBridgeReady(),t.ClearCart()):0==a.available&&"user_no_login"==a.messages[0]&&(e.loading=!1,e.showTip("用户未登录"))})}},onBridgeReady:function(){var t=this,e=t.other;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:"MD5",paySign:e.paySign},function(e){"get_brand_wcpay_request:ok"==e.err_msg?"tcssGoods"==t.ScanGoods?location.href="/general_api/tcss/index#/myTicket":location.href="/general_api/tcss/index#/ScanGoodsOrder/"+t.on+"/"+t.tableNum:"get_brand_wcpay_request:cancel"==e.err_msg?alert("您取消了付款"):"get_brand_wcpay_request:fail"==e.err_msg&&alert("支付失败")})},GoKaika:function(){location.href="/general_api/tcss/index/?#/purchasingCard/purchasing"},isShow:function(){this.trangle=!this.trangle;var t=$("#iosMask"),e=$(".order-details-card");this.trangle?(t.fadeIn(200),e.slideDown(400)):(t.fadeOut(200),e.slideUp(400))},goCoupons:function(){var t=this.order_no,e=this.ScanGoods;this.$router.push({name:"couponsForGoods",params:{order_no:t,Goods:e}})},changePrice:function(t){var e=this;this.loading=!0,this.pay_methods=t;var a="101001"===t?this.CardData[0].card_code:"",i=this.o_c_1000.id?this.o_c_1000.id+","+this.o_c_1000.crapp:"",s=x.a.get("_lac_k_"),n="/general_api/api/auth/change_price_goods?tnum="+this.tnum+"&order_no="+this.on+"&ct="+t+"&unicode="+a+"&coupons="+i+"&token="+s+"&ts="+Date.parse(new Date);fetch(n).then(function(t){return t.json()}).then(function(t){e.loading=!1,t.available&&(e.data=t.data,e.orderDetails=t.data.items)}).catch(function(t){e.loading=!1})}})},ba=wa,ya=(a("ba94"),Object(l["a"])(ba,fa,Ca,!1,null,null,null)),ka=ya.exports,xa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"bg"}),t._m(0),a("div",{staticClass:"confirmGoodsO-top"},[t._v("当前桌号 "),a("span",[t._v(t._s(t.tableNum))])]),a("div",{staticClass:"store-weui-panel weui-panel weui-panel_access",staticStyle:{width:"100%","margin-top":".2rem"}},[a("div",{staticClass:"weui-panel__bd",staticStyle:{"margin-bottom":".2rem"}},[a("p",{staticClass:"alreadyGoods"},[t._v("已点餐品")]),t._l(t.orderDetails,function(e){return a("div",{staticClass:"weui-media weui-media-box_appmsg",staticStyle:{"margin-left":".3rem",padding:".3rem .3rem .3rem 0"}},[a("div",{staticClass:"weui-media-box__hd",staticStyle:{width:"1rem",height:"1rem"}},[a("img",{staticClass:"weui-media-box__thumb",attrs:{src:"http://pe1s.static.pdr365.com/"+e.pic_url,alt:""}})]),a("div",{staticClass:"weui-media-box__bd",staticStyle:{"text-align":"left"}},[a("div",{staticClass:"select-goods-info"},[a("div",{staticClass:"select-goods-info-title",staticStyle:{"font-size":".28rem","font-weight":"bold"}},[t._v(t._s(e.goods_name))]),a("div",{staticClass:"select-goods-info-vol",staticStyle:{"font-size":".2rem",color:"#8D9398"}},[t._v(t._s(e.goods_name))]),a("div",{staticClass:"select-goods-info-price",staticStyle:{"margin-top":".1rem"}},[a("span",{staticStyle:{"font-size":".24rem",color:"#FF6231","font-weight":"bold"}},[t._v("x "+t._s(e.buy_num))])])])]),a("div",{staticClass:"store-goods-cal"},[a("p",{staticStyle:{"font-size":".28rem",color:"#000","font-weight":"bold"}},[t._v("¥"+t._s(e.unit_amount/100))])])])}),a("p",{staticClass:"xiaoji"},[t._v("小计 "),a("span",[t._v(" ¥"+t._s(t.data.pay_amount/100))])])],2)]),t._m(1)])},Sa=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ScanOrder-top"},[a("img",{staticStyle:{width:"100%",height:"auto"},attrs:{src:"http://pe1s.static.pdr365.com/1535373165177.jpg"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"erCode"},[a("img",{attrs:{src:"http://pe1s.static.pdr365.com/WechatIMG7459.jpeg"}}),a("p",[t._v('关注"好时光部落"公众号领取更多优惠')])])}],Da={data:function(){return{tableNum:"",orderDetails:"",data:"",on:""}},computed:{count:function(){return 0}},mounted:function(){this.tableNum=this.$route.params.tableNum,this.on=this.$route.params.on,this.godo_Order()},methods:{godo_Order:function(){var t=this,e=x.a.get("_lac_k_"),a="/general_api/api/auth/ScanOrderDetais?token="+e+"&on="+t.on+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){e.available&&(t.data=e.data,t.orderDetails=e.data.items)})}}},Ta=Da,Ea=(a("71e3"),Object(l["a"])(Ta,xa,Sa,!1,null,null,null)),ja=Ea.exports,Oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"login-mid"},[a("form",{staticClass:"form-wrapper",attrs:{autocomplete:"off",method:"POST",id:"login-formWrapper"}},[a("div",{staticClass:"login-mid-form"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.UserPhone,expression:"UserPhone"}],staticClass:"text-input",attrs:{type:"text",name:"username",maxlength:"60",placeholder:"请输入手机号",value:"",id:"mobile"},domProps:{value:t.UserPhone},on:{input:function(e){e.target.composing||(t.UserPhone=e.target.value)}}})]),a("div",{staticClass:"login-mid-form login-mid-form-code"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.ValidateCode,expression:"ValidateCode"}],staticClass:"text-input-code",staticStyle:{"margin-left":"0"},attrs:{type:"number",id:"img_validate_code",name:"verifycode",value:"",placeholder:"请输入验证码",autocomplete:"off",maxlength:"6"},domProps:{value:t.ValidateCode},on:{input:function(e){e.target.composing||(t.ValidateCode=e.target.value)}}}),a("Button",{staticStyle:{float:"right",display:"inline-block","margin-top":".3rem",border:"none","font-size":"0.28rem"},on:{click:t.godo_code}},[t._v(t._s(t.time))])],1),a("div",{staticClass:"login-box"},[a("div",{staticClass:"login",on:{click:t.godo_login}},[t._v("登录")])])])]),t._m(1),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v(t._s(t.loading))])])]):t._e(),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e()])},Ia=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-top"},[a("img",{staticClass:"login-top-logo",attrs:{src:"http://pe1s.static.pdr365.com/timg.jpeg"}}),a("p",{staticClass:"login-top-title"},[t._v("欢迎来到腾讯好时光")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"login-hint"},[t._v("点击登录，即代表已阅读并同意"),a("span",[t._v("《好时光影院相关条例》")])])}],La={data:function(){return{loading:"",login:!1,tip_msg:"",UserPhone:"",ValidateCode:"",time:"获取验证码",num:"",apid:""}},beforeRouteEnter:function(t,e,a){document.title="腾讯好时光",a()},created:function(){this.apid=this.$route.params.apid},methods:{back:function(){router.go(-1)},showTip:function(t,e){var a=this;a.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},e))},showlogin:function(t,e){var a=this;a.loading=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.loading=""},e))},godo_code:function(){var t=this,e=t.UserPhone,a=/^[1][3,4,5,7,8,9][0-9]{9}$/;if(a.test(e)){t.showlogin("正在发送验证码",1e3);var i="/general_api/api/MessageCode?p="+e+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){e.available&&(t.loading=!1)}),t.num=3e5,t.daojishi(t.num)}else t.showTip("请输入正确的手机号")},daojishi:function(t){var e=this;if(0!=e.num){var a=t/1e3;e.time=a+" S",e.num=t,setTimeout(function(){t-=1e3,e.daojishi(t)},1e3)}else{var i="发送验证码";e.time=i}},godo_login:function(){var t=this,e=t.UserPhone,a=t.ValidateCode,i=t.apid,s="/general_api/api/Login?p="+e+"&code="+a+"&apid="+i+"&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(e){e.available?(document.cookie="_lac_k_="+e.data,location.href="/general_api/tcss/index#/purchasingCard/Scanpurchasing"):t.showTip(e.messages[0])}),t.login=!1}}},$a=La,Pa=(a("2cc3"),Object(l["a"])($a,Oa,Ia,!1,null,null,null)),Ma=Pa.exports,Ra=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"text-align":"center"}},[t._m(0),a("div",{staticClass:"purchasingcard-mid"},[a("ul",{staticClass:"purchasingcard-mid-ul"},t._l(t.RechargeData,function(e,i){return-1!=t.RechargeData?a("li",{class:t.HId==e.id?"purchasingcard-mid-li-true":"purchasingcard-mid-li",on:{click:function(a){t.godo_choose(e.id,i)}}},[a("p",{class:t.HId==e.id?"purchasingcard-mid-li-grade-true":"purchasingcard-mid-li-grade"},[t._v(t._s(e.h_name))]),a("p",{class:t.HId==e.id?"purchasingcard-mid-li-introduce-true":"purchasingcard-mid-li-introduce"},[t._v(t._s(e.cr_type_desc))]),a("p",{class:t.HId==e.id?"purchasingcard-mid-li-price-true":"purchasingcard-mid-li-price"},[t._v("¥"+t._s(e.getpay/100))]),t.HId==e.id?a("img",{staticClass:"purchasingcard-mid-li-true-img",attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/dot_icon.png"}}):t._e()]):t._e()}))]),a("div",{staticClass:"PurchasingCard-box"},[a("div",{staticClass:"PurchasingCard",on:{click:t.SshowNum}},[a("span",{staticClass:"PurchasingTitle"},[t._v("设置支付密码")]),a("span",{staticClass:"PurchasingHint"},[t._v("密码用于消费操作时，验证您的身份")]),""!=t.pwd?a("span",{staticClass:"shezhi"},[t._v("已设置")]):t._e(),a("div",{staticClass:"vertical2"})])]),t._m(1),a("div",{staticClass:"purchase-box"},[a("div",{staticClass:"purchase",on:{click:t.godo_recharge}},[t._v("立即开通")])]),t.one?a("div",{staticClass:"purchasing-num-box"},[a("div",{staticClass:"purchasing-num-bgc",on:{click:function(e){t.one=!1}}}),a("div",{staticClass:"purchasing-num"},[a("div",{staticClass:"purchasing-num-top"},[a("img",{staticStyle:{float:"left",display:"inline-block",width:".4rem","margin-left":".2rem","margin-top":".15rem"},attrs:{src:"http://pe1s.static.pdr365.com/chahao.png"},on:{click:function(e){t.one=!1}}}),a("p",[t._v("设置会员卡支付密码")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.Ticket_one,expression:"Ticket_one"}],staticClass:"purchasing-num-input",attrs:{type:"num",placeholder:"请输入6位数字密码",readonly:"readonly",maxlength:"6",clearable:""},domProps:{value:t.Ticket_one},on:{input:function(e){e.target.composing||(t.Ticket_one=e.target.value)}}}),a("p",{staticClass:"purchasing-num-p"},[t._v("支付密码用于支付操作时，验证您的身份")]),a("div",{staticClass:"keyboard",staticStyle:{background:"#fff"},on:{click:function(e){return e.stopPropagation(),t.TicketKeyPress(e)}}},[t._m(2),t._m(3),t._m(4),t._m(5)])])]):t._e(),t.two?a("div",{staticClass:"purchasing-num-box"},[a("div",{staticClass:"purchasing-num-bgc",on:{click:function(e){t.two=!1}}}),a("div",{staticClass:"purchasing-num"},[a("div",{staticClass:"purchasing-num-top"},[a("img",{staticStyle:{float:"left",display:"inline-block",width:".4rem","margin-left":".2rem","margin-top":".15rem"},attrs:{src:"http://pe1s.static.pdr365.com/chahao.png"},on:{click:function(e){t.two=!1}}}),a("p",[t._v("确认会员卡支付密码")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.Ticket_two,expression:"Ticket_two"}],staticClass:"purchasing-num-input",attrs:{type:"num",placeholder:"请输入6位数字密码",readonly:"readonly",maxlength:"6",clearable:""},domProps:{value:t.Ticket_two},on:{input:function(e){e.target.composing||(t.Ticket_two=e.target.value)}}}),a("p",{staticClass:"purchasing-num-p"},[t._v("请在此输入您的支付密码")]),a("div",{staticClass:"keyboard",staticStyle:{background:"#fff"},on:{click:function(e){return e.stopPropagation(),t.TicketTwo(e)}}},[t._m(6),t._m(7),t._m(8),t._m(9)])])]):t._e(),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v(t._s(t.loading))])])]):t._e()])},Ga=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchasingcard-top"},[a("p",{staticClass:"purchasingcard-top-title"},[t._v("选择等级")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"purchasingcard-bot"},[a("div",{staticClass:"purchasingcard-bot-title"},[t._v("\n\t\t\t\t支付方式\n\t\t\t")]),a("div",{staticClass:"purchasingcard-bot-pay"},[a("div",[a("img",{attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/wechat_pay_icon.png"}}),a("p",[t._v("微信支付")])]),a("i",{staticClass:"weui-icon-success weui-icon_msg",staticStyle:{"font-size":".4rem","margin-right":".3rem"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-row"},[a("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"1"}},[t._v("1")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"2"}},[t._v("2")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"3"}},[t._v("3")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-row"},[a("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"4"}},[t._v("4")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"5"}},[t._v("5")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"6"}},[t._v("6")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-row"},[a("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"7"}},[t._v("7")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"8"}},[t._v("8")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"9"}},[t._v("9")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-row"},[a("div",{staticClass:"numInput key-cell",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"D"}},[t._v("删除")]),a("div",{staticClass:"numInput key-cell",attrs:{"data-num":"0"}},[t._v("0")]),a("div",{staticClass:"numInput key-confirm",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"S"}},[t._v("确认")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-row"},[a("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"1"}},[t._v("1")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"2"}},[t._v("2")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"3"}},[t._v("3")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-row"},[a("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"4"}},[t._v("4")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"5"}},[t._v("5")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"6"}},[t._v("6")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-row"},[a("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"7"}},[t._v("7")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"8"}},[t._v("8")]),a("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"9"}},[t._v("9")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"key-row"},[a("div",{staticClass:"numInput key-cell",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"D"}},[t._v("删除")]),a("div",{staticClass:"numInput key-cell",attrs:{"data-num":"0"}},[t._v("0")]),a("div",{staticClass:"numInput key-confirm",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"S"}},[t._v("确认")])])}],Na={data:function(){return{loading:"",tip_msg:"",synopsis:"synopsis-none",showBtn:"showBtn",RechargeData:"",id:"",HId:"",Num:"",Ticket_one:"",Ticket_two:"",pwd:"",S:"",one:!1,two:!1,other:"",sid:""}},beforeRouteEnter:function(t,e,a){document.title="购买会员",a()},created:function(){this.GradeList(),this.sid=Cookies.get("s_id")},methods:{SshowNum:function(){this.one=!0},showTip:function(t,e){var a=this;a.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},e))},showlogin:function(t,e){var a=this;a.loading=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.loading=""},e))},back:function(){router.go(-1)},GradeList:function(){var t=this,e="/general_api/api/CardGradeList?ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){t.RechargeData=e.obj,t.HId=e.obj[0].id,t.showlogin("正在加载~",100)})},godo_choose:function(t,e){for(var a=this,i=a.RechargeData,s=0;s<i.length;s++)s==e&&(a.HId=i[e].id);a.id=t},godo_recharge:function(){var t=this,e=this;e.showlogin("请稍等~",1300);var a=e.pwd,i=e.HId;if(""!=a){var s="/general_api/api/createCardRechargeOrder?mc_pwd="+a+"&h_id="+i+"&sid="+this.sid+"&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(a){if(console.log(a),a.available){console.log(a),e.showlogin("创建成功~",1300);var i="/general_api/api/GetWxObj?ct=201101&tnum="+a.obj.data.tnum;fetch(i).then(function(t){return t.json()}).then(function(a){console.log(a),-1==a.code?t.showTip(a.text):0==a.code&&(e.other=a.other,e.onBridgeReady())})}else t.showTip(a.messages[0])})}else this.showTip("请设置6位数的密码~",1e3)},onBridgeReady:function(){var t=this.other;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:"MD5",paySign:t.paySign},function(t){"get_brand_wcpay_request:ok"==t.err_msg?console.log("支付成功"):"get_brand_wcpay_request:cancel"==t.err_msg?console.log("支付过程中用户取消"):"get_brand_wcpay_request:fail"==t.err_msg&&console.log("支付失败")})},TicketKeyPress:function(t){var e=t.target.dataset.num;if(-1==e)return!1;switch(String(e)){case".":this.TicketDecimalPoint();break;case"D":this.TicketDeleteKey();break;case"C":this.TicketClearKey();break;case"S":this.TicketConfirmKey();break;default:this.TicketNumberKey(e);break}},TicketDecimalPoint:function(){if(this.Ticket_one.indexOf(".")>-1)return!1;this.Ticket_one.length?this.Ticket_one=this.Ticket_one+".":this.Ticket_one="0."},TicketDeleteKey:function(){var t=this.Ticket_one;if(!t.length)return!1;this.Ticket_one=t.substring(0,t.length-1)},TicketClearKey:function(){this.Ticket_one=""},TicketConfirmKey:function(){var t=this.Ticket_one;if(!t.length)return this.showTip("您目前未输入~",1e3),!1;6==t.length?(this.pwd=t,this.one=!1,this.two=!0):this.showTip("请设置6位数的密码~",1e3)},TicketNumberKey:function(t){console.log("aaa");var e=this.Ticket_one;if(e.length<6){if(e.indexOf(".")>-1&&e.substring(e.indexOf(".")+1).length<2&&(this.Ticket_one=e+t),!(e.indexOf(".")>-1))if(0==t&&0==e.length)this.Ticket_one="0.";else{if(e.length&&0===Number(e.charAt(0)))return;this.Ticket_one=e+t}}else this.showTip("最多只能设置6位数的密码~",1e3)},TicketTwo:function(t){var e=t.target.dataset.num;if(-1==e)return!1;switch(String(e)){case".":this.aTicketDecimalPoint();break;case"D":this.aTicketDeleteKey();break;case"C":this.aTicketClearKey();break;case"S":this.aTicketConfirmKey();break;default:this.aTicketNumberKey(e);break}},aTicketDecimalPoint:function(){if(this.Ticket_two.indexOf(".")>-1)return!1;this.Ticket_two.length?this.Ticket_two=this.Ticket_two+".":this.Ticket_two="0."},aTicketDeleteKey:function(){var t=this.Ticket_two;if(!t.length)return!1;this.Ticket_two=t.substring(0,t.length-1)},aTicketClearKey:function(){this.Ticket_two=""},aTicketConfirmKey:function(){var t=this.Ticket_two;if(!t.length)return this.showTip("您目前未输入~",1e3),!1;if(6==t.length){if(this.pwd!=t)return void this.showTip("两次输入的密码不一致~",1e3);this.pwd=t,this.two=!1,this.one=!1}else this.showTip("请设置6位数的密码~",1e3)},aTicketNumberKey:function(t){console.log("aaa");var e=this.Ticket_two;if(e.length<6){if(e.indexOf(".")>-1&&e.substring(e.indexOf(".")+1).length<2&&(this.Ticket_two=e+t),!(e.indexOf(".")>-1))if(0==t&&0==e.length)this.Ticket_two="0.";else{if(e.length&&0===Number(e.charAt(0)))return;this.Ticket_two=e+t}}else this.showTip("最多只能设置6位数的密码~",1e3)}}},Aa=Na,Ba=(a("ba92"),Object(l["a"])(Aa,Ra,Ga,!1,null,"a396ac12",null)),Wa=Ba.exports,Ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"goOk",on:{click:t.godo_index}},[t._v("完成")])])},za=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"kaitong"},[a("img",{attrs:{src:"http://pe1s.static.pdr365.com/1536575795599.jpg"}}),a("p",[t._v("开通成功")])])}],Ka={data:function(){return{loading:!0,account:""}},beforeRouteEnter:function(t,e,a){document.title="好时光会员卡",a()},created:function(){},methods:{godo_index:function(){this.$router.push({name:"myCards"})}}},qa=Ka,Fa=(a("7ae5"),Object(l["a"])(qa,Ua,za,!1,null,null,null)),Va=Fa.exports,Ha=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"details-bg"}),a("div",{staticClass:"video-details-content-box"},[a("div",{staticClass:"video-details-content-bj"},[a("img",{attrs:{src:null==t.MovieD.pic_entry?"http://pe1s.static.pdr365.com/default_movie_pic.jpg":t.MovieD.pic_entry}})]),a("div",{staticClass:"video-details-content"},[a("div",{staticClass:"video-details-content-img"},[a("img",{attrs:{src:null==t.MovieD.pic_entry?"http://pe1s.static.pdr365.com/default_movie_pic.jpg":t.MovieD.pic_entry}})]),a("div",{staticClass:"video-details-content-right"},[a("div",{staticClass:"video-details-content-right-title"},[a("p",[t._v(t._s(t.MovieD.film_name))]),a("div",[t._v(t._s(t.MovieD.film_dimensional))])]),a("p",{staticClass:"video-details-content-right-title-en"},[t._v(t._s(t.MovieD.film_brief))]),a("p",{staticClass:"video-details-content-right-type"},[t._v(t._s(t.MovieD.film_type))]),a("p",{staticClass:"video-details-content-right-country"},[t._v(t._s(t.MovieD.film_region)+"|"+t._s(t.MovieD.time_diff)+"分钟")]),a("p",{staticClass:"video-details-content-right-title-time"},[t._v(t._s(t.MovieD.release_date)+" 上映")]),a("div",{staticClass:"video-details-content-right-collect",staticStyle:{"text-align":"right","padding-right":"1rem"}},[t._v(t._s(t.MovieD.film_score)+"\n\t\t\t\t\t")])])])]),a("div",{staticClass:"video-synopsis"},[a("div",{staticClass:"video-synopsis-top"},[a("p",{staticClass:"video-synopsis-title"},[t._v("简介")]),a("div",{staticClass:"video-synopsis-character"},[a("span",{class:t.synopsis,on:{click:t.go_none}},[t._v(t._s(t.MovieD.film_content))]),a("a",{class:t.showBtn,on:{click:t.go_block}},[t._v("展开")])])]),a("div",{staticClass:"video-synopsis-bottom"},[a("p",{staticClass:"video-synopsis-actor"},[t._v("演员")]),a("div",{staticClass:"video-synopsis-actor-img",staticStyle:{position:"relative"}},[a("div",{ref:"gActorWrapper",staticClass:"wrapper",staticStyle:{position:"absolute",left:"0",top:"0",height:"100%"}},[a("ul",{style:t.actorListWidth},t._l(t.MovieD.celebritys,function(e){return a("li",[a("img",{attrs:{src:e.title_img}}),a("span",[t._v(t._s(e.cele_name))])])}))])])])]),a("div",{staticClass:"stage-photo-box"},[a("div",{staticClass:"stage-photo"},[a("p",{staticClass:"stage-photo-title"},[t._v("剧照")]),a("div",{staticClass:"stage-photo-list",staticStyle:{position:"relative"}},[a("div",{ref:"gStageScroll",staticClass:"wrapper",staticStyle:{position:"absolute",left:"0",top:"0",height:"100%"}},[a("ul",{style:t.stagePhotoWidth},t._l(t.MovieD.pictures,function(t){return a("li",[a("img",{attrs:{src:t.pic_url}})])}))])])])]),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e()])},Ja=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],Ya={data:function(){return{loading:!0,synopsis:"synopsis-none",showBtn:"showBtn",mid:"",MovieD:"",index:"",actorListWidth:"",stagePhotoWidth:""}},beforeRouteEnter:function(t,e,a){document.title="影片详情",a()},created:function(){this.mid=this.$route.params.mid,this.index=this.$route.params.index,this.MovieDeatil()},methods:{MovieDeatil:function(){var t=this,e="/general_api/api/MovieFutureDetails?movie_id="+t.mid+"&ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){0==e.code&&(t.MovieD=e.data,t.actorListWidth="width: ".concat(1.34*e.data.celebritys.length,"rem"),t.stagePhotoWidth="width: ".concat(1.88*e.data.pictures.length,"rem"),t.$nextTick(function(){t.gActorScroll=new S["a"](t.$refs.gActorWrapper,{click:!0,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1}),t.gStageScroll=new S["a"](t.$refs.gStageScroll,{click:!0,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1})})),t.loading=!1,console.log(e)})},back:function(){router.go(-1)},go_block:function(){var t=this;t.synopsis="synopsis-block",t.showBtn="noneBtn"},go_none:function(){var t=this;t.synopsis="synopsis-none",t.showBtn="showBtn"}}},Xa=Ya,Za=(a("25cd"),Object(l["a"])(Xa,Ha,Ja,!1,null,null,null)),Qa=Za.exports,ti=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"details-bg"}),a("div",{staticClass:"my-ticket-box"},[a("div",{staticClass:"my-cardWrap"},[a("div",{staticClass:"my-card my-cardtop my-module-1",staticStyle:{"padding-bottom":"0","min-height":"auto"}},[t._l(t.OrderList.items,function(e){return a("div",{staticClass:"weui-media weui-media-box_appmsg",staticStyle:{"margin-left":".3rem",padding:".3rem .3rem .3rem 0","border-bottom":"1px solid #efeff4"}},[a("div",{staticClass:"weui-media-box__hd",staticStyle:{width:"1rem",height:"1rem"}},[a("img",{staticClass:"weui-media-box__thumb",attrs:{src:"http://pe1s.static.pdr365.com/"+e.pic_url,alt:""}})]),a("div",{staticClass:"weui-media-box__bd",staticStyle:{"text-align":"left"}},[a("div",{staticClass:"select-goods-info"},[a("div",{staticClass:"select-goods-info-title",staticStyle:{"font-size":".28rem","font-weight":"bold"}},[t._v(t._s(e.goods_name))]),a("div",{staticClass:"select-goods-info-vol",staticStyle:{"font-size":".2rem",color:"#8D9398"}},[t._v(t._s(e.goods_name))]),a("div",{staticClass:"select-goods-info-price",staticStyle:{"margin-top":".1rem"}},[a("span",{staticStyle:{"font-size":".24rem",color:"#FF6231","font-weight":"bold"}},[t._v("¥"+t._s(e.unit_amount/100))])])])]),a("div",{staticClass:"store-goods-cal"},[a("p",{staticStyle:{"font-size":".28rem",color:"#999"}},[t._v(t._s(e.buy_num)+"份")])])])}),t._m(0)],2),a("div",{staticClass:"my-card my-cardbot my-module-2"},[a("p",{staticClass:"my-module-2-num"},[t._v("1张小食券")]),a("p",{staticClass:"my-module-2-hint"},[t._v("请到影院卖品柜台像员工出示以下信息取小食")]),a("img",{staticClass:"my-module-2-codeimg",attrs:{src:"https://tool.kd128.com/qrcode?text="+t.OrderList.order_no}}),t._m(1)]),a("div",{staticClass:"my-card my-cardbot4 my-module-4"},[a("p",{staticClass:"my-module-5-title",staticStyle:{"border-bottom":"1px solid #efeff4","padding-bottom":".2rem",margin:".3rem .3rem .2rem .3rem",color:"#ccc"}},[t._v("订单信息")]),a("p",{staticClass:"my-module-4-nm",staticStyle:{"font-size":".28rem",margin:".4rem .3rem .3rem .3rem"}},[t._v("实付金额"),a("span",[t._v(t._s(t.OrderList.pay_amount/100)+"元")])]),a("p",{staticClass:"my-module-4-info",staticStyle:{"font-size":".28rem"}},[t._v("订单号"),a("span",[t._v(t._s(t.OrderList.order_no))])])]),t._m(2)])]),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e()])},ei=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"weui-media-box weui-media-box_text",staticStyle:{display:"inline-block"}},[a("div",{staticClass:"weui-media-box__desc",staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticClass:"store-order-slogan"},[a("i",{staticClass:"iconfont icon-duigou"}),a("span",[t._v("随时退、过期退")])])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"my-module-2-code"},[t._v("\n\t\t    \t\t\t提示：\n\t\t    \t\t\t"),a("span",[t._v("请向工作人员出示二维码")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-card marginy-cardbot5  my-module-5",staticStyle:{float:"left",width:"100%","border-top":".18em dashed #efeff4","border-radius":"0 0 .18rem .18rem"}},[a("p",{staticClass:"my-module-5-title",staticStyle:{"border-bottom":"1px solid #efeff4","padding-bottom":".2rem",margin:".3rem .3rem .2rem .3rem",color:"#ccc"}},[t._v("购买须知")]),a("p",{staticClass:"my-module-5-clause",staticStyle:{color:"#000","font-size":".28rem"}},[t._v("使用时间")]),a("p",{staticClass:"my-module-5-clause"},[t._v("券24小时可用")])])}],ai={data:function(){return{loading:!0,on:"",movieDetails:"",index:"",tip_msg:"",apid:"",OrderList:""}},beforeRouteEnter:function(t,e,a){document.title="订单详情页",a()},created:function(){this.on=this.$route.params.on,this.index=this.$route.params.index,this.apid=this.$route.params.apid,this.GetOrderDetails()},methods:{showTip:function(t,e){var a=this;a.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},e))},back:function(){router.go(-1)},GetOrderDetails:function(){var t=this,e=x.a.get("_lac_k_"),a="/general_api/api/OrderList?apid="+t.apid+"&ds=&token="+e+"&oss=1&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){if(e){t.loading=!1;for(var a=0;a<e.length;a++)t.index==a&&(t.OrderList=e[a])}else t.loading=!1,t.showTip("暂无订单")}).catch(function(e){t.loading=!1,t.OrderList=null,t.showTip("暂无订单")})}}},ii=ai,si=(a("1982"),Object(l["a"])(ii,ti,ei,!1,null,null,null)),ni=si.exports,oi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"details-bg"}),a("div",{staticClass:"b_MD"},[a("div",{staticClass:"MD_top"},[a("div",{staticClass:"MD_top_n"},[a("div",{staticClass:"MD_top_img"},[a("span",[t._v("头像")]),a("img",{attrs:{src:""==t.img?""==t.account.head||null==t.account.head?"http://pe1s.static.pdr365.com/touxiang.png":t.account.head:t.img}}),a("input",{staticClass:"form-control",attrs:{type:"file",id:"HeadImg"},on:{change:t.upPIC}})]),a("div",{staticClass:"MD_top_ck"},[a("span",[t._v("昵称")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",placeholder:""==t.account.nickname||null==t.account.nickname?"请输入新的昵称":t.account.nickname,name:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])])]),a("div",{staticClass:"MD_top_save",on:{click:t.PreviewImage}},[t._v("保 存")])]),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e(),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e()])},ci=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],ri=(a("7f7f"),{data:function(){return{tip_msg:"",loading:!0,name:"",img:"",account:""}},beforeRouteEnter:function(t,e,a){document.title="修改资料",a()},created:function(){this.GetAccount()},methods:{showTip:function(t,e){var a=this;a.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},e))},GetCode:function(){var t=this,e=this,a=window.location.href,i=encodeURIComponent(a);x.a.get("_lac_k_");if(a.indexOf("code")>0){var s=a.split("="),n=s[1].toString(),o=n.substr(0,32);i="/general_api/api/CheckCode?code="+o+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(a){if(!a.available)return"bind_mobile"==a.messages[0]?void t.$router.push({name:"login",params:{apid:a.data}}):void t.showTip(a.messages[0]);e.loading=!1,document.cookie="_lac_k_="+a.data,t.GetAccount()}),e.loading=!1}else-1==a.indexOf("code")&&(location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx8c675ee4c365e1cd&redirect_uri="+i+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect")},GetAccount:function(){var t=this,e=this,a=x.a.get("_lac_k_"),i="/general_api/api/auth/GetAccount?token="+a+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(a){a.available?(e.loading=!1,e.account=a.data):0==a.available&&"user_no_login"==a.messages[0]&&t.GetCode(),e.loading=!1})},upPIC:function(){var t=this;t.loading=!0;var e=new FormData;e.append("HeadImg",document.getElementById("HeadImg").files[0]),$.ajax({url:"/general_api/api/upload_file",type:"POST",data:e,datatype:"json",contentType:!1,processData:!1,traditional:!0,success:function(e){e.available?(t.loading=!1,t.img=e.data):(t.loading=!1,t.showTip(e.messages[0]))},error:function(e){t.loading=!1}})},PreviewImage:function(){var t=this;if(t.loading=!0,""==e)var e=t.account.head;else e=t.img;if(""==t.name)var a=t.account.nickname;else a=t.name;var i=x.a.get("_lac_k_");$.ajax({url:"/general_api/api/auth/update_account",type:"POST",data:{token:i,head:e,name:a},datatype:"json",success:function(e){t.loading=!1;var a=JSON.parse(e);a.available?(t.showTip("修改资料成功"),t.$router.go(-1)):t.showTip("修改资料失败")},error:function(e){t.loading=!1,t.showTip("改修资料失败")}})}}}),li=ri,di=(a("99a6"),Object(l["a"])(li,oi,ci,!1,null,null,null)),_i=di.exports,ui=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"details-bg"}),a("div",{staticClass:"my-coupons-box"},[t.Coupons.length>0?a("div",{staticClass:"my-coupons"},t._l(t.Coupons,function(e,i){return a("div",{staticClass:"my-coupons-list stamp02"},[a("div",{staticClass:"my-coupons-list-left"},["1000"==e.coupon_type?a("p",{staticClass:"my-coupons-list-left-num"},[t._v("¥ "),a("span",[t._v(" "+t._s(e.rule_value/100))])]):"3000"==e.coupon_type?a("p",{staticClass:"my-coupons-list-left-num"},[a("span",[t._v(" "+t._s(t._f("toSlice")(e.rule_value))+"折")])]):"2000"==e.coupon_type?a("p",{staticClass:"my-coupons-list-left-num",staticStyle:{margin:"auto","line-height":"2.2rem"}},[a("span",{staticStyle:{"font-size":".4rem"}},[t._v(" 兑换券 ")])]):t._e(),a("p",{staticClass:"my-coupons-list-left-type"},[t._v(t._s("1000"==e.coupon_type?"代金券":"3000"==e.coupon_type?"折扣券":""))])]),a("div",{staticClass:"my-coupons-list-mid"},[a("p",{staticClass:"my-coupons-list-mid-title"},[t._v(t._s(e.batch_title))]),"2000"==e.coupon_type?a("p",{staticClass:"my-coupons-list-mid-info"},[a("span",[t._v("仅限到店使用")])]):a("p",{staticClass:"my-coupons-list-mid-info"},t._l(e.rule,function(e){return a("span",[t._v(" "+t._s(e)+" ")])})),a("p",{staticClass:"my-coupons-list-mid-info"},[t._v("有效期："+t._s(t.timelist[i]))]),a("p",{staticClass:"my-coupons-list-mid-info"},[t._v("券码："),a("span",[t._v(t._s(e.code))])])]),a("div",{staticClass:"my-coupons-list-pay",on:{click:function(a){t.chooseCoupons(e)}}},[t._v("选择")])])})):a("div",{staticClass:"my-coupons"},[t._m(0)])]),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(1)]):t._e(),a("div",{staticStyle:{position:"fixed",bottom:"0",width:"100%",padding:"20px .3rem",background:"#efeff4"}},[a("a",{staticClass:"weui-btn weui-btn_primary",staticStyle:{"font-size":"0.34rem",color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.goBack}},[t._v("不使用优惠券")])])])},mi=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"NoCoupons"},[a("img",{attrs:{src:"http://pe1s.static.pdr365.com/Nocoupons.png"}}),a("p",[t._v("您还没有优惠券呢～")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],pi={data:function(){return{loading:!0,Coupons:"",timelist:[],order_no:"",tnum:""}},beforeRouteEnter:function(t,e,a){document.title="选择优惠券",a()},created:function(){this.order_no=this.$route.params.order_no,this.tnum=this.$route.params.tnum},mounted:function(){this.GetCoupons()},methods:{back:function(){router.go(-1)},GetCoupons:function(){var t=this,e=this.order_no,a=x.a.get("_lac_k_"),i="/general_api/api/auth/GetAccountCoupnsByOrder?token="+a+"&order_id="+e+"&oc=2000&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(e){if("0"==e.code){t.loading=!1,t.Coupons=e.list;for(var a=[],i=0;i<e.list.length;i++){var s=e.list[i].validate_end,n=new Date(s),o=n.getFullYear(),c=n.getMonth()+1,r=n.getDate(),l=o+"-"+c+"-"+r;a.push(l)}t.timelist=a}else{t.loading=!1;x.a.get("_lac_ap_")}})},chooseCoupons:function(t){var e=JSON.stringify(t||{});sessionStorage.setItem("o_c",e),this.$router.push({name:"confirmOrder",params:{tnum:this.tnum}})},goBack:function(){sessionStorage.removeItem("o_c"),this.$router.push({name:"confirmOrder",params:{tnum:this.tnum}})}}},vi=pi,hi=(a("7e63"),Object(l["a"])(vi,ui,mi,!1,null,null,null)),gi=hi.exports,fi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"details-bg"}),a("div",{staticClass:"my-coupons-box"},[t.Coupons.length>0?a("div",{staticClass:"my-coupons"},t._l(t.Coupons,function(e,i){return a("div",{staticClass:"my-coupons-list stamp02"},[a("div",{staticClass:"my-coupons-list-left"},["1000"==e.coupon_type?a("p",{staticClass:"my-coupons-list-left-num"},[t._v("¥ "),a("span",[t._v(" "+t._s(e.rule_value/100))])]):"3000"==e.coupon_type?a("p",{staticClass:"my-coupons-list-left-num"},[a("span",[t._v(" "+t._s(t._f("toSlice")(e.rule_value))+"折")])]):"2000"==e.coupon_type?a("p",{staticClass:"my-coupons-list-left-num",staticStyle:{margin:"auto","line-height":"2.2rem"}},[a("span",{staticStyle:{"font-size":".4rem"}},[t._v(" 兑换券 ")])]):t._e(),a("p",{staticClass:"my-coupons-list-left-type"},[t._v(t._s("1000"==e.coupon_type?"代金券":"3000"==e.coupon_type?"折扣券":""))])]),a("div",{staticClass:"my-coupons-list-mid"},[a("p",{staticClass:"my-coupons-list-mid-title"},[t._v(t._s(e.batch_title))]),"2000"==e.coupon_type?a("p",{staticClass:"my-coupons-list-mid-info"},[a("span",[t._v("仅限到店使用")])]):a("p",{staticClass:"my-coupons-list-mid-info"},t._l(e.rule,function(e){return a("span",[t._v(" "+t._s(e)+" ")])})),a("p",{staticClass:"my-coupons-list-mid-info"},[t._v("有效期："+t._s(t.timelist[i]))]),a("p",{staticClass:"my-coupons-list-mid-info"},[t._v("券码："),a("span",[t._v(t._s(e.code))])])]),a("div",{staticClass:"my-coupons-list-pay",on:{click:function(a){t.chooseCoupons(e)}}},[t._v("选择")])])})):a("div",{staticClass:"my-coupons"},[t._m(0)])]),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(1)]):t._e(),a("div",{staticStyle:{position:"fixed",bottom:"0",width:"100%",padding:"20px .3rem",background:"#efeff4"}},[a("a",{staticClass:"weui-btn weui-btn_primary",staticStyle:{"font-size":"0.34rem",color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.goBack}},[t._v("不使用优惠券")])])])},Ci=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"NoCoupons"},[a("img",{attrs:{src:"http://pe1s.static.pdr365.com/Nocoupons.png"}}),a("p",[t._v("您还没有优惠券呢～")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],wi={data:function(){return{loading:!0,Coupons:"",timelist:[],order_no:"",goods:""}},beforeRouteEnter:function(t,e,a){document.title="选择优惠券",a()},created:function(){this.order_no=this.$route.params.order_no,this.goods=this.$route.params.Goods},mounted:function(){this.GetCoupons()},methods:{back:function(){router.go(-1)},GetCoupons:function(){var t=this,e=this,a=this.order_no,i=x.a.get("_lac_k_"),s="/general_api/api/auth/GetAccountCoupnsByOrder?token="+i+"&order_id="+a+"&oc=1000&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(a){if("0"==a.code){e.loading=!1,e.Coupons=a.list;for(var i=[],s=0;s<a.list.length;s++){var n=a.list[s].validate_end,o=new Date(n),c=o.getFullYear(),r=o.getMonth()+1,l=o.getDate(),d=c+"-"+r+"-"+l;i.push(d)}e.timelist=i}else{e.loading=!1;var _=x.a.get("_lac_ap_");_?t.$router.push({name:"login",params:{apid:_}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}})},chooseCoupons:function(t){var e=JSON.stringify(t||{});sessionStorage.setItem("o_c_1000",e),this.$router.push({name:"ConfirmGoodsOrder",params:{Goods:this.goods}})},goBack:function(){sessionStorage.removeItem("o_c_1000"),this.$router.push({name:"ConfirmGoodsOrder",params:{Goods:this.goods}})}}},bi=wi,yi=(a("e87c"),Object(l["a"])(bi,fi,Ci,!1,null,null,null)),ki=yi.exports,xi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"head-pic"},[a("swiper",{staticStyle:{height:"100%",background:"#ccc"},attrs:{options:t.swiperOption}},[t._l(t.goods_imgs,function(t,e){return a("swiper-slide",[a("img",{attrs:{src:"http://m.mt.ex.piaodaren.com/img_server/{{item.img_url}}",alt:""}})])}),a("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1),a("div",{staticClass:"info"},[a("p",{staticStyle:{"font-size":"1.4em","margin-bottom":".1rem"}},[t._v(t._s(t.goods_info.goods_name))]),a("p",[a("span",{staticStyle:{color:"#B11B0F","margin-right":"1em"}},[t._v("\n        ¥"),a("b",{staticStyle:{"font-size":"1.5em"}},[t._v(t._s(t.goods_info.goods_price/100))])]),a("span",{staticStyle:{color:"#A2A2A2"}},[t._v("\n        ¥"),a("s",[t._v(t._s(t.goods_info.goods_original_price/100))])])])]),t._m(0),a("div",{staticClass:"content-tab"},[a("p",{staticStyle:{display:"flex","text-align":"center","justify-content":"center","font-size":"1.2em"}},[a("span",{class:"details"===t.tab_name?"active":"",on:{click:function(e){t.tab_name="details"}}},[t._v("图文详情")]),a("span",{class:"params"===t.tab_name?"active":"",on:{click:function(e){t.tab_name="params"}}},[t._v("商品参数")])])]),a("div",{staticClass:"content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"details"===t.tab_name,expression:"tab_name === 'details'"}],staticClass:"content-html",domProps:{innerHTML:t._s(t.content_html)}},[t._v(t._s(t.goods_content.content))]),a("div",{directives:[{name:"show",rawName:"v-show",value:"params"===t.tab_name,expression:"tab_name === 'params'"}],staticClass:"content-params"},[t._m(1),t._m(2),t._m(3),a("p",[a("span",[t._v("商品简介")]),a("span",[t._v(t._s(t.goods_content.content))])])])])])},Si=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"service",staticStyle:{display:"flex","margin-left":".3rem","border-top":"1px solid #A2A2A2","padding-top":".3rem"}},[a("p",{staticStyle:{width:"6em",display:"flex","align-items":"center"}},[a("span",[t._v("服务")])]),a("p",[a("span",{staticClass:"item"},[a("i",{staticClass:"iconfont icon-duigou"}),t._v("正品保障\n      ")]),a("span",{staticClass:"item"},[a("i",{staticClass:"iconfont icon-duigou"}),t._v("无忧售后\n      ")]),a("span",{staticClass:"item"},[a("i",{staticClass:"iconfont icon-duigou"}),t._v("极速退款\n      ")]),a("span",{staticClass:"item"},[t._v("退换货特别提示")]),a("span",{staticClass:"item"},[t._v("退换货特别提示")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",[t._v("规格")]),a("span",[t._v("默认款式")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",[t._v("颜色")]),a("span",[t._v("默认款式")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",[t._v("功效")]),a("span")])}],Di={beforeRouteEnter:function(t,e,a){document.title="商品详情",a()},data:function(){return{swiperOption:{pagination:{el:".swiper-pagination"},autoplay:!0,loop:!0},tab_name:"details",content_html:"",gid:"",skuid:"",goods_info:null,goods_imgs:null,goods_content:null}},mounted:function(){this.gid=this.$route.params.gid,this.skuid=this.$route.params.skuid,this.wxinit(),this.getGoodsInfo()},methods:{wxinit:function(){var t="cu=/general_api/tcss/index",e="/general_api/h5/wx/jsticket/?"+t;fetch(e).then(function(t){return t.json()}).then(function(t){console.log(t),"0000"==t.ret_code&&wx.config({debug:!1,appId:t.data.appid,timestamp:t.data.timestamp,nonceStr:t.data.noncestr,signature:t.data.sign_str,jsApiList:["startRecord","translateVoice","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","translateVoice","getNetworkType","onMenuShareTimeline","onMenuShareAppMessage","getLocation","openLocation"]})})},getGoodsInfo:function(){var t=this,e=x.a.get("_lac_k_"),a="/general_api/api/goods_detail?gid="+this.gid+"&skuid="+this.skuid+"&token="+e+"&ts="+Date.parse(new Date),i=weui.loading("加载中");fetch(a).then(function(t){return t.json()}).then(function(e){i.hide(),"0000"==e.ret_code?(t.goods_info=e.data[0],t.goods_imgs=e.data[1],t.goods_content=e.data[2]):weui.dialog({content:"内容",buttons:[{label:"确定",type:"primary",onClick:function(){}}]})})}}},Ti=Di,Ei=(a("2191"),Object(l["a"])(Ti,xi,Si,!1,null,"0bf15bd0",null)),ji=Ei.exports,Oi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{background:"#EFEFF4"}},[a("div",{staticClass:"confirm-btn-container"},[a("div",{staticClass:"btn-container"},[a("p",{staticStyle:{"font-size":"1.5em","text-align":"center","margin-bottom":"2em"}},[t._v("金额：1000元")]),a("div",{staticClass:"confirm-btn"},[a("a",{staticClass:"weui-btn weui-btn_primary",staticStyle:{width:"40%","font-size":"0.34rem",color:"#fff"},attrs:{href:"javascript:;"},on:{click:t.goPay}},[t._v("点击支付")])])])])])},Ii=[],Li={data:function(){return{}},beforeRouteEnter:function(t,e,a){document.title="确认金额",a()},methods:{goPay:function(){var t="/general_api/api/auth/GetWxObj?ts="+Date.parse(new Date);fetch(t).then(function(t){return t.json()}).then(function(t){-1==t.code||0==t.code||0==t.available&&t.messages[0]})}}},$i=Li,Pi=Object(l["a"])($i,Oi,Ii,!1,null,null,null),Mi=Pi.exports,Ri=[{path:"/",name:"index",component:w},{path:"/index",name:"storeList",component:Qe},{path:"/cinemaList/:mid",name:"cinemaList",component:G},{path:"/videoDetails/:mid/:index",name:"videoDetails",component:j},{path:"/moviecinemaList/:mid",name:"moviecinemaList",component:z},{path:"/login/:apid",name:"login",component:Z},{path:"/myCoupons/",name:"myCoupons",component:st},{path:"/personalCenter/:st?",name:"personalCenter",component:dt},{path:"/myTicket/",name:"myTicket",component:ht},{path:"/votingCode/:on",name:"votingCode",component:yt},{path:"/myCards/",name:"myCards",component:Et},{path:"/purchasingCard/:CardNm",name:"purchasingCard",component:Pt},{path:"/bindCard/",name:"bindCard",component:Wt},{path:"/cardDetails/",name:"cardDetails",component:Vt},{path:"/myIntegral/",name:"myIntegral",component:Qt},{path:"/integrationRule/",name:"integrationRule",component:ne},{path:"/cityList/",name:"cityList",component:_e},{path:"/schedule/:cinemaId/:mid/:index",name:"schedule",component:ge},{path:"/seats/:planId/:lastUpdateTime/:hallId/:cinemaId/:plan_date",name:"seats",component:ke},{path:"/confirmOrder/:tnum",name:"confirmOrder",component:je},{path:"/storeOrder/:tnum",name:"storeOrder",component:na},{path:"/rechargeAmount/:CardNm",name:"rechargeAmount",component:_a},{path:"/ScavengingPointMea/:tableNum/:sid?",name:"ScavengingPointMea",component:ga},{path:"/ConfirmGoodsOrder/:Goods",name:"ConfirmGoodsOrder",component:ka},{path:"/ScanGoodsOrder/:on/:tableNum",name:"ScanGoodsOrder",component:ja},{path:"/scanLogin/:apid",name:"scanLogin",component:Ma},{path:"/scanPurchasingCard",name:"scanPurchasingCard",component:Wa},{path:"/kaikaSuccess",name:"kaikaSuccess",component:Va},{path:"/GoIngvideoDetails",name:"GoIngvideoDetails",component:Qa},{path:"/GoodsCode/:on/:index/:apid",name:"GoodsCode",component:ni},{path:"/modifiedData",name:"modifiedData",component:_i},{path:"/couponsForOrder/:order_no",name:"couponsForOrder",component:gi},{path:"/couponsForGoods/:order_no",name:"couponsForGoods",component:ki},{path:"/goodsDetails/:gid/:skuid?",name:"goodsDetails",component:ji},{path:"/QRcode",name:"QRcode",component:Mi}];o.a.use(p.a);var Gi,Ni=new p.a({routes:Ri}),Ai=Ni,Bi={groupList:[],goodsList:[],cartList:[],firCatId:-1,comboShow:!1,logo:{}},Wi=Bi,Ui=function(t){return t.totalMoney},zi=(a("20d6"),"SET_GROUP_LIST"),Ki="SET_GOODS_LIST",qi="SET_FIR_CAT_ID",Fi="ADD_TO_CART",Vi="RELEASE_TO_CART",Hi="CLEAR_CART",Ji="LISTEN_CART",Yi="TOGGLE_COMBO_SHOW",Xi="GET_LOGO",Zi=a("bc3a"),Qi=a.n(Zi),ts=function(t){var e="/general_api/api/goods_cat?ts="+Date.parse(new Date);"storeList"===t?e+="&c=GENERAL_EC":"ScavengingPointMea"===t&&(e+="&c=GENERAL_SOC");var a=[],i=weui.loading("加载中");return Qi.a.get(e).then(function(t){return i.hide(),t.data?(t.data.forEach(function(t){a.push(t)}),a):a}).catch(function(t){return console.log(t),i.hide(),a})},es=function(t,e){var a=weui.loading("加载中"),i="/general_api/api/goods?ts="+Date.parse(new Date),s=[],n={cat_id:t,sid:e};return Qi.a.get(i,{params:n}).then(function(t){return t.data.length>0?(s=t.data,s.forEach(function(t,e){t[0].skus=JSON.parse(t[0].skus);var a=[];for(var i in t[0].skus)a.push(i);t[0].length=a.length,t[0].count=0}),a.hide(),s):(a.hide(),s)})},as=function(){var t="/general_api/api/project_by_id?ts="+Date.parse(new Date),e={};return Qi.a.get(t).then(function(t){return e=t.data,e})},is=function(t,e){var a=t.commit;return ts(e).then(function(t){a(zi,t),a(qi,t[0].id)})},ss=function(t,e){var a=t.commit,i=t.state;console.log(e),es(e.id,e.sid).then(function(t){if(i.cartList.length>0)for(var e=function(e){if(t.length>0){var a=t.findIndex(function(t){return console.log(t),t[0].id===i.cartList[e][0].id&&t[1].id===i.cartList[e][1].id});-1!==a&&(t[a][0].count=i.cartList[e][0].count)}},s=0;s<i.cartList.length;s++)e(s);a(Ki,t)})},ns=function(t){t.commit;for(var e=t.state,a=function(t){if(e.goodsList.length>0){var a=e.goodsList.findIndex(function(a){return a[0].id===e.cartList[t][0].id&&a[1].id===e.cartList[t][1].id});-1!==a&&(e.goodsList[a][0].count=e.cartList[t][0].count)}},i=0;i<e.cartList.length;i++)a(i)},os=function(t,e){var a=t.commit,i=t.state,s=e.data;if(i.cartList.length>0){for(var n=!1,o=0;o<i.cartList.length;o++){if(i.cartList[o][0].id===s[0].id)return n=!1,void(i.cartList[o][0].count=s[0].count);n=!0}n&&i.cartList.push(s)}else i.cartList.push(s);a(Fi,i.cartList)},cs=function(t,e){t.commit;for(var a=t.state,i=e.data,s=0;s<a.cartList.length;s++)if(a.cartList[s][0].id===i[0].id)return void(0===i[0].count&&a.cartList.splice(s,1))},rs=function(t){var e=t.commit,a=t.state;a.goodsList.length>0&&a.goodsList.forEach(function(t){t[0].count=0});var i=[];e(Hi,i)},ls=function(t){var e=t.commit,a=t.state,i=!a.comboShow;e(Yi,i)},ds=function(t){var e=t.commit;t.state;e(qi,-1)},_s=function(t){var e=t.commit;t.state;as().then(function(t){e(Xi,t)})},us=(Gi={},Object(Gt["a"])(Gi,zi,function(t,e){t.groupList=e}),Object(Gt["a"])(Gi,Ki,function(t,e){t.goodsList=e}),Object(Gt["a"])(Gi,qi,function(t,e){t.firCatId=e}),Object(Gt["a"])(Gi,Fi,function(t,e){t.cartList=e}),Object(Gt["a"])(Gi,Vi,function(t,e){t.cartList=e}),Object(Gt["a"])(Gi,Hi,function(t,e){t.cartList=e}),Object(Gt["a"])(Gi,Ji,function(t,e){t.goodsList=e}),Object(Gt["a"])(Gi,Yi,function(t,e){t.comboShow=e}),Object(Gt["a"])(Gi,Xi,function(t,e){t.logo=e}),Gi),ms=us;o.a.use(H.a);var ps=new H.a.Store({state:Wi,getters:i,mutations:ms,actions:s}),vs=a("7212"),hs=a.n(vs);a("6d93");(function(t,e){var a=t.documentElement,i="orientationchange"in window?"orientationchange":"resize",s=function(){var t=a.clientWidth;t&&(a.style.fontSize=t>=750?"100px":t/750*100+"px")};t.addEventListener&&(e.addEventListener(i,s,!1),s())})(document,window);a("dfa4");var gs=function(t){return Number(t).toFixed(2)},fs=function(t){return Number(t.slice(0,t.indexOf("/")))/10},Cs={toFixed:gs,toSlice:fs};ps.dispatch("getLogo"),Object.keys(Cs).forEach(function(t){o.a.filter(t,Cs[t])}),o.a.use(hs.a),o.a.config.productionTip=!1,new o.a({router:Ai,store:ps,render:function(t){return t(u)}}).$mount("#app")},5722:function(t,e,a){"use strict";var i=a("d82d"),s=a.n(i);s.a},5880:function(t,e){t.exports=Vuex},5922:function(t,e,a){},"5db3":function(t,e,a){"use strict";var i=a("7bec"),s=a.n(i);s.a},"5dc0":function(t,e,a){},"60b6":function(t,e,a){"use strict";var i=a("1d3d"),s=a.n(i);s.a},6124:function(t,e,a){},6174:function(t,e,a){},6389:function(t,e){t.exports=VueRouter},"64ba":function(t,e,a){},"66c0":function(t,e,a){"use strict";var i=a("1a2c"),s=a.n(i);s.a},"6f51":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__),better_scroll__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("1fba");__webpack_exports__["a"]={data:function(){var t=this;return{isShow:!1,click_flag:!1,cinemaId:"",movie_id:"",cinema_id:"",store_city:"",store_zone:"",cinema_info:{},movie_list:[],current_plan_list:[],date_index:0,date_list_length:0,current_movie_index:0,current_movie:{},date_list:"",properties:"",loading:!0,actorList:"",storeAdd:"",storeName:"",index:"",dateListScroll:{},swiperOption:{slidesPerView:4,spaceBetween:10,centeredSlides:!0,on:{slideChangeTransitionEnd:function(){var e=$(".swiper-slide-active input").val();void 0!=e&&(t.current_plan_list=t.date_list[0].plans,t.current_movie_index=this.activeIndex,t.date_index=0)},click:function(e){var a=this;t.current_plan_list=t.movie_list[a.clickedIndex].dates[0].plans,t.properties=t.movie_list[a.clickedIndex].properties,t.actorList=t.movie_list[a.clickedIndex].celebritys,a.slideTo(a.clickedIndex),t.dateListScroll.scrollTo(0,0,700,"bounce")}}}}},computed:{swiper:function(){return this.$refs.mySwiper.swiper}},beforeRouteEnter:function(t,e,a){document.title="影片排期",a()},created:function(){this.movie_id=this.$route.params.mid,this.index=this.$route.params.index,this.cinemaId=this.$route.params.cinemaId;var t=this.getCookie("storeName");this.decodeUnicodeNm(t);var e=this.getCookie("storeAdd");this.decodeUnicodeAdd(e)},mounted:function(){this.fetchMovieData(),this.dateListScroll=new better_scroll__WEBPACK_IMPORTED_MODULE_2__["a"](this.$refs.dateListWrapper,{click:!0,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1})},methods:{decodeUnicodeAdd:function decodeUnicodeAdd(str){str=str.replace(/\\/g,"%");var inner_name=unescape(str);inner_name=eval("'"+inner_name+"'"),this.storeAdd=unescape(inner_name.replace(/\u/g,"%u"))},decodeUnicodeNm:function decodeUnicodeNm(str){str=str.replace(/\\/g,"%");var inner_name=unescape(str);inner_name=eval("'"+inner_name+"'"),this.storeName=unescape(inner_name.replace(/\u/g,"%u"))},getCookie:function(t){for(var e=document.cookie,a=e.split("; "),i=0;i<a.length;i++){var s=a[i].split("=");if(s[0]==t)return s[1]}return""},fetchMovieData:function(){var t=this,e="/general_api/api/CityMovieList?cinema_id="+t.cinemaId+"&ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(e){if(0==e.code){var a=[];t.current_swiper_index=t.index,a.push(e.data[t.index].properties.id),t.movie_list=e.data,t.current_plan_list=e.data[t.index].dates[0].plans,t.current_movie=e.data[t.current_swiper_index],t.properties=e.data[t.current_swiper_index].properties,t.actorList=e.data[t.current_swiper_index].celebritys,t.swiper.slideTo(t.current_swiper_index),t.fetchPlanData(),t.loading=!1}else t.loading=!1})},fetchPlanData:function(){var t=this;t.movie_id;t.date_list=t.movie_list[t.index].dates},clickDate:function(t){this.date_index=t,this.current_plan_list=this.date_list[t].plans},closeDialog:function(){$("body").removeClass("body-no-scroll"),this.isShow=!1},godo_seats:function(t,e,a,i){e||(e="0"),this.$router.push({name:"seats",params:{planId:t,lastUpdateTime:e,hallId:a,cinemaId:this.cinemaId,plan_date:i}})},godo_cinemas:function(){this.$router.push({name:"cinemaList",params:{mid:"2"}})},goMap:function(){location.href="https://3gimg.qq.com/lightmap/v1/marker/index.html?marker=coord:40.680960,109.842720;title:包头MZC全景影城;addr:内蒙古自治区包头市青山区阿尔丁北大街泊景湾商务楼3楼;from=canary&key=OEIBZ-NBO3J-JL2FM-KYSH3-NP5O3-MDBYO&referer=wepiao&ch=uri-api&ADTAG=uri-api.wepiao#"},godo_goods:function(){location.href="/general_api/tcss/index#/storeList"},godo_index:function(){this.$router.push({name:"index"})},godo_mine:function(){location.href="/general_api/tcss/index#/personalCenter"}},watch:{current_movie_index:function(){this.date_list=this.movie_list[this.current_movie_index].dates,this.current_plan_list=this.movie_list[this.current_movie_index].dates[0].plans,this.current_movie=this.movie_list[this.current_movie_index],this.properties=this.movie_list[this.current_movie_index].properties,this.actorList=this.movie_list[this.current_movie_index].celebritys;this.current_movie.img},current_plan_list:function(){if(null!=this.current_plan_list)for(var t=0;t<this.current_plan_list.length;t++){var e=parseInt(this.current_plan_list[t].startClock.slice(0,3));this.current_plan_list[t].time_flag=e>5&&e<19?1:2}}}}},7054:function(t,e,a){"use strict";var i=a("3410"),s=a.n(i);s.a},"71e3":function(t,e,a){"use strict";var i=a("5dc0"),s=a.n(i);s.a},"722f":function(t,e,a){"use strict";var i=a("64ba"),s=a.n(i);s.a},7536:function(t,e,a){},"7ae5":function(t,e,a){"use strict";var i=a("969b"),s=a.n(i);s.a},"7b65":function(t,e,a){"use strict";var i=a("f34d"),s=a.n(i);s.a},"7bec":function(t,e,a){},"7dfb":function(t,e,a){"use strict";var i=a("b0a0"),s=a.n(i);s.a},"7e63":function(t,e,a){"use strict";var i=a("6174"),s=a.n(i);s.a},8145:function(t,e,a){},"8bbf":function(t,e){t.exports=Vue},"8ce5":function(t,e,a){"use strict";var i=a("e50c"),s=a.n(i);s.a},"93b5":function(t,e,a){"use strict";var i=a("eaa0"),s=a.n(i);s.a},"952f":function(t,e,a){},"969b":function(t,e,a){},"96a6":function(t,e,a){"use strict";var i=a("96c2"),s=a.n(i);s.a},"96c2":function(t,e,a){},"99a6":function(t,e,a){"use strict";var i=a("e6de"),s=a.n(i);s.a},"9db0":function(t,e,a){},a000:function(t,e,a){"use strict";var i=a("1f73"),s=a.n(i);s.a},a13f:function(t,e,a){"use strict";var i=a("5922"),s=a.n(i);s.a},aca8:function(t,e,a){},b0a0:function(t,e,a){},b0d3:function(t,e,a){},b240:function(t,e,a){},b2ec:function(t,e,a){"use strict";var i=a("387b"),s=a.n(i);s.a},b877:function(t,e,a){"use strict";var i=a("ec3f"),s=a.n(i);s.a},ba92:function(t,e,a){"use strict";var i=a("b240"),s=a.n(i);s.a},ba94:function(t,e,a){"use strict";var i=a("340e"),s=a.n(i);s.a},c70f:function(t,e,a){},c7cb:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("c5f6"),core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_number_constructor__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("cadf"),core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("551c"),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_5__),js_cookie__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("a78e"),js_cookie__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_6__),better_scroll__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("1fba"),_c_tabBottom_tabBottom_vue__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("4116");__webpack_exports__["a"]={data:function(){return{loading:!0,forbid:!1,tip_msg:"",MovieList:"",MovieNum:"",ComeList:"",cinemaId:0,city_list:"",city_name:"",city_no:"",cinemanm:"",comingListWidth:"",movieListWidth:"",swiperOption:{autoplay:!0}}},beforeRouteEnter:function(t,e,a){document.title="正在热映",a()},created:function(){this.wxinit(),this.wxlocate(),this.CheckLogin(),this.ComeingMovie(),this.cityList(),this.GetMovie();var t=this.getCookie("storeName");this.decodeUnicode(t)},computed:{swiper:function(){return this.$refs.indexSwiper.swiper}},methods:{wxinit:function(){var t="cu=/general_api/tcss/index",e="/general_api/h5/wx/jsticket/?"+t;fetch(e).then(function(t){return t.json()}).then(function(t){console.log(t),"0000"==t.ret_code&&wx.config({debug:!1,appId:t.data.appid,timestamp:t.data.timestamp,nonceStr:t.data.noncestr,signature:t.data.sign_str,jsApiList:["startRecord","translateVoice","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","translateVoice","getNetworkType","onMenuShareTimeline","onMenuShareAppMessage","getLocation","openLocation","addCard"]})})},wxlocate:function(){var t=this;wx.ready(function(){wx.getLocation({type:"wgs84",success:function(e){var a=e.latitude,i=e.longitude;e.speed,e.accuracy;AMap.service("AMap.Geocoder",function(){var e=new AMap.Geocoder({});e.getAddress([i,a],function(e,a){if("complete"===e&&"OK"===a.info){window.location_msg=a;var i=a.regeocode.addressComponent.city?a.regeocode.addressComponent.city:a.regeocode.addressComponent.province,s="当前定位城市:"+i,n=js_cookie__WEBPACK_IMPORTED_MODULE_6___default.a.get("city_name");n?n.indexOf(i.substring(0,i.length-1))>-1?t.confirmLocate(s,!0):t.confirmAndChooseLocate(s+"，请确认"):t.confirmLocate(s,!0)}else{var o=js_cookie__WEBPACK_IMPORTED_MODULE_6___default.a.get("city_name");o||t.confirmLocate("定位失败，请重新选择城市",!1)}})})},fail:function(e){t.city_forbid=!0;var a=js_cookie__WEBPACK_IMPORTED_MODULE_6___default.a.get("city_name");a||t.confirmLocate("定位失败，请重新选择城市",!1)},cancel:function(e){t.city_fail=!0;var a=js_cookie__WEBPACK_IMPORTED_MODULE_6___default.a.get("city_name");a||t.confirmLocate("定位失败，请重新选择城市",!1)}})})},confirmLocate:function(t,e){var a=this;weui.dialog({content:t,buttons:[{label:"选择城市",type:"primary",onClick:function(){e||a.$router.push({name:"cityList"})}}]})},confirmAndChooseLocate:function(t){var e=this;weui.dialog({content:t,buttons:[{label:"确认",type:"default",onClick:function(){}},{label:"选择城市",type:"primary",onClick:function(){e.$router.push({name:"cityList"})}}]})},decodeUnicode:function decodeUnicode(str){str=str.replace(/\\/g,"%");var inner_cinemaname=unescape(str);inner_cinemaname=eval("'"+inner_cinemaname+"'"),this.cinemanm=unescape(inner_cinemaname.replace(/\u/g,"%u"))},CheckLogin:function(){var t=js_cookie__WEBPACK_IMPORTED_MODULE_6___default.a.get("_lac_ap_");t||(location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime())},getCookie:function(t){for(var e=document.cookie,a=e.split("; "),i=0;i<a.length;i++){var s=a[i].split("=");if(s[0]==t)return s[1]}return""},cityList:function(){var t=this,e=js_cookie__WEBPACK_IMPORTED_MODULE_6___default.a.get("city_no");if(e){var a=js_cookie__WEBPACK_IMPORTED_MODULE_6___default.a.get("cinemaId");a?this.cinemaId=a:this.GetStore(e)}else{var i=this,s="/general_api/api/cityList?ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(e){console.log(e),"0"==e.code&&e.data&&e.data.length>0&&(i.city_list=e.data,js_cookie__WEBPACK_IMPORTED_MODULE_6___default.a.set("city_no",e.data[0].city_no),i.city_name=e.data[0].city_name,i.city_no=Number(e.data[0].city_no),t.GetStore(Number(e.data[0].city_no)),js_cookie__WEBPACK_IMPORTED_MODULE_6___default.a.set("city_name",i.city_name)),i.loading=!1})}},ComeingMovie:function(){var t=this,e="/general_api/api/UpcomingMovies";fetch(e).then(function(t){return t.json()}).then(function(e){0==e.code&&(t.ComeList=e.data.coming,t.comingListWidth="width: ".concat(1.78*e.data.coming.length,"rem"),t.$nextTick(function(){t.scroll=new better_scroll__WEBPACK_IMPORTED_MODULE_7__["a"](t.$refs.comingWrapper,{click:!0,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1})}))})},GetStore:function(t){var e=this,a=this,i="/general_api/api/StoreList?city_no="+t+"&ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(t){if(console.log(t),0==t.code&&t.data&&t.data.length>0){var i=0;t.data[0].cinema_id&&(i=t.data[0].cinema_id),a.cinemaId=i,a.cinemanm=t.data[0].store_name,a.s_id=t.data[0].s_id,console.log("set cinemaId default cookie======"+a.cinemaId),js_cookie__WEBPACK_IMPORTED_MODULE_6___default.a.set("cinemaId",a.cinemaId),js_cookie__WEBPACK_IMPORTED_MODULE_6___default.a.set("s_id",t.data[0].store_basic);var s=t.data[0].city;t.data[0].zone&&(s+=t.data[0].zone),t.data[0].address&&(s+=t.data[0].address),a.encodeUnicodeAdd(s),a.encodeUnicodeName(t.data[0].physics_name),e.GetMovie()}a.loading=!1})},encodeUnicodeAdd:function(t){for(var e=[],a=0;a<t.length;a++)e[a]=("00"+t.charCodeAt(a).toString(16)).slice(-4);js_cookie__WEBPACK_IMPORTED_MODULE_6___default.a.set("storeAdd","\\u"+e.join("\\u"))},encodeUnicodeName:function(t){for(var e=[],a=0;a<t.length;a++)e[a]=("00"+t.charCodeAt(a).toString(16)).slice(-4);js_cookie__WEBPACK_IMPORTED_MODULE_6___default.a.set("storeName","\\u"+e.join("\\u"))},GetMovie:function(){var t=this,e=js_cookie__WEBPACK_IMPORTED_MODULE_6___default.a.get("cinemaId");if(e){var a="/general_api/api/CityMovieList?cinema_id="+e+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){0==e.code&&(t.MovieList=e.data,t.MovieNum=e.data.length,t.movieListWidth="width: ".concat(1.78*e.data.length,"rem"),t.$nextTick(function(){t.scroll=new better_scroll__WEBPACK_IMPORTED_MODULE_7__["a"](t.$refs.movieWrapper,{click:!0,eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1})})),t.loading=!1})}else{var i=js_cookie__WEBPACK_IMPORTED_MODULE_6___default.a.get("city_no");this.GetStore(i)}},showTip:function(t,e){var a=this;a.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},e))},back:function(){router.go(-1)},godo_cinema:function(){this.$router.push({name:"moviecinemaList",params:{mid:"2"}})},GoIngvideoDetails:function(t,e){this.$router.push({name:"GoIngvideoDetails",params:{mid:t,index:e}})},videoDetails:function(t,e){this.$router.push({name:"videoDetails",params:{mid:t,index:e}})},godo_buy:function(t,e){var a=this;this.$router.push({name:"schedule",params:{cinemaId:a.cinemaId,mid:t,index:e}})},godo_mine:function(){location.href="/general_api/tcss/index#/personalCenter"},godo_cinemas:function(){this.$router.push({name:"cinemaList",params:{mid:"2"}})},godo_goods:function(){location.href="/general_api/tcss/index#/storeList"}},components:{tabBottom:_c_tabBottom_tabBottom_vue__WEBPACK_IMPORTED_MODULE_8__["a"]}}},cd9f:function(t,e,a){"use strict";var i=a("4244"),s=a.n(i);s.a},cda1:function(t,e,a){},d44d:function(t,e,a){"use strict";var i=a("daad"),s=a.n(i);s.a},d82d:function(t,e,a){},daad:function(t,e,a){},db08:function(t,e,a){"use strict";var i=a("b0d3"),s=a.n(i);s.a},df27:function(t,e,a){"use strict";var i=a("952f"),s=a.n(i);s.a},e308:function(t,e,a){},e50c:function(t,e,a){},e6de:function(t,e,a){},e87c:function(t,e,a){"use strict";var i=a("aca8"),s=a.n(i);s.a},e912:function(t,e,a){"use strict";var i=a("e308"),s=a.n(i);s.a},eaa0:function(t,e,a){},ec3f:function(t,e,a){},f34d:function(t,e,a){},f9e9:function(t,e,a){"use strict";var i=a("7536"),s=a.n(i);s.a},fd03:function(t,e,a){}});