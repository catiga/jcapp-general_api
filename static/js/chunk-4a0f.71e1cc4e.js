(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a0f"],{"0bfb":function(t,i,a){"use strict";var e=a("cb7c");t.exports=function(){var t=e(this),i="";return t.global&&(i+="g"),t.ignoreCase&&(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),t.sticky&&(i+="y"),i}},"214f":function(t,i,a){"use strict";var e=a("32e9"),s=a("2aba"),o=a("79e5"),n=a("be13"),c=a("2b4c");t.exports=function(t,i,a){var r=c(t),d=a(n,r,""[t]),u=d[0],l=d[1];o(function(){var i={};return i[r]=function(){return 7},7!=""[t](i)})&&(s(String.prototype,t,u),e(RegExp.prototype,r,2==i?function(t,i){return l.call(t,this,i)}:function(t){return l.call(t,this)}))}},"28a5":function(t,i,a){a("214f")("split",2,function(t,i,e){"use strict";var s=a("aae3"),o=e,n=[].push,c="split",r="length",d="lastIndex";if("c"=="abbc"[c](/(b)*/)[1]||4!="test"[c](/(?:)/,-1)[r]||2!="ab"[c](/(?:ab)*/)[r]||4!="."[c](/(.?)(.?)/)[r]||"."[c](/()()/)[r]>1||""[c](/.?/)[r]){var u=void 0===/()??/.exec("")[1];e=function(t,i){var a=String(this);if(void 0===t&&0===i)return[];if(!s(t))return o.call(a,t,i);var e,c,l,m,f,g=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,v=void 0===i?4294967295:i>>>0,_=new RegExp(t.source,p+"g");u||(e=new RegExp("^"+_.source+"$(?!\\s)",p));while(c=_.exec(a)){if(l=c.index+c[0][r],l>h&&(g.push(a.slice(h,c.index)),!u&&c[r]>1&&c[0].replace(e,function(){for(f=1;f<arguments[r]-2;f++)void 0===arguments[f]&&(c[f]=void 0)}),c[r]>1&&c.index<a[r]&&n.apply(g,c.slice(1)),m=c[0][r],h=l,g[r]>=v))break;_[d]===c.index&&_[d]++}return h===a[r]?!m&&_.test("")||g.push(""):g.push(a.slice(h)),g[r]>v?g.slice(0,v):g}}else"0"[c](void 0,0)[r]&&(e=function(t,i){return void 0===t&&0===i?[]:o.call(this,t,i)});return[function(a,s){var o=t(this),n=void 0==a?void 0:a[i];return void 0!==n?n.call(a,o,s):e.call(String(o),a,s)},e]})},3846:function(t,i,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},4116:function(t,i,a){"use strict";var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"bottom-tab"},[a("a",{staticClass:"store",attrs:{href:"javascript:void(0)","data-status":"store"===t.active?"active":""},on:{click:t.store}},[a("div",{staticClass:"icon"})]),a("a",{staticClass:"movie",attrs:{href:"javascript:void(0)","data-status":"movie"===t.active?"active":""},on:{click:t.movie}},[a("div",{staticClass:"icon"})]),a("a",{staticClass:"cinema",attrs:{href:"javascript:void(0)","data-status":"cinema"===t.active?"active":""},on:{click:t.cinema}},[a("div",{staticClass:"icon"})]),a("a",{staticClass:"mine",attrs:{href:"javascript:void(0)","data-status":"mine"===t.active?"active":""},on:{click:t.mine}},[a("div",{staticClass:"icon"})])])},s=[],o=a("a78e"),n=a.n(o),c={props:{active:{type:String,default:""}},methods:{movie:function(){this.$router.push({name:"index",params:{mid:"2"}})},store:function(){this.$router.push({name:"storeList"})},cinema:function(){this.$router.push({name:"cinemaList",params:{mid:"2"}})},mine:function(){var t=n.a.get("_lac_k_");if(t)this.$router.push({name:"personalCenter"});else{var i=n.a.get("_lac_ap_");i?this.$router.push({name:"login",params:{apid:i}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}}}},r=c,d=(a("a13f"),a("2877")),u=Object(d["a"])(r,e,s,!1,null,"21601724",null);i["a"]=u.exports},5922:function(t,i,a){},"6b54":function(t,i,a){"use strict";a("3846");var e=a("cb7c"),s=a("0bfb"),o=a("9e1e"),n="toString",c=/./[n],r=function(t){a("2aba")(RegExp.prototype,n,t,!0)};a("79e5")(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?r(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?s.call(t):void 0)}):c.name!=n&&r(function(){return c.call(this)})},a13f:function(t,i,a){"use strict";var e=a("5922"),s=a.n(e);s.a},aae3:function(t,i,a){var e=a("d3f4"),s=a("2d95"),o=a("2b4c")("match");t.exports=function(t){var i;return e(t)&&(void 0!==(i=t[o])?!!i:"RegExp"==s(t))}},b877:function(t,i,a){"use strict";var e=a("ec3f"),s=a.n(e);s.a},c398:function(t,i,a){"use strict";a.r(i);var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticStyle:{width:"100%",height:"100%","padding-bottom":"120px"}},[a("div",{staticClass:"goods"},[a("div",{ref:"menuWrapper",staticClass:"menu-wrapper",staticStyle:{overflow:"auto"}},[a("ul",t._l(t.groupList,function(i,e){return a("li",{key:e,class:e===t.menuCurIndex?"menu-selected":"",on:{click:function(a){t.menuClick(e,i.id,a)}}},[a("p",[t._v(t._s(i.cat_name_cn))])])}))]),a("div",{ref:"goodsWrapper",staticClass:"goods-wrapper",staticStyle:{overflow:"auto"}},[t.groupList.length>0?a("div",{staticClass:"goods-wrapper-title"},[t._v(t._s(t.groupList[t.menuCurIndex].cat_name_cn))]):t._e(),a("ul",t._l(t.goodsList,function(i,e){return a("li",{key:e},[a("div",{staticClass:"goods-item-box"},[a("div",{staticClass:"goods-img"},[null==i[0].stock||"0"==i[0].stock?a("span",{staticStyle:{padding:"2px 4px",background:"#CC6666",position:"absolute",color:"#fff","z-index":"1"}},[t._v("售罄")]):t._e(),a("img",{attrs:{src:"http://pe1s.static.pdr365.com/null"!==i[0].sku_img?i[0].sku_img:"",alt:""}})]),a("div",{staticClass:"goods-item"},[a("div",{staticClass:"goods-item-title"},[a("span",[t._v(t._s(i[1].goods_name))])]),t._l(i[0].skus,function(i,e,s){return a("div",{key:s,staticClass:"goods-item-sku"},[a("span",[t._v(t._s(e)+":")]),a("span",[t._v(t._s(i))])])}),a("div",{staticClass:"goods-item-price"},[a("span",[t._v("¥"+t._s(i[1].goods_price/100))])])],2),a("div",{staticClass:"goods-control"},[a("cartControl",{attrs:{foods:i,stock:i[0].stock}})],1)])])})),t.goodsList.length>0?a("div",{staticClass:"bottom-tip"},[t._v("已经是最底了哦～")]):t._e()]),a("comboCart",{directives:[{name:"show",rawName:"v-show",value:t.comboShow,expression:"comboShow"}],attrs:{combo:t.comboData}}),a("shopCart",{directives:[{name:"show",rawName:"v-show",value:!t.comboShow,expression:"!comboShow"}],attrs:{cartList:t.cartList,bottom:t.bottom},on:{"create-order":t.createOrder}})],1),t.tip_msg?a("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[a("div",{staticClass:"weui-mask"}),a("div",{staticClass:"weui-dialog"},[a("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),a("div",{staticClass:"weui-dialog__ft"},[a("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(i){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?a("div",{attrs:{id:"loadingToast"}},[a("div",{staticClass:"weui-mask_transparent"}),t._m(0)]):t._e(),a("tabBottom",{attrs:{active:"store"}})],1)},s=[function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"weui-toast"},[a("i",{staticClass:"weui-loading weui-icon_toast"}),a("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],o=(a("6b54"),a("28a5"),a("ac6a"),a("c5f6"),a("c93e")),n=(a("cadf"),a("551c"),a("a78e")),c=a.n(n),r=a("d559"),d=a("c89d"),u=a("f398"),l=a("4116"),m=a("5880"),f={data:function(){return{tableNum:"",loading:!1,tip_msg:"",choose:!1,GoPay:!1,StoreList:"",menuCurIndex:0,comboData:[],sid:"",bottom:"bottom:50px",has_sid:!1}},beforeRouteEnter:function(t,i,a){document.title="商品",a()},computed:Object(o["a"])({},Object(m["mapState"])(["groupList","goodsList","firCatId","cartList","comboShow","logo"])),created:function(){var t=this.$route.params.sid;t?(this.sid=t,c.a.set("s_id",t)):this.sid=c.a.get("s_id"),this.CheckLogin()},mounted:function(){this.cityList()},methods:Object(o["a"])({},Object(m["mapActions"])(["getGoodsList","getGroupList","ToggleComboShow","initFirCatId"]),{_initScroll:function(){},menuClick:function(t,i,a){this.menuCurIndex=t;var e={};e.id=i,e.sid=this.sid,console.log(e),this.getGoodsList(e)},CheckLogin:function(){var t=c.a.get("_lac_ap_");t||(location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime())},goCombo:function(t){this.comboData=t,this.ToggleComboShow()},showTip:function(t,i){var a=this;a.tip_msg=t,i&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){a.tip_msg=""},i))},createOrder:function(){var t=this,i=c.a.get("_lac_k_");c.a.get("_lac_ated_"),c.a.get("_lac_op_");if(i)t.GoGoodsPay();else{var a=c.a.get("_lac_ap_");a?this.$router.push({name:"login",params:{apid:a}}):location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()}},cityList:function(){var t=this,i=c.a.get("city_no");if(i)this.sid?(this.initFirCatId(),this.getGroupList("storeList")):this.GetStore(i);else{var a=this,e="/general_api/api/cityList?ts="+Date.parse(new Date);fetch(e).then(function(t){return t.json()}).then(function(i){console.log(i),"0"==i.code&&i.data&&i.data.length>0&&(c.a.set("city_no",i.data[0].city_no),a.city_name=i.data[0].city_name,a.city_no=Number(i.data[0].city_no),t.GetStore(Number(i.data[0].city_no)),c.a.set("city_name",a.city_name)),a.loading=!1})}},GoGoodsPay:function(){var t=this,i="";t.loading=!0,this.cartList.forEach(function(t,a){var e="";e+=t[1].gt+","+t[1].id+","+t[0].id+",",i+=e.slice(0,e.length-1)+","+t[0].count+",;"});var a=i.slice(0,i.length-1),e=c.a.get("_lac_k_"),s=t.sid,o="/general_api/api/auth/createOrder?dss=190&tbn=&gs="+a+"&sid="+s+"&token="+e+"&ts="+Date.parse(new Date);fetch(o).then(function(t){return t.json()}).then(function(i){if(console.log(i),i.available){t.loading=!1;var a=i.data[0],e=i.data[1];document.cookie="goodsOrderNo="+e[0].order_no+";path=/",document.cookie="goosdOrderTnum="+a.tnum+";path=/",location.href="/general_api/tcss/index/?#/ConfirmGoodsOrder/tcssGoods"}else t.loading=!1,location.href="/general_api/h5/wx/auth?type=base&"+(new Date).getTime()})},getCookie:function(t){for(var i=document.cookie,a=i.split("; "),e=0;e<a.length;e++){var s=a[e].split("=");if(s[0]==t)return s[1]}return""},godo_my:function(){his.$router.push({name:"personalCenter"})},GetStore:function(t){var i=this,a="/general_api/api/StoreList?city_no="+t+"&"+(new Date).getTime();fetch(a).then(function(t){return t.json()}).then(function(t){if(0==t.code&&t.data&&t.data.length>0){var a=0;t.data[0].cinema_id&&(a=t.data[0].cinema_id),i.cinemaId=a,i.cinemanm=t.data[0].store_name,i.sid=t.data[0].s_id,console.log("set cinemaId default cookie======"+i.cinemaId),c.a.set("cinemaId",i.cinemaId),c.a.set("s_id",t.data[0].store_basic);var e=t.data[0].city+t.data[0].zone+t.data[0].address;i.encodeUnicodeAdd(e),i.encodeUnicodeName(t.data[0].physics_name),i.getGroupList("storeList").then(function(a){console.log("debug promise: sid >>>>> "+t.data[0].store_basic);var e={};e.id=i.firCatId,e.sid=t.data[0].store_basic,i.getGoodsList(e)})}i.loading=!1})},encodeUnicodeAdd:function(t){for(var i=[],a=0;a<t.length;a++)i[a]=("00"+t.charCodeAt(a).toString(16)).slice(-4);c.a.set("storeAdd","\\u"+i.join("\\u"))},encodeUnicodeName:function(t){for(var i=[],a=0;a<t.length;a++)i[a]=("00"+t.charCodeAt(a).toString(16)).slice(-4);c.a.set("storeName","\\u"+i.join("\\u"))},haun_cards:function(t){this.sid=t}}),watch:{firCatId:function(){if(console.log("watch_"+this.firCatId+",this.sid="+this.sid),-1!==this.firCatId&&this.sid){var t={};t.id=this.firCatId,t.sid=this.sid,this.getGoodsList(t)}}},components:{cartControl:r["a"],shopCart:d["a"],comboCart:u["a"],tabBottom:l["a"]}},g=f,p=(a("b877"),a("2877")),h=Object(p["a"])(g,e,s,!1,null,null,null);i["default"]=h.exports},ec3f:function(t,i,a){}}]);