(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20b5"],{"61b1":function(t,e,i){"use strict";var a=i("b543"),s=i.n(a);s.a},a78e:function(t,e,i){var a,s;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */(function(n){var c=!1;if(a=n,s="function"===typeof a?a.call(e,i,e,t):a,void 0===s||(t.exports=s),c=!0,t.exports=n(),c=!0,!c){var r=window.Cookies,o=window.Cookies=n();o.noConflict=function(){return window.Cookies=r,o}}})(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var i=arguments[t];for(var a in i)e[a]=i[a]}return e}function e(i){function a(e,s,n){var c;if("undefined"!==typeof document){if(arguments.length>1){if(n=t({path:"/"},a.defaults,n),"number"===typeof n.expires){var r=new Date;r.setMilliseconds(r.getMilliseconds()+864e5*n.expires),n.expires=r}n.expires=n.expires?n.expires.toUTCString():"";try{c=JSON.stringify(s),/^[\{\[]/.test(c)&&(s=c)}catch(t){}s=i.write?i.write(s,e):encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape);var o="";for(var l in n)n[l]&&(o+="; "+l,!0!==n[l]&&(o+="="+n[l]));return document.cookie=e+"="+s+o}e||(c={});for(var d=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,p=0;p<d.length;p++){var h=d[p].split("="),m=h.slice(1).join("=");this.json||'"'!==m.charAt(0)||(m=m.slice(1,-1));try{var g=h[0].replace(u,decodeURIComponent);if(m=i.read?i.read(m,g):i(m,g)||m.replace(u,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(t){}if(e===g){c=m;break}e||(c[g]=m)}catch(t){}}return c}}return a.set=a,a.get=function(t){return a.call(a,t)},a.getJSON=function(){return a.apply({json:!0},[].slice.call(arguments))},a.defaults={},a.remove=function(e,i){a(e,"",t(i,{expires:-1}))},a.withConverter=e,a}return e(function(){})})},b543:function(t,e,i){},b835:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",["purchasing"==t.CardNm||"Scanpurchasing"==t.CardNm?i("div",[t._m(0),i("div",{staticClass:"purchasingcard-mid"},[i("ul",{staticClass:"purchasingcard-mid-ul"},t._l(t.RechargeData,function(e,a){return-1!=t.RechargeData?i("li",{class:t.HId==e.id?"purchasingcard-mid-li-true":"purchasingcard-mid-li",on:{click:function(i){t.godo_choose(e.id,a)}}},[i("p",{class:t.HId==e.id?"purchasingcard-mid-li-grade-true":"purchasingcard-mid-li-grade",staticStyle:{height:".35rem","line-height":".35rem"}},[t._v(t._s(e.h_name))]),i("p",{class:t.HId==e.id?"purchasingcard-mid-li-introduce-true":"purchasingcard-mid-li-introduce"},[t._v(t._s(e.cr_type_desc))]),i("p",{class:t.HId==e.id?"purchasingcard-mid-li-price-true":"purchasingcard-mid-li-price",staticStyle:{"margin-top":".1rem"}},[t._v("¥"+t._s(e.getpay/100))]),t.HId==e.id?i("img",{staticClass:"purchasingcard-mid-li-true-img",attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/dot_icon.png"}}):t._e()]):t._e()}))]),i("div",{staticClass:"PurchasingCard-box"},[i("div",{staticClass:"PurchasingCard",on:{click:t.SshowNum}},[i("span",{staticClass:"PurchasingTitle"},[t._v("设置支付密码")]),i("span",{staticClass:"PurchasingHint"},[t._v("密码用于消费操作时，验证您的身份")]),""!=t.pwd?i("span",{staticClass:"shezhi"},[t._v("已设置")]):t._e(),i("div",{staticClass:"vertical2"})])]),t._m(1),i("div",{staticClass:"purchase-box"},[i("div",{staticClass:"purchase",on:{click:t.godo_purchasing}},[t._v("立即开通")])]),t.one?i("div",{staticClass:"purchasing-num-box",staticStyle:{"text-align":"center"}},[i("div",{staticClass:"purchasing-num-bgc",on:{click:function(e){t.one=!1}}}),i("div",{staticClass:"purchasing-num"},[i("div",{staticClass:"purchasing-num-top"},[i("img",{staticStyle:{float:"left",display:"inline-block",width:".4rem","margin-left":".2rem","margin-top":".15rem"},attrs:{src:"http://pe1s.static.pdr365.com/chahao.png"},on:{click:function(e){t.one=!1}}}),i("p",[t._v("设置会员卡支付密码")])]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.Ticket_one,expression:"Ticket_one"}],staticClass:"purchasing-num-input",attrs:{type:"num",placeholder:"请输入6位数字密码",readonly:"readonly",maxlength:"6",clearable:""},domProps:{value:t.Ticket_one},on:{input:function(e){e.target.composing||(t.Ticket_one=e.target.value)}}}),i("p",{staticClass:"purchasing-num-p"},[t._v("支付密码用于支付操作时，验证您的身份")]),i("div",{staticClass:"keyboard",staticStyle:{background:"#fff"},on:{click:function(e){return e.stopPropagation(),t.TicketKeyPress(e)}}},[t._m(2),t._m(3),t._m(4),t._m(5)])])]):t._e(),t.two?i("div",{staticClass:"purchasing-num-box",staticStyle:{"text-align":"center"}},[i("div",{staticClass:"purchasing-num-bgc",on:{click:function(e){t.two=!1}}}),i("div",{staticClass:"purchasing-num"},[i("div",{staticClass:"purchasing-num-top"},[i("img",{staticStyle:{float:"left",display:"inline-block",width:".4rem","margin-left":".2rem","margin-top":".15rem"},attrs:{src:"http://pe1s.static.pdr365.com/chahao.png"},on:{click:function(e){t.two=!1}}}),i("p",[t._v("确认会员卡支付密码")])]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.Ticket_two,expression:"Ticket_two"}],staticClass:"purchasing-num-input",attrs:{type:"num",placeholder:"请输入6位数字密码",readonly:"readonly",maxlength:"6",clearable:""},domProps:{value:t.Ticket_two},on:{input:function(e){e.target.composing||(t.Ticket_two=e.target.value)}}}),i("p",{staticClass:"purchasing-num-p"},[t._v("请在此输入您的支付密码")]),i("div",{staticClass:"keyboard",staticStyle:{background:"#fff"},on:{click:function(e){return e.stopPropagation(),t.TicketTwo(e)}}},[t._m(6),t._m(7),t._m(8),t._m(9)])])]):t._e()]):t._e(),"recharge"==t.CardNm?i("div",[t._m(10),i("div",{staticClass:"purchasingcard-mid"},[i("ul",{staticClass:"purchasingcard-mid-ul"},t._l(t.RechargeData,function(e,a){return-1!=t.RechargeData?i("li",{class:t.HId==e.id?"purchasingcard-mid-li-true":"purchasingcard-mid-li",attrs:{"data-index":a},on:{click:function(i){t.godo_choose(e.id,a)}}},[i("p",{class:t.HId==e.id?"purchasingcard-mid-li-price-true":"purchasingcard-mid-li-price",attrs:{"data-index":a}},[t._v("¥"+t._s(e.getpay/100))]),i("p",{class:t.HId==e.id?"purchasingcard-mid-li-introduce-true":"purchasingcard-mid-li-introduce",attrs:{"data-index":a}},[t._v(t._s(e.cr_type_desc))]),t.HId==e.id?i("img",{staticClass:"purchasingcard-mid-li-true-img",attrs:{"data-index":a,src:"http://pe1s.static.pdr365.com/tencent/icon/dot_icon.png"}}):t._e()]):t._e()}))]),t._m(11),i("div",{staticClass:"purchase-box"},[i("div",{staticClass:"purchase",on:{click:t.godo_recharge}},[t._v("立即充值")])])]):t._e(),t.tip_msg?i("div",{staticClass:"js_dialog",attrs:{id:"iosDialog2"}},[i("div",{staticClass:"weui-mask"}),i("div",{staticClass:"weui-dialog"},[i("div",{staticClass:"weui-dialog__bd"},[t._v(t._s(t.tip_msg))]),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:function(e){t.tip_msg=""}}},[t._v("知道了")])])])]):t._e(),t.loading?i("div",{attrs:{id:"loadingToast"}},[i("div",{staticClass:"weui-mask_transparent"}),t._m(12)]):t._e()])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"purchasingcard-top"},[i("p",{staticClass:"purchasingcard-top-title"},[t._v("选择等级")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"purchasingcard-bot"},[i("div",{staticClass:"purchasingcard-bot-title"},[t._v("\n\t\t\t\t\t支付方式\n\t\t\t\t")]),i("div",{staticClass:"purchasingcard-bot-pay"},[i("div",[i("img",{attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/wechat_pay_icon.png"}}),i("p",[t._v("微信支付")])]),i("i",{staticClass:"weui-icon-success weui-icon_msg",staticStyle:{"font-size":".4rem","margin-right":".3rem"}})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"1"}},[t._v("1")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"2"}},[t._v("2")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"3"}},[t._v("3")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"4"}},[t._v("4")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"5"}},[t._v("5")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"6"}},[t._v("6")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"7"}},[t._v("7")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"8"}},[t._v("8")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"9"}},[t._v("9")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"D"}},[t._v("删除")]),i("div",{staticClass:"numInput key-cell",attrs:{"data-num":"0"}},[t._v("0")]),i("div",{staticClass:"numInput key-confirm",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"S"}},[t._v("确认")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"1"}},[t._v("1")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"2"}},[t._v("2")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"3"}},[t._v("3")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"4"}},[t._v("4")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"5"}},[t._v("5")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"6"}},[t._v("6")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell borderR",staticStyle:{"border-left":"none"},attrs:{"data-num":"7"}},[t._v("7")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"8"}},[t._v("8")]),i("div",{staticClass:"numInput key-cell borderR",attrs:{"data-num":"9"}},[t._v("9")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"key-row"},[i("div",{staticClass:"numInput key-cell",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"D"}},[t._v("删除")]),i("div",{staticClass:"numInput key-cell",attrs:{"data-num":"0"}},[t._v("0")]),i("div",{staticClass:"numInput key-confirm",staticStyle:{background:"#C6CBD4","font-size":"0.3rem"},attrs:{"data-num":"S"}},[t._v("确认")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"purchasingcard-top"},[i("p",{staticClass:"purchasingcard-top-title"},[t._v("选择充值金额")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"purchasingcard-bot"},[i("div",{staticClass:"purchasingcard-bot-title"},[t._v("\n\t\t\t\t\t支付方式\n\t\t\t\t")]),i("div",{staticClass:"purchasingcard-bot-pay"},[i("div",[i("img",{attrs:{src:"http://pe1s.static.pdr365.com/tencent/icon/wechat_pay_icon.png"}}),i("p",[t._v("微信支付")])]),i("i",{staticClass:"weui-icon-success weui-icon_msg",staticStyle:{"font-size":".4rem","margin-right":".3rem"}})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-toast"},[i("i",{staticClass:"weui-loading weui-icon_toast"}),i("p",{staticClass:"weui-toast__content"},[t._v("加载中")])])}],n=(i("c5f6"),i("a78e")),c=i.n(n),r={data:function(){return{loading:!0,tip_msg:"",synopsis:"synopsis-none",showBtn:"showBtn",RechargeData:"",id:"",HId:"",Num:"",Ticket_one:"",Ticket_two:"",pwd:"",S:"",one:!1,two:!1,other:"",CardNm:"",CardNum:""}},beforeRouteEnter:function(t,e,i){document.title="会员卡",i()},created:function(){this.Num=c.a.get("CardNum"),this.CardNm=this.$route.params.CardNm,this.GradeList()},methods:{SshowNum:function(){this.one=!0},showTip:function(t,e){var i=this;i.tip_msg=t,e&&(clearTimeout(window.maxtm),window.maxtm=setTimeout(function(){i.tip_msg=""},e))},GradeList:function(){var t=this,e=this,i="/general_api/api/CardGradeList?ts="+Date.parse(new Date);fetch(i).then(function(t){return t.json()}).then(function(i){i.available?(e.RechargeData=i.obj,e.HId=i.obj[0].id,e.id=i.obj[0].id):t.showTip("暂不支持会员卡申领，欢迎您到门店办理~",2e3),e.loading=!1})},godo_choose:function(t,e){for(var i=this,a=i.RechargeData,s=0;s<a.length;s++)s==e&&(i.HId=a[e].id);i.id=t},godo_purchasing:function(){var t=this,e=t.pwd,i=t.HId;if(""!=e){t.loading=!0;var a=c.a.get("_lac_k_"),s="/general_api/api/auth/createCardRechargeOrder?token="+a+"&mc_pwd="+e+"&h_id="+i+"&ts="+Date.parse(new Date);fetch(s).then(function(t){return t.json()}).then(function(e){if(console.log(e),e.available){t.loading=!1;var i=c.a.get("_lac_k_"),a="/general_api/api/auth/GetWxObj?ct=201101&tnum="+e.obj.data.tnum+"&token="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){-1==e.code?t.showTip(e.text):0==e.code?(t.other=e.other,"001001"==e.paycode?t.$router.push({name:"kaikaSuccess"}):t.onBridgeReady()):0==e.available&&"user_no_login"==e.messages[0]&&t.showTip("用户未登录")})}else 0==e.available&&"user_no_login"==e.messages[0]?(t.loading=!1,t.showTip("用户未登录")):(t.loading=!1,t.showTip(e.messages[0]))})}else this.showTip("请设置6位数的密码~",1e3)},onBridgeReady:function(){var t=this,e=t.other;t.loading=!1;var i=t.CardNm;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:"MD5",paySign:e.paySign},function(e){"get_brand_wcpay_request:ok"==e.err_msg?"Scanpurchasing"==i?t.$router.push({name:"kaikaSuccess"}):t.$router.go(-1):"get_brand_wcpay_request:cancel"==e.err_msg?alert("您取消了付款"):"get_brand_wcpay_request:fail"==e.err_msg&&alert("支付失败")})},TicketKeyPress:function(t){var e=t.target.dataset.num;if(-1==e)return!1;switch(String(e)){case".":this.TicketDecimalPoint();break;case"D":this.TicketDeleteKey();break;case"C":this.TicketClearKey();break;case"S":this.TicketConfirmKey();break;default:this.TicketNumberKey(e);break}},TicketDecimalPoint:function(){if(this.Ticket_one.indexOf(".")>-1)return!1;this.Ticket_one.length?this.Ticket_one=this.Ticket_one+".":this.Ticket_one="0."},TicketDeleteKey:function(){var t=this.Ticket_one;if(!t.length)return!1;this.Ticket_one=t.substring(0,t.length-1)},TicketClearKey:function(){this.Ticket_one=""},TicketConfirmKey:function(){var t=this.Ticket_one;if(!t.length)return this.showTip("您目前未输入~",1e3),!1;6==t.length?(this.pwd=t,this.one=!1,this.two=!0):this.showTip("请设置6位数的密码~",1e3)},TicketNumberKey:function(t){var e=this.Ticket_one;if(e.length<6){if(e.indexOf(".")>-1&&e.substring(e.indexOf(".")+1).length<2&&(this.Ticket_one=e+t),!(e.indexOf(".")>-1))if(0==t&&0==e.length)this.Ticket_one="0.";else{if(e.length&&0===Number(e.charAt(0)))return;this.Ticket_one=e+t}}else this.showTip("最多只能设置6位数的密码~",1e3)},TicketTwo:function(t){var e=t.target.dataset.num;if(-1==e)return!1;switch(String(e)){case".":this.aTicketDecimalPoint();break;case"D":this.aTicketDeleteKey();break;case"C":this.aTicketClearKey();break;case"S":this.aTicketConfirmKey();break;default:this.aTicketNumberKey(e);break}},aTicketDecimalPoint:function(){if(this.Ticket_two.indexOf(".")>-1)return!1;this.Ticket_two.length?this.Ticket_two=this.Ticket_two+".":this.Ticket_two="0."},aTicketDeleteKey:function(){var t=this.Ticket_two;if(!t.length)return!1;this.Ticket_two=t.substring(0,t.length-1)},aTicketClearKey:function(){this.Ticket_two=""},aTicketConfirmKey:function(){var t=this.Ticket_two;if(!t.length)return this.showTip("您目前未输入~",1e3),!1;if(6==t.length){if(this.pwd!=t)return void this.showTip("两次输入的密码不一致~",1e3);this.pwd=t,this.two=!1,this.one=!1}else this.showTip("请设置6位数的密码~",1e3)},aTicketNumberKey:function(t){var e=this.Ticket_two;if(e.length<6){if(e.indexOf(".")>-1&&e.substring(e.indexOf(".")+1).length<2&&(this.Ticket_two=e+t),!(e.indexOf(".")>-1))if(0==t&&0==e.length)this.Ticket_two="0.";else{if(e.length&&0===Number(e.charAt(0)))return;this.Ticket_two=e+t}}else this.showTip("最多只能设置6位数的密码~",1e3)},godo_recharge:function(){var t=this,e=t.Num,i=t.id;t.loading=!0;var a="/general_api/api/RechargeCard?mc_num="+e+"&h_id="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){if(e.available){t.loading=!1;var i=c.a.get("_lac_k_"),a="/general_api/api/auth/GetWxObj?ct=201101&tnum="+e.obj.data.tnum+"&token="+i+"&ts="+Date.parse(new Date);fetch(a).then(function(t){return t.json()}).then(function(e){console.log(e),-1==e.code?t.showTip(e.text):0==e.code?(t.other=e.other,t.onBridgeReady()):0==e.available&&"user_no_login"==e.messages[0]&&t.showTip("用户未登录")})}else t.loading=!1,t.showTip(e.messages[0])})}}},o=r,l=(i("61b1"),i("2877")),d=Object(l["a"])(o,a,s,!1,null,"7f58d113",null);e["default"]=d.exports}}]);